<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><title>Backend Type: s3 | Terraform | HashiCorp Developer</title><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta property="og:locale" content="en_US"/><meta property="og:type" content="website"/><meta property="article:publisher" content="https://www.facebook.com/HashiCorp/"/><meta name="twitter:site" content="@HashiCorp"/><meta name="twitter:card" content="summary_large_image"/><meta name="theme-color" content="#000"/><meta name="description" property="og:description" content="Terraform can store state remotely in S3 and lock that state with DynamoDB."/><meta name="twitter:description" content="Terraform can store state remotely in S3 and lock that state with DynamoDB."/><meta property="og:site_name" content="Backend Type: s3 | Terraform | HashiCorp Developer"/><meta property="og:title" content="Backend Type: s3 | Terraform | HashiCorp Developer"/><meta property="og:image" content="https://developer.hashicorp.com/og-image/terraform.jpg"/><link rel="canonical" href="https://developer.hashicorp.com/terraform/language/settings/backends/s3"/><link rel="icon" href="/favicon.ico" sizes="any"/><link rel="icon" href="/icon.svg" type="image/svg+xml"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="google-site-verification" content="zRQZqfAsOX-ypXfU0mzAIzb5rUvj5fA4Zw2jWJRN-JI"/><meta name="zd-site-verification" content="9qmgy2yz6zbk00tcci2y" data-product="hcp"/><meta name="zd-site-verification" content="xxmpuhow9r8iz9sq31d2bc" data-product="terraform"/><meta name="zd-site-verification" content="iuwt0p3j768fmso8hm98" data-product="packer"/><meta name="zd-site-verification" content="lhbjuf5innptc678ken0f8" data-product="consul"/><meta name="zd-site-verification" content="d4udllp6txbot6z8cuzxs" data-product="boundary"/><meta name="zd-site-verification" content="1i8so200ii4smuo4wm0j9" data-product="vault"/><meta name="zd-site-verification" content="ykjjnuk3ng93l06hwzj6ug" data-product="nomad"/><meta name="zd-site-verification" content="9kcw71js0xc1yjobla5mq" data-product="waypoint"/><meta name="zd-site-verification" content="3aoyn57r4ver42w2u8cyy" data-product="vagrant"/><meta name="twitter:image" content="https://developer.hashicorp.com/og-image/terraform.jpg"/><link rel="prefetch" href="https://www.datadoghq-browser-agent.com/datadog-rum-v4.js"/><script type="application/ld+json">[{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Developer","item":"https://developer.hashicorp.com/"},{"@type":"ListItem","position":2,"name":"Terraform","item":"https://developer.hashicorp.com/terraform"},{"@type":"ListItem","position":3,"name":"Configuration Language","item":"https://developer.hashicorp.com/terraform/language"},{"@type":"ListItem","position":4,"name":"Terraform Settings","item":"https://developer.hashicorp.com/terraform/language/settings"}]}]</script><meta name="next-head-count" content="31"/><link rel="preload" href="/hashicorp-terraform/_next/static/css/a54901a16e20d9e4.css" as="style"/><link rel="stylesheet" href="/hashicorp-terraform/_next/static/css/a54901a16e20d9e4.css" data-n-g=""/><link rel="preload" href="/hashicorp-terraform/_next/static/css/9b4f2c1a1aca2b03.css" as="style"/><link rel="stylesheet" href="/hashicorp-terraform/_next/static/css/9b4f2c1a1aca2b03.css" data-n-p=""/><link rel="preload" href="/hashicorp-terraform/_next/static/css/7113518d1df3c2b6.css" as="style"/><link rel="stylesheet" href="/hashicorp-terraform/_next/static/css/7113518d1df3c2b6.css" data-n-p=""/><link rel="preload" href="/hashicorp-terraform/_next/static/css/dd50a9748acf021a.css" as="style"/><link rel="stylesheet" href="/hashicorp-terraform/_next/static/css/dd50a9748acf021a.css" data-n-p=""/><link rel="preload" href="/hashicorp-terraform/_next/static/css/127798b63a91cf79.css" as="style"/><link rel="stylesheet" href="/hashicorp-terraform/_next/static/css/127798b63a91cf79.css" data-n-p=""/><link rel="preload" href="/hashicorp-terraform/_next/static/css/dd7fbe038f60aecc.css" as="style"/><link rel="stylesheet" href="/hashicorp-terraform/_next/static/css/dd7fbe038f60aecc.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/hashicorp-terraform/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/hashicorp-terraform/_next/static/chunks/webpack-26c713c388d3395f.js" defer=""></script><script src="/hashicorp-terraform/_next/static/chunks/framework-2fe4cb6473b20297.js" defer=""></script><script src="/hashicorp-terraform/_next/static/chunks/main-56c8cdc4c52ecf85.js" defer=""></script><script src="/hashicorp-terraform/_next/static/chunks/pages/_app-6b1cbe3ece39f16b.js" defer=""></script><script src="/hashicorp-terraform/_next/static/chunks/9523-0b908e8cd3f0a63a.js" defer=""></script><script src="/hashicorp-terraform/_next/static/chunks/844-6a3a435d388db3a6.js" defer=""></script><script src="/hashicorp-terraform/_next/static/chunks/9193-e18872657e224646.js" defer=""></script><script src="/hashicorp-terraform/_next/static/chunks/5675-850ad5b9fec7c7a8.js" defer=""></script><script src="/hashicorp-terraform/_next/static/chunks/9665-830fec146b27e035.js" defer=""></script><script src="/hashicorp-terraform/_next/static/chunks/5799-b08b76458cb57cae.js" defer=""></script><script src="/hashicorp-terraform/_next/static/chunks/4901-37a7cf451885a6d8.js" defer=""></script><script src="/hashicorp-terraform/_next/static/chunks/543-5cd78890afdafa1f.js" defer=""></script><script src="/hashicorp-terraform/_next/static/chunks/3575-cb8138cde2bf2a23.js" defer=""></script><script src="/hashicorp-terraform/_next/static/chunks/6550-3fb0ca854c13fd58.js" defer=""></script><script src="/hashicorp-terraform/_next/static/chunks/pages/terraform/language/%5B%5B...page%5D%5D-8b346cd691b1295d.js" defer=""></script><script src="/hashicorp-terraform/_next/static/vnIg_8PIbgh6eod_QgOFp/_buildManifest.js" defer=""></script><script src="/hashicorp-terraform/_next/static/vnIg_8PIbgh6eod_QgOFp/_ssgManifest.js" defer=""></script></head><body><script>!function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t,e){var n=document.createElement("script");n.type="text/javascript";n.async=!0;n.src="https://artemis.hashicorp.com/script/"+t;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a);analytics._loadOptions=e};analytics._cdn="https://artemis.hashicorp.com";analytics.SNIPPET_VERSION="4.1.0";}}();</script><div id="__next"><div class="style_root__gtmO7 style_hideOnMobile__8aYhN"><a href="https://hashicorp.sjc1.qualtrics.com/jfe/form/SV_0fFXRsA0wd6iiQS" class="style_linkElem__N77Wq"><span class="style_textContainer__nWykx g-grid-container"><span class="style_tag__49wXK g-type-body-small-x-strong">Research<!-- --> </span><span class="style_text__LAM7g g-type-body-small">Help improve navigation and content organization by answering a short survey.<span class="style_linkText__zMT7D g-type-body-small-x-strong"> <!-- -->Start Survey</span></span></span></a><button class="style_closeButton__sM2Zq"><div><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 5L5 15M5 5l10 10" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></div><span style="position:absolute;border:0;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;word-wrap:normal">Dismiss alert</span></button></div><script type="text/javascript">
(function checkDismissAlertBanner() {
  try {
    if (document.cookie.includes('banner_help-improve-navigation-and-content-organization-by-answering-a-short-survey.=1')) {
      const element = document.querySelector('.style_root__gtmO7')
      element.classList.remove('style_isShown__VBT3O')
    }
  } catch (_) {
    // do nothing
  }
})()
</script><script>!function(){try{var d=document.documentElement,n='data-theme',s='setAttribute';var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';d[s](n,'dark')}else{d.style.colorScheme = 'light';d[s](n,'light')}}else if(e){d[s](n,e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="core-dev-dot-layout_root__n_H9f"><div class="base-new-layout_root___lg7a" data-layout="base-new"><div class="base-new-layout_header__fm91R"><header class="navigation-header_root__melJh"><div class="navigation-header_leftSide__KvYLy"><div class="product-page-content_productsDropdown__ADVi_"><div class="dropdown-menu_root__6KZmR"><div class="dropdown-menu_activatorWrapper__CcEW9"><button aria-controls="navigation-header-menu-react-aria-1" aria-expanded="false" aria-label="Main menu" class="dropdown-menu_activator__ckTuF g-focus-ring-from-box-shadow-dark product-page-content_productsDropdownButton__qQbE_" data-heap-track="navigation-header-dropdown-menu-activator"><span class="dropdown-menu_activatorLeadingIcon__eumCf"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-hidden="true" class="product-page-content_productsDropdownIcon__wBq3i"><g fill="currentColor"><path d="M10.336 1.5L2 6.268v11.456l3.131 1.793V8.061l5.205-2.979V1.5z"></path><path d="M13.664 1.5v9.123h-3.328V7.219L7.203 9.012V20.7l3.133 1.796V13.4h3.328v3.381l3.131-1.793V3.293L13.664 1.5z"></path><path d="M22 17.732L13.664 22.5v-3.582l5.203-2.98V4.484L22 6.276v11.456z"></path></g></svg></span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="dropdown-menu_activatorTrailingIcon__9J6dL"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></button></div><div class="dropdown-menu_dropdownContainer__PHNMa product-page-content_productsDropdownPane__tPPie" id="navigation-header-menu-react-aria-1" style="display:none"><ul class="dropdown-menu_itemGroup__oGM_M"><li><a class="dropdown-menu_itemLink__VpbEz g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" href="/hashicorp-terraform"><div class="dropdown-menu_itemLinkContent__DF_Kb"><div class="dropdown-menu_leftAlignedItemLinkContent__DNVQb"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__HoaSb"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M7.846 2.574a.25.25 0 01.308 0l5.25 4.12a.25.25 0 01.096.196v7.36a.75.75 0 001.5 0V6.89a1.75 1.75 0 00-.67-1.377L9.08 1.394a1.75 1.75 0 00-2.16 0l-5.25 4.12A1.75 1.75 0 001 6.89v7.36a.75.75 0 001.5 0V6.89a.25.25 0 01.096-.196l5.25-4.12z"></path><path d="M6.5 14.25V10.5h3v3.75a.75.75 0 001.5 0v-4C11 9.56 10.44 9 9.75 9h-3.5C5.56 9 5 9.56 5 10.25v4a.75.75 0 001.5 0z"></path></g></svg></span><span class="text_root__WdIWm hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__rL_Fw">HashiCorp Developer</span></div></div></a></li></ul><hr class="dropdown-menu_itemGroupDivider__2hzpC"/><ul class="dropdown-menu_itemGroup__oGM_M"><li><a class="dropdown-menu_itemLink__VpbEz g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" href="/hashicorp-terraform/hcp"><div class="dropdown-menu_itemLinkContent__DF_Kb"><div class="dropdown-menu_leftAlignedItemLinkContent__DNVQb"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__HoaSb"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M6.835.6L1 3.96v8.074l2.192 1.264V5.224l3.643-2.1V.6z"></path><path d="M9.165.6v6.43h-2.33v-2.4L4.642 5.894v8.237l2.193 1.266v-6.41h2.33v2.383l2.192-1.264V1.864L9.165.6z"></path><path d="M15 12.04L9.165 15.4v-2.525l3.642-2.1V2.703L15 3.966v8.073z"></path></g></svg></span><span class="text_root__WdIWm hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__rL_Fw">HashiCorp Cloud Platform</span></div></div></a></li><li><a class="dropdown-menu_itemLink__VpbEz g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" href="/hashicorp-terraform/terraform"><div class="dropdown-menu_itemLinkContent__DF_Kb"><div class="dropdown-menu_leftAlignedItemLinkContent__DNVQb"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__HoaSb"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="var(--token-color-terraform-brand)"><path d="M1 0v5.05l4.349 2.527V2.526L1 0zM10.175 5.344l-4.35-2.525v5.05l4.35 2.527V5.344zM10.651 10.396V5.344L15 2.819v5.05l-4.349 2.527zM10.174 16l-4.349-2.526v-5.05l4.349 2.525V16z"></path></g></svg></span><span class="text_root__WdIWm hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__rL_Fw">Terraform</span></div></div></a></li><li><a class="dropdown-menu_itemLink__VpbEz g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" href="/hashicorp-terraform/packer"><div class="dropdown-menu_itemLinkContent__DF_Kb"><div class="dropdown-menu_leftAlignedItemLinkContent__DNVQb"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__HoaSb"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="var(--token-color-packer-brand)"><path d="M5.163 0l5.762 3.247c1.138.646 2.074 2.085 2.075 3.2v4.963c0 1.123-.933 1.502-2.074.858L9.083 11.23V4.469l-3.92-2.216V0z"></path><path d="M8.3 4.953L3 1.956v11.047L8.3 16V4.953z"></path></g></svg></span><span class="text_root__WdIWm hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__rL_Fw">Packer</span></div></div></a></li><li><a class="dropdown-menu_itemLink__VpbEz g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" href="/hashicorp-terraform/consul"><div class="dropdown-menu_itemLinkContent__DF_Kb"><div class="dropdown-menu_leftAlignedItemLinkContent__DNVQb"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__HoaSb"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="var(--token-color-consul-brand)"><path d="M4.737 14.193A7 7 0 008.006 15a6.98 6.98 0 004.735-1.847l-1.66-1.737a4.6 4.6 0 110-6.828l1.66-1.738a7 7 0 10-8.004 11.343zM13.32 11.402a.573.573 0 10.637-.953.573.573 0 00-.637.953z"></path><path d="M7.96 9.517a1.517 1.517 0 11-.012-3.034 1.517 1.517 0 01.013 3.034zM13.978 9.447a.574.574 0 10.637-.954.574.574 0 00-.637.954zM12.59 9.472a.574.574 0 110-1.148.574.574 0 010 1.148zM13.978 7.514a.574.574 0 10.637-.954.574.574 0 00-.637.954zM12.59 7.675a.574.574 0 110-1.148.574.574 0 010 1.148zM13.353 5.585a.574.574 0 10.635-.956.574.574 0 00-.635.956z"></path></g></svg></span><span class="text_root__WdIWm hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__rL_Fw">Consul</span></div></div></a></li><li><a class="dropdown-menu_itemLink__VpbEz g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" href="/hashicorp-terraform/vault"><div class="dropdown-menu_itemLinkContent__DF_Kb"><div class="dropdown-menu_leftAlignedItemLinkContent__DNVQb"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__HoaSb"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="var(--token-color-vault-brand)" d="M0 0l7.971 15.516L16 0H0zm6.732 6.16h-1.27V4.89h1.27v1.27zm0-1.906h-1.27V2.985h1.27v1.269zm1.904 3.81h-1.27v-1.27h1.27v1.27zm0-1.905h-1.27V4.89h1.27v1.27zm0-1.905h-1.27V2.985h1.27v1.269zm1.894 1.905H9.26V4.89h1.27v1.27zM9.26 4.254V2.985h1.27v1.269H9.26z"></path></svg></span><span class="text_root__WdIWm hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__rL_Fw">Vault</span></div></div></a></li><li><a class="dropdown-menu_itemLink__VpbEz g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" href="/hashicorp-terraform/boundary"><div class="dropdown-menu_itemLinkContent__DF_Kb"><div class="dropdown-menu_leftAlignedItemLinkContent__DNVQb"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__HoaSb"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="var(--token-color-boundary-brand)"><path d="M4.81 15v-1.085h2.25v-.67H5.968v-1.093h5.149L8.726 8l2.392-4.154H5.84v5.76H3V1h9.775l1.631 2.832L12.006 8l2.448 4.252L12.872 15H4.81z"></path><path d="M5.248 12.152h-1.09v1.092h1.09v-1.092zM3 13.907h1.09v1.092H3v-1.092z"></path></g></svg></span><span class="text_root__WdIWm hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__rL_Fw">Boundary</span></div></div></a></li><li><a class="dropdown-menu_itemLink__VpbEz g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" href="/hashicorp-terraform/nomad"><div class="dropdown-menu_itemLinkContent__DF_Kb"><div class="dropdown-menu_leftAlignedItemLinkContent__DNVQb"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__HoaSb"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="var(--token-color-nomad-brand)" d="M8 0L1 4v8l7 4 7-4V4L8 0zm3.119 8.797L9.254 9.863 7.001 8.65v2.549l-2.118 1.33v-5.33l1.68-1.018 2.332 1.216V4.794l2.23-1.322-.006 5.325z"></path></svg></span><span class="text_root__WdIWm hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__rL_Fw">Nomad</span></div></div></a></li><li><a class="dropdown-menu_itemLink__VpbEz g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" href="/hashicorp-terraform/waypoint"><div class="dropdown-menu_itemLinkContent__DF_Kb"><div class="dropdown-menu_leftAlignedItemLinkContent__DNVQb"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__HoaSb"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="var(--token-color-waypoint-brand)"><path d="M4 5.312h1.334L10 13.4l3.334-5.777L10.666 3H8l2.666 4.623L10 8.778 6.667 3H0l6 10.4 1.333-2.31L4 5.311zM14.002 6.463L16 3h-3.996l1.998 3.463z"></path></g></svg></span><span class="text_root__WdIWm hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__rL_Fw">Waypoint</span></div></div></a></li><li><a class="dropdown-menu_itemLink__VpbEz g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" href="/hashicorp-terraform/vagrant"><div class="dropdown-menu_itemLinkContent__DF_Kb"><div class="dropdown-menu_leftAlignedItemLinkContent__DNVQb"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__HoaSb"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="#1868F2" d="M13.08.75L9.924 2.58v1.123L8 8.245 6.076 3.703V2.58L2.92.75 1 1.864v1.293l4.276 10.514L8 15.25l2.724-1.579L15 3.157V1.864L13.08.75z"></path><path fill="#0850C5" d="M15 1.865l-3.157 1.829v1.124L9.28 10.57 8 11.312v3.939l2.724-1.579L15 3.158V1.865zM6.076 3.703V2.58l-1.92 1.113v1.125l2.564 5.751L8 9.827V8.245L6.076 3.703z"></path></svg></span><span class="text_root__WdIWm hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__rL_Fw">Vagrant</span></div></div></a></li></ul></div></div></div><div class="product-page-content_productLinkAndNav___DH4r"><a aria-label="Terraform home" class="product-icon-text-link_root__8kSDs g-focus-ring-from-box-shadow-dark" data-heap-track="navigation-header-product-logo-link" href="/hashicorp-terraform/terraform"><div class="product-icon-text-lockup_root__p7LuM"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="product-icon-text-lockup_icon__i_EB4"><g fill="var(--token-color-terraform-brand)"><path d="M1 0v5.05l4.349 2.527V2.526L1 0zM10.175 5.344l-4.35-2.525v5.05l4.35 2.527V5.344zM10.651 10.396V5.344L15 2.819v5.05l-4.349 2.527zM10.174 16l-4.349-2.526v-5.05l4.349 2.525V16z"></path></g></svg><span class="product-icon-text-lockup_text__gfI6W hds-typography-body-200">Terraform</span></div></a><nav class="nav-bar-list-container_nav__0Q0OL"><ul class="nav-bar-list-container_ul__sgfM9"><li><a aria-label="Terraform Install" class="primary-nav-link_root__5e0jF g-focus-ring-from-box-shadow-dark" data-heap-track="navigation-header-primary-nav-link" href="/hashicorp-terraform/terraform/downloads"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__zsIfa">Install</span></a></li><li><a aria-label="Terraform Tutorials" class="primary-nav-link_root__5e0jF g-focus-ring-from-box-shadow-dark" data-heap-track="navigation-header-primary-nav-link" href="/hashicorp-terraform/terraform/tutorials"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__zsIfa">Tutorials</span></a></li><li><div class="dropdown-menu_root__6KZmR"><div class="dropdown-menu_activatorWrapper__CcEW9"><button aria-controls="navigation-header-menu-react-aria-15" aria-expanded="false" aria-label="Terraform Documentation" class="dropdown-menu_activator__ckTuF g-focus-ring-from-box-shadow-dark" data-heap-track="navigation-header-dropdown-menu-activator"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-medium dropdown-menu_activatorText__tUd1H">Documentation</span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="dropdown-menu_activatorTrailingIcon__9J6dL"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></button></div><div class="dropdown-menu_dropdownContainer__PHNMa" id="navigation-header-menu-react-aria-15" style="display:none"><ul class="dropdown-menu_itemGroup__oGM_M dropdown-menu_twoColumns__6163o"><li><a class="dropdown-menu_itemLink__VpbEz g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" href="/hashicorp-terraform/terraform/docs"><div class="dropdown-menu_itemLinkContent__DF_Kb"><div class="dropdown-menu_leftAlignedItemLinkContent__DNVQb"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__HoaSb primary-nav-submenu_primarySubnavDropdownItemIcon__ESjFj terraform"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M4.25 1A2.25 2.25 0 002 3.25v9.5A2.25 2.25 0 004.25 15h8.5c.69 0 1.25-.56 1.25-1.25V2.25C14 1.56 13.44 1 12.75 1h-8.5zM3.5 12.75c0 .414.336.75.75.75h8.25v-2H4.25a.75.75 0 00-.75.75v.5zm0-2.622c.235-.083.487-.128.75-.128h8.25V2.5H4.25a.75.75 0 00-.75.75v6.878z" clip-rule="evenodd"></path></svg></span><span class="text_root__WdIWm hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__rL_Fw">About the Docs</span></div></div></a></li><li><a class="dropdown-menu_itemLink__VpbEz g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" href="/hashicorp-terraform/terraform/language"><div class="dropdown-menu_itemLinkContent__DF_Kb"><div class="dropdown-menu_leftAlignedItemLinkContent__DNVQb"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__HoaSb primary-nav-submenu_primarySubnavDropdownItemIcon__ESjFj terraform"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M7.22 7.838a.625.625 0 01-.058.882L5.699 10l1.463 1.28a.625.625 0 01-.824.94l-2-1.75a.625.625 0 010-.94l2-1.75a.625.625 0 01.882.058zM8.838 8.72a.625.625 0 01.824-.94l2 1.75a.625.625 0 010 .94l-2 1.75a.625.625 0 01-.824-.94L10.301 10 8.838 8.72z"></path><path fill-rule="evenodd" d="M3.25 0A2.25 2.25 0 001 2.25v11.5A2.25 2.25 0 003.25 16h9.5A2.25 2.25 0 0015 13.75V5.457c0-.331-.132-.65-.366-.884L10.427.366A1.25 1.25 0 009.543 0H3.25zM2.5 2.25a.75.75 0 01.75-.75H9v3.75c0 .414.336.75.75.75h3.75v7.75a.75.75 0 01-.75.75h-9.5a.75.75 0 01-.75-.75V2.25zm9.94 2.25L10.5 2.56V4.5h1.94z" clip-rule="evenodd"></path></g></svg></span><span class="text_root__WdIWm hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__rL_Fw">Configuration Language</span></div></div></a></li><li><a class="dropdown-menu_itemLink__VpbEz g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" href="/hashicorp-terraform/terraform/cli"><div class="dropdown-menu_itemLinkContent__DF_Kb"><div class="dropdown-menu_leftAlignedItemLinkContent__DNVQb"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__HoaSb primary-nav-submenu_primarySubnavDropdownItemIcon__ESjFj terraform"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M3.924 5.02a.75.75 0 011.056-.096l3 2.5a.75.75 0 010 1.152l-3 2.5a.75.75 0 11-.96-1.152L6.328 8 4.02 6.076a.75.75 0 01-.096-1.056zM8.25 10.5a.75.75 0 000 1.5h3a.75.75 0 000-1.5h-3z"></path><path fill-rule="evenodd" d="M0 3.25A2.25 2.25 0 012.25 1h11.5A2.25 2.25 0 0116 3.25v9.5A2.25 2.25 0 0113.75 15H2.25A2.25 2.25 0 010 12.75v-9.5zm2.25-.75a.75.75 0 00-.75.75v9.5c0 .414.336.75.75.75h11.5a.75.75 0 00.75-.75v-9.5a.75.75 0 00-.75-.75H2.25z" clip-rule="evenodd"></path></g></svg></span><span class="text_root__WdIWm hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__rL_Fw">Terraform CLI</span></div></div></a></li><li><a class="dropdown-menu_itemLink__VpbEz g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" href="/hashicorp-terraform/terraform/cloud-docs"><div class="dropdown-menu_itemLinkContent__DF_Kb"><div class="dropdown-menu_leftAlignedItemLinkContent__DNVQb"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__HoaSb primary-nav-submenu_primarySubnavDropdownItemIcon__ESjFj terraform"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.932 2.373a6.041 6.041 0 016.239 1.28 5.998 5.998 0 011.505 2.284h.28c1.071 0 2.1.424 2.858 1.18a4.025 4.025 0 010 5.703A4.051 4.051 0 0111.955 14H6.026a6.037 6.037 0 01-3.186-.906 6.008 6.008 0 01-2.223-2.448 5.982 5.982 0 01.644-6.32 6.02 6.02 0 012.67-1.953zm.526 1.405a4.52 4.52 0 00-2.013 1.47 4.488 4.488 0 001.186 6.572c.716.444 1.542.68 2.386.68h5.938c.676 0 1.324-.268 1.8-.742a2.524 2.524 0 000-3.578 2.551 2.551 0 00-1.8-.743h-.83a.75.75 0 01-.726-.561A4.496 4.496 0 009.14 4.74a4.541 4.541 0 00-4.681-.963z" clip-rule="evenodd"></path></svg></span><span class="text_root__WdIWm hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__rL_Fw">Terraform Cloud</span></div></div></a></li><li><a class="dropdown-menu_itemLink__VpbEz g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" href="/hashicorp-terraform/terraform/enterprise"><div class="dropdown-menu_itemLinkContent__DF_Kb"><div class="dropdown-menu_leftAlignedItemLinkContent__DNVQb"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__HoaSb primary-nav-submenu_primarySubnavDropdownItemIcon__ESjFj terraform"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path fill-rule="evenodd" d="M1 3.25A2.25 2.25 0 013.25 1h6.5A2.25 2.25 0 0112 3.25v2.112l2.05 1.453A2.25 2.25 0 0115 8.65v5.1c0 .69-.56 1.25-1.25 1.25h-2.5a.748.748 0 01-.75-.751v-11a.75.75 0 00-.75-.75h-6.5a.75.75 0 00-.75.75v11a.75.75 0 01-1.5 0v-11zM12 13.5V7.2l1.184.839a.75.75 0 01.316.612v4.85H12z" clip-rule="evenodd"></path><path d="M4.75 10.55a.7.7 0 00-.7.7v3a.7.7 0 101.4 0v-2.3h2.1v2.3a.7.7 0 101.4 0v-3a.7.7 0 00-.7-.7h-3.5zM4.25 4.75A.75.75 0 015 4h.25a.75.75 0 010 1.5H5a.75.75 0 01-.75-.75zM7.75 4a.75.75 0 000 1.5H8A.75.75 0 008 4h-.25zM4.25 6.75A.75.75 0 015 6h.25a.75.75 0 010 1.5H5a.75.75 0 01-.75-.75zM7.75 6a.75.75 0 000 1.5H8A.75.75 0 008 6h-.25zM4.25 8.75A.75.75 0 015 8h.25a.75.75 0 010 1.5H5a.75.75 0 01-.75-.75zM7.75 8a.75.75 0 000 1.5H8A.75.75 0 008 8h-.25z"></path></g></svg></span><span class="text_root__WdIWm hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__rL_Fw">Terraform Enterprise</span></div></div></a></li><li><a class="dropdown-menu_itemLink__VpbEz g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" href="/hashicorp-terraform/terraform/cdktf"><div class="dropdown-menu_itemLinkContent__DF_Kb"><div class="dropdown-menu_leftAlignedItemLinkContent__DNVQb"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__HoaSb primary-nav-submenu_primarySubnavDropdownItemIcon__ESjFj terraform"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9.424 2.02a.75.75 0 00-.904.556l-2.5 10.5a.75.75 0 001.46.348l2.5-10.5a.75.75 0 00-.556-.904zM11.2 4.24a.75.75 0 011.06-.04l3.5 3.25a.75.75 0 010 1.1l-3.5 3.25a.75.75 0 11-1.02-1.1L14.148 8 11.24 5.3a.75.75 0 01-.04-1.06zM4.76 5.3a.75.75 0 00-1.02-1.1L.24 7.45a.75.75 0 000 1.1l3.5 3.25a.75.75 0 101.02-1.1L1.852 8 4.76 5.3z"></path></g></svg></span><span class="text_root__WdIWm hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__rL_Fw">CDK for Terraform</span></div></div></a></li><li><a class="dropdown-menu_itemLink__VpbEz g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" href="/hashicorp-terraform/terraform/language/providers"><div class="dropdown-menu_itemLinkContent__DF_Kb"><div class="dropdown-menu_leftAlignedItemLinkContent__DNVQb"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__HoaSb primary-nav-submenu_primarySubnavDropdownItemIcon__ESjFj terraform"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M8 0a8 8 0 100 16A8 8 0 008 0zm-.5 1.519a6.464 6.464 0 00-2 .48V5.19l2-1.09V1.518zM1.532 7.356A6.491 6.491 0 014 2.876V6.01L1.532 7.356zm.05 1.68L4 7.719v5.406a6.495 6.495 0 01-2.418-4.087zM7.5 11.423l-2 1.143V6.9l2-1.091v5.613zm1.5-.857V4.991L11 3.9v5.522l-2 1.143zm2 .585l-2 1.143v2.13a6.456 6.456 0 002-.655V11.15zm1.5 1.54v-2.397l1.887-1.079A6.488 6.488 0 0112.5 12.69zm0-4.125V3.31a6.482 6.482 0 011.976 4.126L12.5 8.565zm-5 4.585l-1.697.97a6.47 6.47 0 001.697.361V13.15zM9 3.282V1.576a6.455 6.455 0 011.961.636L9 3.282z" clip-rule="evenodd"></path></svg></span><span class="text_root__WdIWm hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__rL_Fw">Provider Use</span></div></div></a></li><li><a class="dropdown-menu_itemLink__VpbEz g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" href="/hashicorp-terraform/terraform/plugin"><div class="dropdown-menu_itemLinkContent__DF_Kb"><div class="dropdown-menu_leftAlignedItemLinkContent__DNVQb"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__HoaSb primary-nav-submenu_primarySubnavDropdownItemIcon__ESjFj terraform"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M10.973 1.506a18.525 18.525 0 00-.497-.006A4.024 4.024 0 006.45 5.524c0 .43.095.865.199 1.205.054.18.116.356.192.527v.002a.75.75 0 01-.15.848l-4.937 4.911a.871.871 0 000 1.229.869.869 0 001.227 0L7.896 9.31a.75.75 0 01.847-.151c.17.079.35.139.529.193.34.103.774.198 1.204.198A4.024 4.024 0 0014.5 5.524c0-.177-.002-.338-.006-.483-.208.25-.438.517-.675.774-.32.345-.677.696-1.048.964-.354.257-.82.512-1.339.512-.396 0-.776-.156-1.059-.433L9.142 5.627a1.513 1.513 0 01-.432-1.06c0-.52.256-.985.514-1.34.27-.37.623-.727.97-1.046.258-.237.529-.466.78-.675zm-2.36 9.209l-4.57 4.59a2.37 2.37 0 01-3.35-3.348l.002-.001 4.591-4.568a6.887 6.887 0 01-.072-.223 5.77 5.77 0 01-.263-1.64A5.524 5.524 0 0110.476 0 12 12 0 0112 .076c.331.044.64.115.873.264a.92.92 0 01.374.45.843.843 0 01-.013.625.922.922 0 01-.241.332c-.26.257-.547.487-.829.72-.315.26-.647.535-.957.82a5.947 5.947 0 00-.771.824c-.197.27-.227.415-.227.457 0 .003 0 .006.003.008l1.211 1.211a.013.013 0 00.008.004c.043 0 .19-.032.46-.227.253-.183.532-.45.826-.767.284-.308.56-.638.82-.95.233-.28.463-.565.72-.823a.925.925 0 01.31-.235.841.841 0 01.628-.033.911.911 0 01.467.376c.15.233.22.543.262.87.047.356.075.847.075 1.522a5.524 5.524 0 01-5.524 5.525c-.631 0-1.221-.136-1.64-.263a6.969 6.969 0 01-.222-.071z" clip-rule="evenodd"></path></svg></span><span class="text_root__WdIWm hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__rL_Fw">Plugin Development</span></div></div></a></li><li><a class="dropdown-menu_itemLink__VpbEz g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" href="/hashicorp-terraform/terraform/registry"><div class="dropdown-menu_itemLinkContent__DF_Kb"><div class="dropdown-menu_leftAlignedItemLinkContent__DNVQb"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__HoaSb primary-nav-submenu_primarySubnavDropdownItemIcon__ESjFj terraform"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M7.75 4a.75.75 0 01.75.75V7h2.25a.75.75 0 010 1.5H8.5v2.25a.75.75 0 01-1.5 0V8.5H4.75a.75.75 0 010-1.5H7V4.75A.75.75 0 017.75 4z"></path><path fill-rule="evenodd" d="M0 7.75a7.75 7.75 0 1115.5 0 7.75 7.75 0 01-15.5 0zM7.75 1.5a6.25 6.25 0 100 12.5 6.25 6.25 0 000-12.5z" clip-rule="evenodd"></path></g></svg></span><span class="text_root__WdIWm hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__rL_Fw">Registry Publishing</span></div></div></a></li><li><a class="dropdown-menu_itemLink__VpbEz g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" href="/hashicorp-terraform/terraform/docs/partnerships"><div class="dropdown-menu_itemLinkContent__DF_Kb"><div class="dropdown-menu_leftAlignedItemLinkContent__DNVQb"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__HoaSb primary-nav-submenu_primarySubnavDropdownItemIcon__ESjFj terraform"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path fill-rule="evenodd" d="M5 2.75a.75.75 0 00-.53.22l-.78.78H.75a.75.75 0 000 1.5H2v5a.75.75 0 01-.75.75h-.5a.75.75 0 000 1.5h.5a2.25 2.25 0 002.016-1.25h.557l3.063 1.531a2.25 2.25 0 002.254-.14l2.087-1.391h1.507a2.25 2.25 0 002.016 1.25h.5a.75.75 0 000-1.5h-.5a.75.75 0 01-.75-.75v-5h1.25a.75.75 0 000-1.5h-2.94l-.78-.78a.75.75 0 00-.53-.22H5zm-1 2.5h-.5v4.5H4a.75.75 0 01.335.08l3.222 1.61a.75.75 0 00.751-.047l1.652-1.101-.584-.876a.75.75 0 011.248-.832l.777 1.166H12.5v-4.5H12a.75.75 0 01-.53-.22l-.78-.78H8.81L7.065 5.997a.711.711 0 00.971 1.038l.971-.85a.75.75 0 11.988 1.13l-.971.85a2.211 2.211 0 01-3.02-3.229l.686-.686H5.311l-.78.78A.75.75 0 014 5.25z" clip-rule="evenodd"></path><path d="M1.25 9.625a.625.625 0 11-1.25 0 .625.625 0 011.25 0zM16 9.625a.625.625 0 11-1.25 0 .625.625 0 011.25 0z"></path></g></svg></span><span class="text_root__WdIWm hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__rL_Fw">Integration Program</span></div></div></a></li></ul></div></div></li><li><a aria-label="Terraform Registry" class="primary-nav-link_root__5e0jF g-focus-ring-from-box-shadow-dark" data-heap-track="navigation-header-primary-nav-link" aria-describedby="undefinedopens-in-new-tab-label-react-aria-26" target="_blank" href="https://registry.terraform.io/"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__zsIfa">Registry</span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-26">(opens in new tab)</span></li><li><a aria-label="Terraform Try Cloud" class="primary-nav-link_root__5e0jF g-focus-ring-from-box-shadow-dark" data-heap-track="navigation-header-primary-nav-link" aria-describedby="undefinedopens-in-new-tab-label-react-aria-27" target="_blank" href="https://app.terraform.io/public/signup/account"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__zsIfa">Try Cloud</span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-27">(opens in new tab)</span></li></ul></nav></div></div><div class="navigation-header_rightSide__VIrVO"><button aria-label="Search" class="command-bar-activator_root__DsgCL g-focus-ring-from-box-shadow-dark"><span class="command-bar-activator_left__BhdH4"><span class="command-bar-activator_leadingIcon__eFqV7"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M7.25 2a5.25 5.25 0 103.144 9.455l2.326 2.325a.75.75 0 101.06-1.06l-2.325-2.326A5.25 5.25 0 007.25 2zM3.5 7.25a3.75 3.75 0 117.5 0 3.75 3.75 0 01-7.5 0z" clip-rule="evenodd"></path></svg></span><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular command-bar-activator_text__2TtkO">Search</span></span><span class="command-bar-activator_right__Uai8J"><span class="g-screen-reader-only">Command or control key</span><span aria-hidden="true" class="badge_root__LCJF3 badge_small__gwcZy badge_filled-neutral-dark-mode__mds6M command-bar-activator_keyBadge__Io5xa"><div class="cmd-ctrl-icon_root__5ZSUu"><svg width="41" height="11" viewBox="0 0 41 11" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.125 2.063V3h2.25v-.938a2.062 2.062 0 112.063 2.063H7.5v2.25h.938a2.062 2.062 0 11-2.063 2.063V7.5h-2.25v.938a2.062 2.062 0 11-2.063-2.063H3v-2.25h-.938a2.062 2.062 0 112.063-2.063zm-2.063-.938a.937.937 0 100 1.875H3v-.938a.937.937 0 00-.938-.937zM7.5 7.5v.938a.937.937 0 10.938-.938H7.5zM6.375 6.375v-2.25h-2.25v2.25h2.25zM2.062 7.5H3v.938a.937.937 0 11-.938-.938zM7.5 3h.938a.937.937 0 10-.938-.938V3z" fill="#fff"/><path d="M15.09 10.5L18.085 0h-1.097L14 10.5h1.09zm11.297-5.192c-.183-1.445-1.263-2.534-3.05-2.534C21.264 2.774 20 4.247 20 6.61c0 2.41 1.27 3.89 3.344 3.89 1.76 0 2.86-1.034 3.043-2.5H25.02c-.184.808-.792 1.247-1.682 1.247-1.172 0-1.898-.994-1.898-2.637 0-1.61.72-2.583 1.898-2.583.942 0 1.518.555 1.681 1.281h1.368zM28.6 1.041v1.897h-1.133v1.178H28.6v4.281c0 1.432.622 2.007 2.186 2.007.275 0 .537-.034.766-.075V9.158c-.196.02-.32.034-.537.034-.7 0-1.008-.35-1.008-1.15V4.115h1.545V2.938h-1.545V1.041H28.6zm4.607 9.315h1.407V5.911c0-1.048.752-1.767 1.819-1.767.249 0 .667.048.785.082V2.842a3.372 3.372 0 00-.628-.054c-.93 0-1.721.527-1.924 1.26h-.105v-1.13h-1.354v7.438zm5.431 0h1.407V0h-1.407v10.356z" fill="#fff"/></svg></div></span><span class="g-screen-reader-only">K key</span><span aria-hidden="true" class="badge_root__LCJF3 badge_small__gwcZy badge_filled-neutral-dark-mode__mds6M command-bar-activator_keyBadge__Io5xa"><div class="k-icon_root__ac61X"><svg width="8" height="10" viewBox="0 0 8 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.512 9.84v-3l.986-1.147L5.445 9.84h1.704L3.46 4.745 6.857.84H5.244L1.61 5.094h-.098V.84H.15v9h1.363z" fill="#fff"/></svg></div></span></span></button><div class="navigation-header_authenticationControls__wYhHm"><div class="disclosure_root__AAinH dropdown-disclosure_root__KM3_y dropdown-disclosure_list-position--right__KzHJE"><button aria-controls="disclosure-react-aria-28-content" aria-expanded="false" aria-label="User menu" class="disclosure_activator__jqkij activator_root__cU8vM dropdown-disclosure_activator__Dk5J_ navigation-header_userDropdownDisclosureActivator__9VIsG g-focus-ring-from-box-shadow-dark activator_hasIcon__qoG5l g-focus-ring-from-box-shadow"><span class="activator_childrenWrapper__KnFKW"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-hidden="true"><g fill="currentColor"><path fill-rule="evenodd" d="M12 3a5 5 0 100 10 5 5 0 000-10zM8.5 8a3.5 3.5 0 117 0 3.5 3.5 0 01-7 0z" clip-rule="evenodd"></path><path d="M7.75 14.5A4.75 4.75 0 003 19.25v1a.75.75 0 001.5 0v-1A3.25 3.25 0 017.75 16h8.5a3.25 3.25 0 013.25 3.25v1a.75.75 0 001.5 0v-1a4.75 4.75 0 00-4.75-4.75h-8.5z"></path></g></svg></span><span class="activator_chevronWrapper__6hV29"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></span></button><div class="disclosure_contentContainer__77KIY dropdown-disclosure_content__GVRd1 undefined" id="disclosure-react-aria-28-content"><ul class="dropdown-disclosure_list__wyx6a"><li class="list-item_root__HMbDW"><button class="list-item_button__WHsV6 g-focus-ring-from-box-shadow"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-medium">Sign in</span></button></li><li class="list-item_root__HMbDW"><a class="list-item_link__HfxcT g-focus-ring-from-box-shadow" href="/hashicorp-terraform/sign-up"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-medium">Sign up</span></a></li><li class="list-item_root__HMbDW"><hr class="list-item_separator__frucY"/></li><li class="list-item_root__HMbDW user-dropdown-switcher_listItem__fwBD7 hds-font-weight-medium"><label class="theme-switcher_label__bs8JE hds-typography-body-200" for="react-aria-30">Theme</label></li></ul></div></div></div><button aria-label="Open navigation menu" class="navigation-header_mobileMenuButton__BDLU4"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-hidden="true"><g fill="currentColor"><path d="M2 5.75A.75.75 0 012.75 5h18.5a.75.75 0 010 1.5H2.75A.75.75 0 012 5.75zM2 11.75a.75.75 0 01.75-.75h18.5a.75.75 0 010 1.5H2.75a.75.75 0 01-.75-.75zM2.75 17a.75.75 0 000 1.5h18.5a.75.75 0 000-1.5H2.75z"></path></g></svg></button></div></header></div><div class="base-new-layout_contentArea__y630n"><div class="sidebar-sidecar-layout_root__8s1Nl sidebar-sidecar-layout_mainWidth-narrow__Hzi8F"><div class="mobile-menu-container_root__2_51o sidebar-sidecar-layout_sidebarContainer__DVNhA"><div class="sidebar-sidecar-layout_sidebarContentWrapper__Q5ntu"><div class="sidebar_sidebar__eQGRJ"><div class="sidebar_backToLinkWrapper__zbqbb"><div class="sidebar-back-to-link_root__37rRr"><a class="standalone-link_standaloneLink__BqSgp g-focus-ring-from-box-shadow standalone-link_primary__dy62o" data-heap-track="standalone-link sidebar-back-to-link" href="/hashicorp-terraform/terraform"><div class="standalone-link_standaloneLinkContents__ch8c6 standalone-link_medium__DU9ke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M10.795 3.235a.75.75 0 01-.03 1.06L6.842 8l3.923 3.705a.75.75 0 01-1.03 1.09l-4.5-4.25a.75.75 0 010-1.09l4.5-4.25a.75.75 0 011.06.03z" clip-rule="evenodd"></path></svg><span class="standalone-link_text__mzzHK">Terraform Home</span></div></a></div></div><div class="sidebar_filterInputWrapper__owoEI"><div class="filter-input_filterInputContainer__m9s0j"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="filter-input_filterIcon__8CzS6 filter-input_sharedIconColorAndPositioning__8WKNV"><g fill="currentColor"><path d="M1 3.75A.75.75 0 011.75 3h12.5a.75.75 0 010 1.5H1.75A.75.75 0 011 3.75zM3.5 7.75A.75.75 0 014.25 7h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM6.75 11a.75.75 0 000 1.5h2.5a.75.75 0 000-1.5h-2.5z"></path></g></svg><input class="filter-input_filterInput__Qktl7 g-focus-ring-from-box-shadow" placeholder="Filter sidebar" autoComplete="off" autoCorrect="off" autoCapitalize="none" spellcheck="false" value=""/></div></div><nav aria-labelledby="sidebar-label" class="sidebar_nav__EFmKd" id="sidebar-nav"><div class="g-screen-reader-only"><h2 class="sidebar-headings_root__7EIuF" id="sidebar-label">Configuration Language</h2></div><a class="skip-to-main-content_root__KEA0_ g-focus-border-and-box-shadow-light" href="#main">Skip to main content</a><ul class="sidebar_navList__Je2sN"><li><a class="sidebar-nav-highlight-item_root__s8AOR g-focus-ring-from-box-shadow sidebar-nav-highlight-item_theme-terraform__c7PI4" href="/hashicorp-terraform/terraform/language"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="var(--token-color-terraform-brand)"><path d="M1 0v5.05l4.349 2.527V2.526L1 0zM10.175 5.344l-4.35-2.525v5.05l4.35 2.527V5.344zM10.651 10.396V5.344L15 2.819v5.05l-4.349 2.527zM10.174 16l-4.349-2.526v-5.05l4.349 2.525V16z"></path></g></svg><span class="sidebar-nav-highlight-item_text__20W05 hds-typography-body-200">Configuration Language</span></a></li><li id="sidebar-nav-item-2"><button aria-controls="sidebar-nav-item-2-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" id="sidebar-nav-item-2-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">Files and Directories</span><div class="sidebar-nav-menu-item_rightIconsContainer__FBm4_"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M5.205 3.235a.75.75 0 00.03 1.06L9.158 8l-3.923 3.705a.75.75 0 001.03 1.09l4.5-4.25a.75.75 0 000-1.09l-4.5-4.25a.75.75 0 00-1.06.03z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-6"><button aria-controls="sidebar-nav-item-6-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" id="sidebar-nav-item-6-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">Syntax</span><div class="sidebar-nav-menu-item_rightIconsContainer__FBm4_"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M5.205 3.235a.75.75 0 00.03 1.06L9.158 8l-3.923 3.705a.75.75 0 001.03 1.09l4.5-4.25a.75.75 0 000-1.09l-4.5-4.25a.75.75 0 00-1.06.03z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-11"><button aria-controls="sidebar-nav-item-11-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" id="sidebar-nav-item-11-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">Resources</span><div class="sidebar-nav-menu-item_rightIconsContainer__FBm4_"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M5.205 3.235a.75.75 0 00.03 1.06L9.158 8l-3.923 3.705a.75.75 0 001.03 1.09l4.5-4.25a.75.75 0 000-1.09l-4.5-4.25a.75.75 0 00-1.06.03z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-29"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" href="/hashicorp-terraform/terraform/language/data-sources"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">Data Sources</span></a></li><li id="sidebar-nav-item-30"><button aria-controls="sidebar-nav-item-30-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" id="sidebar-nav-item-30-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">Providers</span><div class="sidebar-nav-menu-item_rightIconsContainer__FBm4_"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M5.205 3.235a.75.75 0 00.03 1.06L9.158 8l-3.923 3.705a.75.75 0 001.03 1.09l4.5-4.25a.75.75 0 000-1.09l-4.5-4.25a.75.75 0 00-1.06.03z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-35"><button aria-controls="sidebar-nav-item-35-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" id="sidebar-nav-item-35-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">Variables and Outputs</span><div class="sidebar-nav-menu-item_rightIconsContainer__FBm4_"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M5.205 3.235a.75.75 0 00.03 1.06L9.158 8l-3.923 3.705a.75.75 0 001.03 1.09l4.5-4.25a.75.75 0 000-1.09l-4.5-4.25a.75.75 0 00-1.06.03z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-40"><button aria-controls="sidebar-nav-item-40-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" id="sidebar-nav-item-40-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">Modules</span><div class="sidebar-nav-menu-item_rightIconsContainer__FBm4_"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M5.205 3.235a.75.75 0 00.03 1.06L9.158 8l-3.923 3.705a.75.75 0 001.03 1.09l4.5-4.25a.75.75 0 000-1.09l-4.5-4.25a.75.75 0 00-1.06.03z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-56"><button aria-controls="sidebar-nav-item-56-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" id="sidebar-nav-item-56-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">Expressions</span><div class="sidebar-nav-menu-item_rightIconsContainer__FBm4_"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M5.205 3.235a.75.75 0 00.03 1.06L9.158 8l-3.923 3.705a.75.75 0 001.03 1.09l4.5-4.25a.75.75 0 000-1.09l-4.5-4.25a.75.75 0 00-1.06.03z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-70"><button aria-controls="sidebar-nav-item-70-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" id="sidebar-nav-item-70-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">Functions</span><div class="sidebar-nav-menu-item_rightIconsContainer__FBm4_"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M5.205 3.235a.75.75 0 00.03 1.06L9.158 8l-3.923 3.705a.75.75 0 001.03 1.09l4.5-4.25a.75.75 0 000-1.09l-4.5-4.25a.75.75 0 00-1.06.03z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-199"><button aria-controls="sidebar-nav-item-199-list" aria-expanded="true" class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" id="sidebar-nav-item-199-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">Terraform Settings</span><div class="sidebar-nav-menu-item_rightIconsContainer__FBm4_"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M5.205 3.235a.75.75 0 00.03 1.06L9.158 8l-3.923 3.705a.75.75 0 001.03 1.09l4.5-4.25a.75.75 0 000-1.09l-4.5-4.25a.75.75 0 00-1.06.03z" clip-rule="evenodd"></path></svg></div></button><ul id="sidebar-nav-item-199-list"><li id="sidebar-nav-item-200"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" href="/hashicorp-terraform/terraform/language/settings"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">Overview</span></a></li><li id="sidebar-nav-item-201"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" href="/hashicorp-terraform/terraform/language/settings/terraform-cloud"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">Terraform Cloud</span></a></li><li id="sidebar-nav-item-202"><button aria-controls="sidebar-nav-item-202-list" aria-expanded="true" class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" id="sidebar-nav-item-202-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">Backends</span><div class="sidebar-nav-menu-item_rightIconsContainer__FBm4_"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M5.205 3.235a.75.75 0 00.03 1.06L9.158 8l-3.923 3.705a.75.75 0 001.03 1.09l4.5-4.25a.75.75 0 000-1.09l-4.5-4.25a.75.75 0 00-1.06.03z" clip-rule="evenodd"></path></svg></div></button><ul id="sidebar-nav-item-202-list"><li id="sidebar-nav-item-203"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" href="/hashicorp-terraform/terraform/language/settings/backends/configuration"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">Backend Configuration</span></a></li><li id="sidebar-nav-item-204"><button aria-controls="sidebar-nav-item-204-list" aria-expanded="true" class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" id="sidebar-nav-item-204-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">Available Backends</span><div class="sidebar-nav-menu-item_rightIconsContainer__FBm4_"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M5.205 3.235a.75.75 0 00.03 1.06L9.158 8l-3.923 3.705a.75.75 0 001.03 1.09l4.5-4.25a.75.75 0 000-1.09l-4.5-4.25a.75.75 0 00-1.06.03z" clip-rule="evenodd"></path></svg></div></button><ul id="sidebar-nav-item-204-list"><li id="sidebar-nav-item-205"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" href="/hashicorp-terraform/terraform/language/settings/backends/local"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">local</span></a></li><li id="sidebar-nav-item-206"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" href="/hashicorp-terraform/terraform/language/settings/backends/remote"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">remote</span></a></li><li id="sidebar-nav-item-207"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" href="/hashicorp-terraform/terraform/language/settings/backends/azurerm"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">azurerm</span></a></li><li id="sidebar-nav-item-208"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" href="/hashicorp-terraform/terraform/language/settings/backends/consul"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">consul</span></a></li><li id="sidebar-nav-item-209"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" href="/hashicorp-terraform/terraform/language/settings/backends/cos"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">cos</span></a></li><li id="sidebar-nav-item-210"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" href="/hashicorp-terraform/terraform/language/settings/backends/gcs"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">gcs</span></a></li><li id="sidebar-nav-item-211"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" href="/hashicorp-terraform/terraform/language/settings/backends/http"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">http</span></a></li><li id="sidebar-nav-item-212"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" href="/hashicorp-terraform/terraform/language/settings/backends/kubernetes"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">Kubernetes</span></a></li><li id="sidebar-nav-item-213"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" href="/hashicorp-terraform/terraform/language/settings/backends/oss"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">oss</span></a></li><li id="sidebar-nav-item-214"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" href="/hashicorp-terraform/terraform/language/settings/backends/pg"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">pg</span></a></li><li id="sidebar-nav-item-215"><a aria-current="page" class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" href="/hashicorp-terraform/terraform/language/settings/backends/s3"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">s3</span></a></li></ul></li></ul></li></ul></li><li id="sidebar-nav-item-216"><button aria-controls="sidebar-nav-item-216-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" id="sidebar-nav-item-216-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">State</span><div class="sidebar-nav-menu-item_rightIconsContainer__FBm4_"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M5.205 3.235a.75.75 0 00.03 1.06L9.158 8l-3.923 3.705a.75.75 0 001.03 1.09l4.5-4.25a.75.75 0 000-1.09l-4.5-4.25a.75.75 0 00-1.06.03z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-226"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" href="/hashicorp-terraform/terraform/language/upgrade-guides"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">Upgrading to Terraform v1.4</span></a></li><li id="sidebar-nav-item-227"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" href="/hashicorp-terraform/terraform/language/v1-compatibility-promises"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">v1.x Compatibility Promises</span></a></li><li id="sidebar-nav-item-228"><hr class="sidebar-horizontal-rule_root__e5nM5"/></li><li id="sidebar-nav-item-229"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" href="/hashicorp-terraform/terraform/internals"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">Terraform Internals</span></a></li></ul><hr class="sidebar-horizontal-rule_root__e5nM5"/><ul class="sidebar_navList__Je2sN"><li><h3 class="sidebar-headings_root__7EIuF">Resources</h3></li><li><a class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" href="/hashicorp-terraform/tutorials/library?product=terraform"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">Tutorial Library</span></a></li><li><a class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" href="/hashicorp-terraform/certifications/infrastructure-automation"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">Certifications</span></a></li><li><a aria-label="Community Forum. Opens in a new tab." class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" rel="noreferrer noopener" aria-describedby="undefinedopens-in-new-tab-label-react-aria-53" target="_blank" href="https://discuss.hashicorp.com/c/terraform-core/27"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">Community Forum</span><div class="sidebar-nav-menu-item_rightIconsContainer__FBm4_"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></div></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-53">(opens in new tab)</span></li><li><a aria-label="Support. Opens in a new tab." class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" rel="noreferrer noopener" aria-describedby="undefinedopens-in-new-tab-label-react-aria-54" target="_blank" href="https://www.hashicorp.com/customer-success"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">Support</span><div class="sidebar-nav-menu-item_rightIconsContainer__FBm4_"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></div></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-54">(opens in new tab)</span></li><li><a aria-label="GitHub. Opens in a new tab." class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" rel="noreferrer noopener" aria-describedby="undefinedopens-in-new-tab-label-react-aria-55" target="_blank" href="https://github.com/hashicorp/terraform"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">GitHub</span><div class="sidebar-nav-menu-item_rightIconsContainer__FBm4_"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></div></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-55">(opens in new tab)</span></li><li><a aria-label="Terraform Registry. Opens in a new tab." class="sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" rel="noreferrer noopener" aria-describedby="undefinedopens-in-new-tab-label-react-aria-56" target="_blank" href="https://registry.terraform.io/"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__EY1_n">Terraform Registry</span><div class="sidebar-nav-menu-item_rightIconsContainer__FBm4_"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></div></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-56">(opens in new tab)</span></li></ul></nav></div></div></div><div class="sidebar-sidecar-layout_contentWrapper__FtPII"><div class="sidebar-sidecar-layout_paddedAreaWrapper__95V0T"><div class="sidebar-sidecar-layout_breadcrumbContainer__7Yczs"><div class="sidebar-sidecar-layout_breadcrumbMaxWidth__vWUZe"><nav aria-label="Breadcrumb" class="breadcrumb-bar_root__Z5aTO"><ol class="breadcrumb-bar_listRoot__U6We_"><li class="text_root__WdIWm hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__Ew2MO"><a class="breadcrumb-bar_breadcrumbText__ftu3n g-focus-ring-from-box-shadow" data-heap-track="breadcrumb-bar-item" href="/hashicorp-terraform">Developer</a></li><li class="text_root__WdIWm hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__Ew2MO"><a class="breadcrumb-bar_breadcrumbText__ftu3n g-focus-ring-from-box-shadow" data-heap-track="breadcrumb-bar-item" href="/hashicorp-terraform/terraform">Terraform</a></li><li class="text_root__WdIWm hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__Ew2MO"><a class="breadcrumb-bar_breadcrumbText__ftu3n g-focus-ring-from-box-shadow" data-heap-track="breadcrumb-bar-item" href="/hashicorp-terraform/terraform/language">Configuration Language</a></li><li class="text_root__WdIWm hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__Ew2MO"><a class="breadcrumb-bar_breadcrumbText__ftu3n g-focus-ring-from-box-shadow" data-heap-track="breadcrumb-bar-item" href="/hashicorp-terraform/terraform/language/settings">Terraform Settings</a></li><li class="text_root__WdIWm hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__Ew2MO"><span class="breadcrumb-bar_breadcrumbText__ftu3n g-focus-ring-from-box-shadow" data-heap-track="breadcrumb-bar-item">Backends</span></li><li class="text_root__WdIWm hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__Ew2MO"><span class="breadcrumb-bar_breadcrumbText__ftu3n g-focus-ring-from-box-shadow" data-heap-track="breadcrumb-bar-item">s3</span></li></ol></nav></div></div><div class="sidebar-sidecar-layout_mainAndSidecar__x_g3M"><main id="main" class="sidebar-sidecar-layout_main__S864v"><div class="docs-page-heading_root__KF7HQ docs-view_docsPageHeading__dsi4l"><div class="docs-page-heading_pageHeadingWrapper__9WAOg"><h1 class="hds-typography-display-600 hds-font-weight-bold docs-plain-page-heading_root__mXuB8 g-offset-scroll-margin-top" id="s3">S3</h1></div></div><div class="dev-dot-content_root__PM7Rc hds-typography-body-300"><div class="docs-view_mdxContent__z6wpI"><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Stores the state as a given key in a given bucket on
<a class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular" href="https://aws.amazon.com/s3/">Amazon S3</a>.
This backend also supports state locking and consistency checking via
<a class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular" href="https://aws.amazon.com/dynamodb/">Dynamo DB</a>, which can be enabled by setting
the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">dynamodb_table</code> field to an existing DynamoDB table name.
A single DynamoDB table can be used to lock multiple remote state files. Terraform generates key names that include the values of the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">bucket</code> and <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">key</code> variables.</p><div class="alert alert-warning g-type-body"><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ"><strong>Warning!</strong> It is highly recommended that you enable
<a class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/manage-versioning-examples.html">Bucket Versioning</a>
on the S3 bucket to allow for state recovery in the case of accidental deletions and human error.</p></div><h2 id="example-configuration" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__T_KWX g-offset-scroll-margin-top mdx-headings_h2__8mhgN"><a class="mdx-heading-permalink_root__rMneC g-focus-ring-from-box-shadow mdx-heading-permalink_h2___xzUm" aria-label="example configuration permalink" href="/hashicorp-terraform/terraform/language/settings/backends/s3#example-configuration"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__wRuQa"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Example Configuration</h2><div class="g-code-block style_root__rglDp language-hcl mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-hcl mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-hcl mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token keyword">terraform</span> <span class="token punctuation">{</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  <span class="token keyword">backend<span class="token type variable"> &quot;s3&quot; </span></span><span class="token punctuation">{</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token property">bucket</span> <span class="token punctuation">=</span> <span class="token string">&quot;mybucket&quot;</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token property">key</span>    <span class="token punctuation">=</span> <span class="token string">&quot;path/to/my/key&quot;</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token property">region</span> <span class="token punctuation">=</span> <span class="token string">&quot;us-east-1&quot;</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  <span class="token punctuation">}</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token punctuation">}</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__H7t5c"><button class="style_button__pIRtg" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__85MLW"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">This assumes we have a bucket created called <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">mybucket</code>. The
Terraform state is written to the key <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">path/to/my/key</code>.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Note that for the access credentials we recommend using a
<a class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular" href="/hashicorp-terraform/terraform/language/settings/backends/configuration#partial-configuration">partial configuration</a>.</p><h3 id="s3-bucket-permissions" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__T_KWX g-offset-scroll-margin-top mdx-headings_h3__ST7wF"><a class="mdx-heading-permalink_root__rMneC g-focus-ring-from-box-shadow mdx-heading-permalink_h3__6xxpA" aria-label="s3 bucket permissions permalink" href="/hashicorp-terraform/terraform/language/settings/backends/s3#s3-bucket-permissions"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__wRuQa"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>S3 Bucket Permissions</h3><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Terraform will need the following AWS IAM permissions on
the target backend bucket:</p><ul class="mdx-lists_listRoot__zHI9u"><li class="mdx-lists_listItem__2Palk"><a id="s3-listbucket" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="s3 listbucket permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#s3-listbucket"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">s3:ListBucket</code></a> on <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">arn:aws:s3:::mybucket</code></li><li class="mdx-lists_listItem__2Palk"><a id="s3-getobject" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="s3 getobject permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#s3-getobject"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">s3:GetObject</code></a> on <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">arn:aws:s3:::mybucket/path/to/my/key</code></li><li class="mdx-lists_listItem__2Palk"><a id="s3-putobject" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="s3 putobject permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#s3-putobject"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">s3:PutObject</code></a> on <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">arn:aws:s3:::mybucket/path/to/my/key</code></li><li class="mdx-lists_listItem__2Palk"><a id="s3-deleteobject" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="s3 deleteobject permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#s3-deleteobject"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">s3:DeleteObject</code></a> on <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">arn:aws:s3:::mybucket/path/to/my/key</code></li></ul><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">This is seen in the following AWS IAM Statement:</p><div class="g-code-block style_root__rglDp language-json mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-json mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-json mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token punctuation">{</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  <span class="token property">&quot;Version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2012-10-17&quot;</span><span class="token punctuation">,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  <span class="token property">&quot;Statement&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token punctuation">{</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">      <span class="token property">&quot;Effect&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Allow&quot;</span><span class="token punctuation">,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">      <span class="token property">&quot;Action&quot;</span><span class="token operator">:</span> <span class="token string">&quot;s3:ListBucket&quot;</span><span class="token punctuation">,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">      <span class="token property">&quot;Resource&quot;</span><span class="token operator">:</span> <span class="token string">&quot;arn:aws:s3:::mybucket&quot;</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token punctuation">{</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">      <span class="token property">&quot;Effect&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Allow&quot;</span><span class="token punctuation">,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">      <span class="token property">&quot;Action&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;s3:GetObject&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;s3:PutObject&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;s3:DeleteObject&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">      <span class="token property">&quot;Resource&quot;</span><span class="token operator">:</span> <span class="token string">&quot;arn:aws:s3:::mybucket/path/to/my/key&quot;</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token punctuation">}</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  <span class="token punctuation">]</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token punctuation">}</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__H7t5c"><button class="style_button__pIRtg" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__85MLW"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><div class="alert alert-info g-type-body"><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ"><strong>Note:</strong> AWS can control access to S3 buckets with either IAM policies
attached to users/groups/roles (like the example above) or resource policies
attached to bucket objects (which look similar but also require a <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">Principal</code> to
indicate which entity has those permissions). For more details, see Amazon&#x27;s
documentation about
<a class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/s3-access-control.html">S3 access control</a>.</p></div><h3 id="dynamodb-table-permissions" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__T_KWX g-offset-scroll-margin-top mdx-headings_h3__ST7wF"><a class="mdx-heading-permalink_root__rMneC g-focus-ring-from-box-shadow mdx-heading-permalink_h3__6xxpA" aria-label="dynamodb table permissions permalink" href="/hashicorp-terraform/terraform/language/settings/backends/s3#dynamodb-table-permissions"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__wRuQa"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>DynamoDB Table Permissions</h3><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">If you are using state locking, Terraform will need the following AWS IAM
permissions on the DynamoDB table (<code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">arn:aws:dynamodb:::table/mytable</code>):</p><ul class="mdx-lists_listRoot__zHI9u"><li class="mdx-lists_listItem__2Palk"><a id="dynamodb-describetable" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="dynamodb describetable permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#dynamodb-describetable"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">dynamodb:DescribeTable</code></a></li><li class="mdx-lists_listItem__2Palk"><a id="dynamodb-getitem" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="dynamodb getitem permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#dynamodb-getitem"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">dynamodb:GetItem</code></a></li><li class="mdx-lists_listItem__2Palk"><a id="dynamodb-putitem" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="dynamodb putitem permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#dynamodb-putitem"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">dynamodb:PutItem</code></a></li><li class="mdx-lists_listItem__2Palk"><a id="dynamodb-deleteitem" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="dynamodb deleteitem permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#dynamodb-deleteitem"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">dynamodb:DeleteItem</code></a></li></ul><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">This is seen in the following AWS IAM Statement:</p><div class="g-code-block style_root__rglDp language-json mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-json mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-json mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token punctuation">{</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  <span class="token property">&quot;Version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2012-10-17&quot;</span><span class="token punctuation">,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  <span class="token property">&quot;Statement&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token punctuation">{</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">      <span class="token property">&quot;Effect&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Allow&quot;</span><span class="token punctuation">,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">      <span class="token property">&quot;Action&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">        <span class="token string">&quot;dynamodb:DescribeTable&quot;</span><span class="token punctuation">,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">        <span class="token string">&quot;dynamodb:GetItem&quot;</span><span class="token punctuation">,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">        <span class="token string">&quot;dynamodb:PutItem&quot;</span><span class="token punctuation">,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">        <span class="token string">&quot;dynamodb:DeleteItem&quot;</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">      <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">      <span class="token property">&quot;Resource&quot;</span><span class="token operator">:</span> <span class="token string">&quot;arn:aws:dynamodb:*:*:table/mytable&quot;</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token punctuation">}</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  <span class="token punctuation">]</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token punctuation">}</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__H7t5c"><button class="style_button__pIRtg" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__85MLW"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><h2 id="data-source-configuration" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__T_KWX g-offset-scroll-margin-top mdx-headings_h2__8mhgN"><a class="mdx-heading-permalink_root__rMneC g-focus-ring-from-box-shadow mdx-heading-permalink_h2___xzUm" aria-label="data source configuration permalink" href="/hashicorp-terraform/terraform/language/settings/backends/s3#data-source-configuration"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__wRuQa"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Data Source Configuration</h2><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">To make use of the S3 remote state in another configuration, use the
<a class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular" href="/hashicorp-terraform/terraform/language/state/remote-state-data"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">terraform_remote_state</code> data
source</a>.</p><div class="g-code-block style_root__rglDp language-hcl mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-hcl mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-hcl mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token keyword">data <span class="token type variable">&quot;terraform_remote_state&quot;</span></span> <span class="token string">&quot;network&quot;</span> <span class="token punctuation">{</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  <span class="token property">backend</span> <span class="token punctuation">=</span> <span class="token string">&quot;s3&quot;</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  <span class="token property">config</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token property">bucket</span> <span class="token punctuation">=</span> <span class="token string">&quot;terraform-state-prod&quot;</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token property">key</span>    <span class="token punctuation">=</span> <span class="token string">&quot;network/terraform.tfstate&quot;</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token property">region</span> <span class="token punctuation">=</span> <span class="token string">&quot;us-east-1&quot;</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  <span class="token punctuation">}</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token punctuation">}</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__H7t5c"><button class="style_button__pIRtg" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__85MLW"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">The <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">terraform_remote_state</code> data source will return all of the root module
outputs defined in the referenced remote state (but not any outputs from
nested modules unless they are explicitly output again in the root). An
example output might look like:</p><div class="g-code-block style_root__rglDp mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">data.terraform_remote_state.network:<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  id = 2016-10-29 01:57:59.780010914 +0000 UTC<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  addresses.# = 2<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  addresses.0 = 52.207.220.222<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  addresses.1 = 54.196.78.166<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  backend = s3<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  config.% = 3<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  config.bucket = terraform-state-prod<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  config.key = network/terraform.tfstate<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  config.region = us-east-1<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  elb_address = web-elb-790251200.us-east-1.elb.amazonaws.com<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  public_subnet_id = subnet-1e05dd33<!-- -->
</span></span></span></code></pre><div class="style_copyButtonContainer__H7t5c"><button class="style_button__pIRtg" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__85MLW"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><h2 id="configuration" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__T_KWX g-offset-scroll-margin-top mdx-headings_h2__8mhgN"><a class="mdx-heading-permalink_root__rMneC g-focus-ring-from-box-shadow mdx-heading-permalink_h2___xzUm" aria-label="configuration permalink" href="/hashicorp-terraform/terraform/language/settings/backends/s3#configuration"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__wRuQa"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Configuration</h2><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">This backend requires the configuration of the AWS Region and S3 state storage. Other configuration, such as enabling DynamoDB state locking, is optional.</p><h3 id="credentials-and-shared-configuration" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__T_KWX g-offset-scroll-margin-top mdx-headings_h3__ST7wF"><a class="mdx-heading-permalink_root__rMneC g-focus-ring-from-box-shadow mdx-heading-permalink_h3__6xxpA" aria-label="credentials and shared configuration permalink" href="/hashicorp-terraform/terraform/language/settings/backends/s3#credentials-and-shared-configuration"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__wRuQa"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Credentials and Shared Configuration</h3><div class="alert alert-danger g-type-body"><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ"><strong>Warning:</strong>  We recommend using environment variables to supply credentials and other sensitive data. If you use <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">-backend-config</code> or hardcode these values directly in your configuration, Terraform will include these values in both the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">.terraform</code> subdirectory and in plan files. Refer to <a class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular" href="/hashicorp-terraform/terraform/language/settings/backends/configuration#credentials-and-sensitive-data">Credentials and Sensitive Data</a> for details.</p></div><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">The following configuration is required:</p><ul class="mdx-lists_listRoot__zHI9u"><li class="mdx-lists_listItem__2Palk"><a id="region" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="region permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#region"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">region</code></a> - (Required) AWS Region of the S3 Bucket and DynamoDB Table (if used). This can also be sourced from the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">AWS_DEFAULT_REGION</code> and <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">AWS_REGION</code> environment variables.</li></ul><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">The following configuration is optional:</p><ul class="mdx-lists_listRoot__zHI9u"><li class="mdx-lists_listItem__2Palk"><a id="access_key" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="access_key permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#access_key"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">access_key</code></a> - (Optional) AWS access key. If configured, must also configure <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">secret_key</code>. This can also be sourced from the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">AWS_ACCESS_KEY_ID</code> environment variable, AWS shared credentials file (e.g. <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">~/.aws/credentials</code>), or AWS shared configuration file (e.g. <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">~/.aws/config</code>).</li><li class="mdx-lists_listItem__2Palk"><a id="secret_key" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="secret_key permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#secret_key"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">secret_key</code></a> - (Optional) AWS access key. If configured, must also configure <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">access_key</code>. This can also be sourced from the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">AWS_SECRET_ACCESS_KEY</code> environment variable, AWS shared credentials file (e.g. <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">~/.aws/credentials</code>), or AWS shared configuration file (e.g. <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">~/.aws/config</code>).</li><li class="mdx-lists_listItem__2Palk"><a id="iam_endpoint" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="iam_endpoint permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#iam_endpoint"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">iam_endpoint</code></a> - (Optional) Custom endpoint for the AWS Identity and Access Management (IAM) API. This can also be sourced from the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">AWS_IAM_ENDPOINT</code> environment variable.</li><li class="mdx-lists_listItem__2Palk"><a id="max_retries" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="max_retries permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#max_retries"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">max_retries</code></a> - (Optional) The maximum number of times an AWS API request is retried on retryable failure. Defaults to 5.</li><li class="mdx-lists_listItem__2Palk"><a id="profile" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="profile permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#profile"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">profile</code></a> - (Optional) Name of AWS profile in AWS shared credentials file (e.g. <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">~/.aws/credentials</code>) or AWS shared configuration file (e.g. <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">~/.aws/config</code>) to use for credentials and/or configuration. This can also be sourced from the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">AWS_PROFILE</code> environment variable.</li><li class="mdx-lists_listItem__2Palk"><a id="shared_credentials_file" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="shared_credentials_file permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#shared_credentials_file"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">shared_credentials_file</code></a>  - (Optional) Path to the AWS shared credentials file. Defaults to <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">~/.aws/credentials</code>.</li><li class="mdx-lists_listItem__2Palk"><a id="skip_credentials_validation" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="skip_credentials_validation permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#skip_credentials_validation"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">skip_credentials_validation</code></a> - (Optional) Skip credentials validation via the STS API.</li><li class="mdx-lists_listItem__2Palk"><a id="skip_region_validation" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="skip_region_validation permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#skip_region_validation"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">skip_region_validation</code></a> - (Optional) Skip validation of provided region name.</li><li class="mdx-lists_listItem__2Palk"><a id="skip_metadata_api_check" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="skip_metadata_api_check permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#skip_metadata_api_check"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">skip_metadata_api_check</code></a> - (Optional) Skip usage of EC2 Metadata API.</li><li class="mdx-lists_listItem__2Palk"><a id="sts_endpoint" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="sts_endpoint permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#sts_endpoint"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">sts_endpoint</code></a> - (Optional) Custom endpoint for the AWS Security Token Service (STS) API. This can also be sourced from the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">AWS_STS_ENDPOINT</code> environment variable.</li><li class="mdx-lists_listItem__2Palk"><a id="token" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="token permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#token"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">token</code></a> - (Optional) Multi-Factor Authentication (MFA) token. This can also be sourced from the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">AWS_SESSION_TOKEN</code> environment variable.</li></ul><h4 id="assume-role-configuration" class="hds-typography-display-300 hds-font-weight-semibold mdx-headings_heading__T_KWX g-offset-scroll-margin-top mdx-headings_h4__gBHMJ"><a class="mdx-heading-permalink_root__rMneC g-focus-ring-from-box-shadow" aria-label="assume role configuration permalink" href="/hashicorp-terraform/terraform/language/settings/backends/s3#assume-role-configuration"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__wRuQa"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Assume Role Configuration</h4><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">The following configuration is optional:</p><ul class="mdx-lists_listRoot__zHI9u"><li class="mdx-lists_listItem__2Palk"><a id="assume_role_duration_seconds" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="assume_role_duration_seconds permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#assume_role_duration_seconds"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">assume_role_duration_seconds</code></a> - (Optional) Number of seconds to restrict the assume role session duration.</li><li class="mdx-lists_listItem__2Palk"><a id="assume_role_policy" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="assume_role_policy permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#assume_role_policy"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">assume_role_policy</code></a> - (Optional) IAM Policy JSON describing further restricting permissions for the IAM Role being assumed.</li><li class="mdx-lists_listItem__2Palk"><a id="assume_role_policy_arns" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="assume_role_policy_arns permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#assume_role_policy_arns"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">assume_role_policy_arns</code></a> - (Optional) Set of Amazon Resource Names (ARNs) of IAM Policies describing further restricting permissions for the IAM Role being assumed.</li><li class="mdx-lists_listItem__2Palk"><a id="assume_role_tags" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="assume_role_tags permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#assume_role_tags"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">assume_role_tags</code></a> - (Optional) Map of assume role session tags.</li><li class="mdx-lists_listItem__2Palk"><a id="assume_role_transitive_tag_keys" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="assume_role_transitive_tag_keys permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#assume_role_transitive_tag_keys"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">assume_role_transitive_tag_keys</code></a> - (Optional) Set of assume role session tag keys to pass to any subsequent sessions.</li><li class="mdx-lists_listItem__2Palk"><a id="external_id" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="external_id permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#external_id"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">external_id</code></a> - (Optional) External identifier to use when assuming the role.</li><li class="mdx-lists_listItem__2Palk"><a id="role_arn" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="role_arn permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#role_arn"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">role_arn</code></a> - (Optional) Amazon Resource Name (ARN) of the IAM Role to assume.</li><li class="mdx-lists_listItem__2Palk"><a id="session_name" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="session_name permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#session_name"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">session_name</code></a> - (Optional) Session name to use when assuming the role.</li></ul><h3 id="s3-state-storage" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__T_KWX g-offset-scroll-margin-top mdx-headings_h3__ST7wF"><a class="mdx-heading-permalink_root__rMneC g-focus-ring-from-box-shadow mdx-heading-permalink_h3__6xxpA" aria-label="s3 state storage permalink" href="/hashicorp-terraform/terraform/language/settings/backends/s3#s3-state-storage"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__wRuQa"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>S3 State Storage</h3><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">The following configuration is required:</p><ul class="mdx-lists_listRoot__zHI9u"><li class="mdx-lists_listItem__2Palk"><a id="bucket" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="bucket permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#bucket"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">bucket</code></a> - (Required) Name of the S3 Bucket.</li><li class="mdx-lists_listItem__2Palk"><a id="key" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="key permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#key"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">key</code></a> - (Required) Path to the state file inside the S3 Bucket. When using a non-default <a class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular" href="/hashicorp-terraform/terraform/language/state/workspaces">workspace</a>, the state path will be <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">/workspace_key_prefix/workspace_name/key</code> (see also the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">workspace_key_prefix</code> configuration).</li></ul><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">The following configuration is optional:</p><ul class="mdx-lists_listRoot__zHI9u"><li class="mdx-lists_listItem__2Palk"><a id="acl" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="acl permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#acl"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">acl</code></a> - (Optional) <a class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/acl-overview.html#canned-acl">Canned ACL</a> to be applied to the state file.</li><li class="mdx-lists_listItem__2Palk"><a id="encrypt" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="encrypt permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#encrypt"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">encrypt</code></a> - (Optional) Enable <a class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/UsingServerSideEncryption.html">server side encryption</a> of the state file.</li><li class="mdx-lists_listItem__2Palk"><a id="endpoint" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="endpoint permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#endpoint"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">endpoint</code></a> - (Optional) Custom endpoint for the AWS S3 API. This can also be sourced from the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">AWS_S3_ENDPOINT</code> environment variable.</li><li class="mdx-lists_listItem__2Palk"><a id="force_path_style" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="force_path_style permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#force_path_style"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">force_path_style</code></a> - (Optional) Enable path-style S3 URLs (<code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">https://&lt;HOST&gt;/&lt;BUCKET&gt;</code> instead of <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">https://&lt;BUCKET&gt;.&lt;HOST&gt;</code>).</li><li class="mdx-lists_listItem__2Palk"><a id="kms_key_id" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="kms_key_id permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#kms_key_id"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">kms_key_id</code></a> - (Optional) Amazon Resource Name (ARN) of a Key Management Service (KMS) Key to use for encrypting the state. Note that if this value is specified, Terraform will need <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">kms:Encrypt</code>, <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">kms:Decrypt</code> and <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">kms:GenerateDataKey</code> permissions on this KMS key.</li><li class="mdx-lists_listItem__2Palk"><a id="sse_customer_key" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="sse_customer_key permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#sse_customer_key"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">sse_customer_key</code></a> - (Optional) The key to use for encrypting state with <a class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/ServerSideEncryptionCustomerKeys.html">Server-Side Encryption with Customer-Provided Keys (SSE-C)</a>. This is the base64-encoded value of the key, which must decode to 256 bits. This can also be sourced from the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">AWS_SSE_CUSTOMER_KEY</code> environment variable, which is recommended due to the sensitivity of the value. Setting it inside a terraform file will cause it to be persisted to disk in <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">terraform.tfstate</code>.</li><li class="mdx-lists_listItem__2Palk"><a id="workspace_key_prefix" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="workspace_key_prefix permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#workspace_key_prefix"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">workspace_key_prefix</code></a> - (Optional) Prefix applied to the state path inside the bucket. This is only relevant when using a non-default workspace. Defaults to <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">env:</code>.</li></ul><h3 id="dynamodb-state-locking" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__T_KWX g-offset-scroll-margin-top mdx-headings_h3__ST7wF"><a class="mdx-heading-permalink_root__rMneC g-focus-ring-from-box-shadow mdx-heading-permalink_h3__6xxpA" aria-label="dynamodb state locking permalink" href="/hashicorp-terraform/terraform/language/settings/backends/s3#dynamodb-state-locking"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__wRuQa"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>DynamoDB State Locking</h3><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">The following configuration is optional:</p><ul class="mdx-lists_listRoot__zHI9u"><li class="mdx-lists_listItem__2Palk"><a id="dynamodb_endpoint" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="dynamodb_endpoint permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#dynamodb_endpoint"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">dynamodb_endpoint</code></a> - (Optional) Custom endpoint for the AWS DynamoDB API. This can also be sourced from the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">AWS_DYNAMODB_ENDPOINT</code> environment variable.</li><li class="mdx-lists_listItem__2Palk"><a id="dynamodb_table" aria-hidden="true" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __target-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#"></a><a aria-label="dynamodb_table permalink" class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular __permalink-lic" href="/hashicorp-terraform/terraform/language/settings/backends/s3#dynamodb_table"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">dynamodb_table</code></a> - (Optional) Name of DynamoDB Table to use for state locking and consistency. The table must have a partition key named <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">LockID</code> with type of <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">String</code>. If not configured, state locking will be disabled.</li></ul><h2 id="multi-account-aws-architecture" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__T_KWX g-offset-scroll-margin-top mdx-headings_h2__8mhgN"><a class="mdx-heading-permalink_root__rMneC g-focus-ring-from-box-shadow mdx-heading-permalink_h2___xzUm" aria-label="multi account aws architecture permalink" href="/hashicorp-terraform/terraform/language/settings/backends/s3#multi-account-aws-architecture"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__wRuQa"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Multi-account AWS Architecture</h2><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">A common architectural pattern is for an organization to use a number of
separate AWS accounts to isolate different teams and environments. For example,
a &quot;staging&quot; system will often be deployed into a separate AWS account than
its corresponding &quot;production&quot; system, to minimize the risk of the staging
environment affecting production infrastructure, whether via rate limiting,
misconfigured access controls, or other unintended interactions.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">The S3 backend can be used in a number of different ways that make different
tradeoffs between convenience, security, and isolation in such an organization.
This section describes one such approach that aims to find a good compromise
between these tradeoffs, allowing use of
<a class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular" href="/hashicorp-terraform/terraform/language/state/workspaces">Terraform&#x27;s workspaces feature</a> to switch
conveniently between multiple isolated deployments of the same configuration.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Use this section as a starting-point for your approach, but note that
you will probably need to make adjustments for the unique standards and
regulations that apply to your organization. You will also need to make some
adjustments to this approach to account for <em>existing</em> practices within your
organization, if for example other tools have previously been used to manage
infrastructure.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Terraform is an administrative tool that manages your infrastructure, and so
ideally the infrastructure that is used by Terraform should exist outside of
the infrastructure that Terraform manages. This can be achieved by creating a
separate <em>administrative</em> AWS account which contains the user accounts used by
human operators and any infrastructure and tools used to manage the other
accounts. Isolating shared administrative tools from your main environments
has a number of advantages, such as avoiding accidentally damaging the
administrative infrastructure while changing the target infrastructure, and
reducing the risk that an attacker might abuse production infrastructure to
gain access to the (usually more privileged) administrative infrastructure.</p><h3 id="administrative-account-setup" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__T_KWX g-offset-scroll-margin-top mdx-headings_h3__ST7wF"><a class="mdx-heading-permalink_root__rMneC g-focus-ring-from-box-shadow mdx-heading-permalink_h3__6xxpA" aria-label="administrative account setup permalink" href="/hashicorp-terraform/terraform/language/settings/backends/s3#administrative-account-setup"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__wRuQa"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Administrative Account Setup</h3><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Your administrative AWS account will contain at least the following items:</p><ul class="mdx-lists_listRoot__zHI9u"><li class="mdx-lists_listItem__2Palk">One or more <a class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_users.html">IAM user</a>
for system administrators that will log in to maintain infrastructure in
the other accounts.</li><li class="mdx-lists_listItem__2Palk">Optionally, one or more <a class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_groups.html">IAM groups</a>
to differentiate between different groups of users that have different
levels of access to the other AWS accounts.</li><li class="mdx-lists_listItem__2Palk">An <a class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/UsingBucket.html">S3 bucket</a>
that will contain the Terraform state files for each workspace.</li><li class="mdx-lists_listItem__2Palk">A <a class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular" href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/HowItWorks.CoreComponents.html#HowItWorks.CoreComponents.TablesItemsAttributes">DynamoDB table</a>
that will be used for locking to prevent concurrent operations on a single
workspace.</li></ul><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Provide the S3 bucket name and DynamoDB table name to Terraform within the
S3 backend configuration using the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">bucket</code> and <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">dynamodb_table</code> arguments
respectively, and configure a suitable <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">workspace_key_prefix</code> to contain
the states of the various workspaces that will subsequently be created for
this configuration.</p><h3 id="environment-account-setup" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__T_KWX g-offset-scroll-margin-top mdx-headings_h3__ST7wF"><a class="mdx-heading-permalink_root__rMneC g-focus-ring-from-box-shadow mdx-heading-permalink_h3__6xxpA" aria-label="environment account setup permalink" href="/hashicorp-terraform/terraform/language/settings/backends/s3#environment-account-setup"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__wRuQa"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Environment Account Setup</h3><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">For the sake of this section, the term &quot;environment account&quot; refers to one
of the accounts whose contents are managed by Terraform, separate from the
administrative account described above.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Your environment accounts will eventually contain your own product-specific
infrastructure. Along with this it must contain one or more
<a class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html">IAM roles</a>
that grant sufficient access for Terraform to perform the desired management
tasks.</p><h3 id="delegating-access" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__T_KWX g-offset-scroll-margin-top mdx-headings_h3__ST7wF"><a class="mdx-heading-permalink_root__rMneC g-focus-ring-from-box-shadow mdx-heading-permalink_h3__6xxpA" aria-label="delegating access permalink" href="/hashicorp-terraform/terraform/language/settings/backends/s3#delegating-access"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__wRuQa"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Delegating Access</h3><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Each Administrator will run Terraform using credentials for their IAM user
in the administrative account.
<a class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/tutorial_cross-account-with-roles.html">IAM Role Delegation</a>
is used to grant these users access to the roles created in each environment
account.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Full details on role delegation are covered in the AWS documentation linked
above. The most important details are:</p><ul class="mdx-lists_listRoot__zHI9u"><li class="mdx-lists_listItem__2Palk">Each role&#x27;s <em>Assume Role Policy</em> must grant access to the administrative AWS
account, which creates a trust relationship with the administrative AWS
account so that its users may assume the role.</li><li class="mdx-lists_listItem__2Palk">The users or groups within the administrative account must also have a
policy that creates the converse relationship, allowing these users or groups
to assume that role.</li></ul><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Since the purpose of the administrative account is only to host tools for
managing other accounts, it is useful to give the administrative accounts
restricted access only to the specific operations needed to assume the
environment account role and access the Terraform state. By blocking all
other access, you remove the risk that user error will lead to staging or
production resources being created in the administrative account by mistake.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">When configuring Terraform, use either environment variables or the standard
credentials file <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">~/.aws/credentials</code> to provide the administrator user&#x27;s
IAM credentials within the administrative account to both the S3 backend <em>and</em>
to Terraform&#x27;s AWS provider.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Use conditional configuration to pass a different <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">assume_role</code> value to
the AWS provider depending on the selected workspace. For example:</p><div class="g-code-block style_root__rglDp language-hcl mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-hcl mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-hcl mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token keyword">variable<span class="token type variable"> &quot;workspace_iam_roles&quot; </span></span><span class="token punctuation">{</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  <span class="token property">default</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token property">staging</span>    <span class="token punctuation">=</span> <span class="token string">&quot;arn:aws:iam::STAGING-ACCOUNT-ID:role/Terraform&quot;</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token property">production</span> <span class="token punctuation">=</span> <span class="token string">&quot;arn:aws:iam::PRODUCTION-ACCOUNT-ID:role/Terraform&quot;</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  <span class="token punctuation">}</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token punctuation">}</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token keyword">provider<span class="token type variable"> &quot;aws&quot; </span></span><span class="token punctuation">{</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  <span class="token comment"># No credentials explicitly set here because they come from either the</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  <span class="token comment"># environment or the global credentials file.</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  <span class="token keyword">assume_role</span> <span class="token punctuation">{</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token property">role_arn</span> <span class="token punctuation">=</span> <span class="token string">&quot;<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token keyword">var</span><span class="token punctuation">.</span><span class="token type variable">workspace_iam_roles</span><span class="token punctuation">[</span><span class="token keyword">terraform</span><span class="token punctuation">.</span><span class="token type variable">workspace</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span>&quot;</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  <span class="token punctuation">}</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token punctuation">}</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__H7t5c"><button class="style_button__pIRtg" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__85MLW"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">If workspace IAM roles are centrally managed and shared across many separate
Terraform configurations, the role ARNs could also be obtained via a data
source such as <a class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular" href="/hashicorp-terraform/terraform/language/state/remote-state-data"><code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">terraform_remote_state</code></a>
to avoid repeating these values.</p><h3 id="creating-and-selecting-workspaces" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__T_KWX g-offset-scroll-margin-top mdx-headings_h3__ST7wF"><a class="mdx-heading-permalink_root__rMneC g-focus-ring-from-box-shadow mdx-heading-permalink_h3__6xxpA" aria-label="creating and selecting workspaces permalink" href="/hashicorp-terraform/terraform/language/settings/backends/s3#creating-and-selecting-workspaces"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__wRuQa"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Creating and Selecting Workspaces</h3><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">With the necessary objects created and the backend configured, run
<code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">terraform init</code> to initialize the backend and establish an initial workspace
called &quot;default&quot;. This workspace will not be used, but is created automatically
by Terraform as a convenience for users who are not using the workspaces
feature.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Create a workspace corresponding to each key given in the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">workspace_iam_roles</code>
variable value above:</p><div class="g-code-block style_root__rglDp mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">$ terraform workspace new staging<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">Created and switched to workspace &quot;staging&quot;!<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">...<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">$ terraform workspace new production<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">Created and switched to workspace &quot;production&quot;!<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">...<!-- -->
</span></span></span></code></pre><div class="style_copyButtonContainer__H7t5c"><button class="style_button__pIRtg" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__85MLW"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Due to the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">assume_role</code> setting in the AWS provider configuration, any
management operations for AWS resources will be performed via the configured
role in the appropriate environment AWS account. The backend operations, such
as reading and writing the state from S3, will be performed directly as the
administrator&#x27;s own user within the administrative account.</p><div class="g-code-block style_root__rglDp mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">$ terraform workspace select staging<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">$ terraform apply<!-- -->
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">...<!-- -->
</span></span></span></code></pre><div class="style_copyButtonContainer__H7t5c"><button class="style_button__pIRtg" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__85MLW"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><h3 id="running-terraform-in-amazon-ec2" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__T_KWX g-offset-scroll-margin-top mdx-headings_h3__ST7wF"><a class="mdx-heading-permalink_root__rMneC g-focus-ring-from-box-shadow mdx-heading-permalink_h3__6xxpA" aria-label="running terraform in amazon ec2 permalink" href="/hashicorp-terraform/terraform/language/settings/backends/s3#running-terraform-in-amazon-ec2"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__wRuQa"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Running Terraform in Amazon EC2</h3><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Teams that make extensive use of Terraform for infrastructure management
often <a class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular" href="/hashicorp-terraform/terraform/tutorials/automation/automate-terraform?utm_source=WEBSITE&amp;utm_medium=WEB_IO&amp;utm_offer=ARTICLE_PAGE&amp;utm_content=DOCS">run Terraform in automation</a>
to ensure a consistent operating environment and to limit access to the
various secrets and other sensitive information that Terraform configurations
tend to require.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">When running Terraform in an automation tool running on an Amazon EC2 instance,
consider running this instance in the administrative account and using an
<a class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_switch-role-ec2_instance-profiles.html">instance profile</a>
in place of the various administrator IAM users suggested above. An IAM
instance profile can also be granted cross-account delegation access via
an IAM policy, giving this instance the access it needs to run Terraform.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">To isolate access to different environment accounts, use a separate EC2
instance for each target account so that its access can be limited only to
the single account.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Similar approaches can be taken with equivalent features in other AWS compute
services, such as ECS.</p><h3 id="protecting-access-to-workspace-state" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__T_KWX g-offset-scroll-margin-top mdx-headings_h3__ST7wF"><a class="mdx-heading-permalink_root__rMneC g-focus-ring-from-box-shadow mdx-heading-permalink_h3__6xxpA" aria-label="protecting access to workspace state permalink" href="/hashicorp-terraform/terraform/language/settings/backends/s3#protecting-access-to-workspace-state"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__wRuQa"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Protecting Access to Workspace State</h3><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">In a simple implementation of the pattern described in the prior sections,
all users have access to read and write states for all workspaces. In many
cases it is desirable to apply more precise access constraints to the
Terraform state objects in S3, so that for example only trusted administrators
are allowed to modify the production state, or to control <em>reading</em> of a state
that contains sensitive information.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Amazon S3 supports fine-grained access control on a per-object-path basis
using IAM policy. A full description of S3&#x27;s access control mechanism is
beyond the scope of this guide, but an example IAM policy granting access
to only a single state object within an S3 bucket is shown below:</p><div class="g-code-block style_root__rglDp language-json mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-json mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-json mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token punctuation">{</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  <span class="token property">&quot;Version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2012-10-17&quot;</span><span class="token punctuation">,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  <span class="token property">&quot;Statement&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token punctuation">{</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">      <span class="token property">&quot;Effect&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Allow&quot;</span><span class="token punctuation">,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">      <span class="token property">&quot;Action&quot;</span><span class="token operator">:</span> <span class="token string">&quot;s3:ListBucket&quot;</span><span class="token punctuation">,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">      <span class="token property">&quot;Resource&quot;</span><span class="token operator">:</span> <span class="token string">&quot;arn:aws:s3:::myorg-terraform-states&quot;</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token punctuation">{</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">      <span class="token property">&quot;Effect&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Allow&quot;</span><span class="token punctuation">,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">      <span class="token property">&quot;Action&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;s3:GetObject&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;s3:PutObject&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">      <span class="token property">&quot;Resource&quot;</span><span class="token operator">:</span> <span class="token string">&quot;arn:aws:s3:::myorg-terraform-states/myapp/production/tfstate&quot;</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">    <span class="token punctuation">}</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  <span class="token punctuation">]</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token punctuation">}</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__H7t5c"><button class="style_button__pIRtg" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__85MLW"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">It is also possible to apply fine-grained access control to the DynamoDB
table used for locking. When Terraform puts the state lock in place during <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">terraform plan</code>, it stores the full state file as a document and sets the s3 object key as the partition key for the document. After the state lock is released, Terraform places a digest of the updated state file in DynamoDB. The key is similar to the one for the original state file, but is suffixed with <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">-md5</code>.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">The example below shows a simple IAM policy that allows the backend operations role to perform these operations:</p><div class="g-code-block style_root__rglDp language-json mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-json mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-json mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token punctuation">{</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  <span class="token property">&quot;Version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2012-10-17&quot;</span><span class="token punctuation">,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  <span class="token property">&quot;Statement&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">      <span class="token punctuation">{</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">        <span class="token property">&quot;Effect&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Allow&quot;</span><span class="token punctuation">,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">        <span class="token property">&quot;Action&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">          <span class="token string">&quot;dynamodb:DeleteItem&quot;</span><span class="token punctuation">,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">          <span class="token string">&quot;dynamodb:GetItem&quot;</span><span class="token punctuation">,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">          <span class="token string">&quot;dynamodb:PutItem&quot;</span><span class="token punctuation">,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">          <span class="token string">&quot;dynamodb:Query&quot;</span><span class="token punctuation">,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">          <span class="token string">&quot;dynamodb:UpdateItem&quot;</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">        <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">        <span class="token property">&quot;Resource&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;arn:aws:dynamodb:*:*:table/myorg-state-lock-table&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">        <span class="token property">&quot;Condition&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">          <span class="token property">&quot;ForAllValues:StringEquals&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">            <span class="token property">&quot;dynamodb:LeadingKeys&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">              <span class="token string">&quot;myorg-terraform-states/myapp/production/tfstate&quot;</span><span class="token punctuation">,</span> <span class="token comment">// during a state lock the full state file is stored with this key</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">              <span class="token string">&quot;myorg-terraform-states/myapp/production/tfstate-md5&quot;</span> <span class="token comment">// after the lock is released a hash of the statefile&#x27;s contents are stored with this key</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">            <span class="token punctuation">]</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">          <span class="token punctuation">}</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">        <span class="token punctuation">}</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">      <span class="token punctuation">}</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">  <span class="token punctuation">]</span>
</span><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ"><span class="token punctuation">}</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__H7t5c"><button class="style_button__pIRtg" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__85MLW"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Refer to the <a class="inline-link_root__jsfnc g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular" href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/specifying-conditions.html">AWS documentation on DynamoDB fine-grained locking</a> for more details.</p><h3 id="configuring-custom-user-agent-information" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__T_KWX g-offset-scroll-margin-top mdx-headings_h3__ST7wF"><a class="mdx-heading-permalink_root__rMneC g-focus-ring-from-box-shadow mdx-heading-permalink_h3__6xxpA" aria-label="configuring custom user agent information permalink" href="/hashicorp-terraform/terraform/language/settings/backends/s3#configuring-custom-user-agent-information"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__wRuQa"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Configuring Custom User-Agent Information</h3><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">Note this feature is optional and only available in Terraform v0.13.1+.</p><p class="text_root__WdIWm hds-typography-body-300 hds-font-weight-regular mdx-p_p__iAYvZ">By default, the underlying AWS client used by the Terraform AWS Provider creates requests with User-Agent headers including information about Terraform and AWS Go SDK versions. To provide additional information in the User-Agent headers, the <code class="mdx-inline-code_inlineCode__mRRzk mdx-inline-code_size-200__jzxqL hds-typography-code-200">TF_APPEND_USER_AGENT</code> environment variable can be set and its value will be directly added to HTTP requests. e.g.</p><div class="g-code-block style_root__rglDp language-sh mdx-code-blocks_codeBlockMargin__TI7B4 style_codeMargin__yBb2n theme-dark_base__fkY9D theme-dark_syntax__HBUbm" data-heap-track="code-block"><div class="style_linesContainer__V510Y"><pre class="style_pre__8bu5H language-sh mdx-code-blocks_codeBlockMargin__TI7B4"><code class="style_code__oq8Ry language-sh mdx-code-blocks_codeBlockMargin__TI7B4"><span class="style_linesColumn__8DjgV style_styledScrollbars__McJya"><span class="style_linesWrapper__S4Wrt"><span class="style_LineOfCode__Y9D6q g-type-code style_hasFloatingCopyButton__wT3iZ">$ export TF_APPEND_USER_AGENT=&quot;JenkinsAgent/i-12345678 BuildID/1234 (Optional Extra Information)&quot;<!-- -->
</span></span></span></code></pre><div class="style_copyButtonContainer__H7t5c"><button class="style_button__pIRtg" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__85MLW"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div></div></div><a href="https://github.com/hashicorp/terraform/blob/main/website/../docs/language/settings/backends/s3.mdx" target="_blank" class="edit-on-github-link_editLink__sIi03 sidebar-sidecar-layout_editOnGithubLink__c3Hzw" rel="noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="edit-on-github-link_editLinkIcon__FuB6t"><path fill="currentColor" fill-rule="evenodd" d="M8 1C4.133 1 1 4.13 1 7.993c0 3.09 2.006 5.71 4.787 6.635.35.064.478-.152.478-.337 0-.166-.006-.606-.01-1.19-1.947.423-2.357-.937-2.357-.937-.319-.808-.778-1.023-.778-1.023-.635-.434.048-.425.048-.425.703.05 1.073.72 1.073.72.624 1.07 1.638.76 2.037.582.063-.452.244-.76.444-.935-1.554-.176-3.188-.776-3.188-3.456 0-.763.273-1.388.72-1.876-.072-.177-.312-.888.07-1.85 0 0 .586-.189 1.924.716A6.711 6.711 0 018 4.381c.595.003 1.194.08 1.753.236 1.336-.905 1.923-.717 1.923-.717.382.963.142 1.674.07 1.85.448.49.72 1.114.72 1.877 0 2.686-1.638 3.278-3.197 3.45.251.216.475.643.475 1.296 0 .934-.009 1.688-.009 1.918 0 .187.127.404.482.336A6.996 6.996 0 0015 7.993 6.997 6.997 0 008 1z" clip-rule="evenodd"></path></svg>Edit this page on GitHub</a></main><div class="sidebar-sidecar-layout_sidecarPosition__p5onY"><div class="sidecar-scroll-container_root__MHD0z"><div class="sidecar-scroll-container_scrollContainer__fvA5n"><div><nav aria-labelledby="react-aria-161"><p id="react-aria-161" class="outline-nav_navLabel__jk_MG hds-typography-body-100">On this page:</p><ol class="outline-nav_listRoot__cbYFw"><li><a class="outline-link_root__K1_Dc hds-typography-body-200 g-focus-ring-from-box-shadow" data-heap-track="toc-list-item-index-0" href="/hashicorp-terraform/terraform/language/settings/backends/s3#s3">S3</a></li><li><a class="outline-link_root__K1_Dc hds-typography-body-200 g-focus-ring-from-box-shadow" data-heap-track="toc-list-item-index-1" href="/hashicorp-terraform/terraform/language/settings/backends/s3#example-configuration">Example Configuration</a></li><li><a class="outline-link_root__K1_Dc hds-typography-body-200 g-focus-ring-from-box-shadow" data-heap-track="toc-list-item-index-2" href="/hashicorp-terraform/terraform/language/settings/backends/s3#data-source-configuration">Data Source Configuration</a></li><li><a class="outline-link_root__K1_Dc hds-typography-body-200 g-focus-ring-from-box-shadow" data-heap-track="toc-list-item-index-3" href="/hashicorp-terraform/terraform/language/settings/backends/s3#configuration">Configuration</a></li><li><a class="outline-link_root__K1_Dc hds-typography-body-200 g-focus-ring-from-box-shadow" data-heap-track="toc-list-item-index-4" href="/hashicorp-terraform/terraform/language/settings/backends/s3#multi-account-aws-architecture">Multi-account AWS Architecture</a></li></ol></nav></div></div></div></div></div></div></div></div></div><div class="base-new-layout_footer__LslqQ base-new-layout_showFooterTopBorder__svNbM"><footer class="footer_root__rBmjT"><span class="footer_logoAndSwitcher__X6G8O"><a href="https://www.hashicorp.com/" aria-label="Go to HashiCorp home page" class="footer_logo__SR4lJ g-focus-ring-from-box-shadow"><div><svg width="317" height="88" viewBox="0 0 317 88" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M107.692 64.421V47.4h-14.97v17.02h-7.623V24.06h7.622v16.602h14.971V24.06h7.622v40.36h-7.622zm35.567-.001h-6.053l-.548-1.996a16.137 16.137 0 01-8.789 2.607c-5.397 0-7.699-3.697-7.699-8.79 0-5.998 2.607-8.3 8.606-8.3h7.089v-3.095c0-3.27-.907-4.421-5.633-4.421a41.255 41.255 0 00-8.179.877l-.907-5.634a38.496 38.496 0 0110.122-1.395c9.269 0 11.998 3.27 11.998 10.672l-.007 19.476zm-7.394-11.151h-5.45c-2.424 0-3.087.663-3.087 2.912 0 2.058.663 2.973 2.972 2.973a11.629 11.629 0 005.572-1.525l-.007-4.36zm21.701 11.754a34.776 34.776 0 01-10.183-1.7l1.029-5.633a33.038 33.038 0 008.788 1.273c3.271 0 3.758-.762 3.758-2.973 0-1.814-.366-2.729-5.152-3.88-7.211-1.76-8.058-3.575-8.058-9.269 0-5.938 2.607-8.545 11.03-8.545 2.98.003 5.949.348 8.85 1.03l-.762 5.876a51.98 51.98 0 00-8.118-.846c-3.209 0-3.758.763-3.758 2.546 0 2.363.183 2.546 4.185 3.575 8.263 2.188 9.055 3.278 9.055 9.307 0 5.725-1.761 9.239-10.664 9.239zm32.663-.602V43.84c0-1.578-.663-2.363-2.363-2.363-1.814 0-5.031 1.09-7.699 2.485v20.459h-7.394V22.847l7.394-1.029v15.33a26.045 26.045 0 0110.786-2.852c4.909 0 6.662 3.453 6.662 8.728v21.397h-7.386zm12.844-33.692v-8.545h7.394v8.545h-7.394zm0 33.692V34.906h7.394v29.515h-7.394zM215.62 35.15c0-7.394 4.299-11.693 14.361-11.693 3.697 0 7.38.447 10.969 1.334l-.839 6.601a59.517 59.517 0 00-9.909-1.029c-5.275 0-6.967 1.822-6.967 6.098v15.512c0 4.3 1.7 6.098 6.967 6.098a59.506 59.506 0 009.909-1.029l.846 6.609a45.672 45.672 0 01-10.968 1.334c-10.062 0-14.361-4.3-14.361-11.693l-.008-18.142zm40.499 29.873c-10.123 0-12.844-5.572-12.844-11.632v-7.455c0-6.06 2.728-11.632 12.844-11.632 10.115 0 12.844 5.572 12.844 11.632v7.455c-.023 6.06-2.744 11.632-12.844 11.632zm0-24.392c-3.941 0-5.45 1.76-5.45 5.092v7.912c0 3.331 1.524 5.092 5.45 5.092 3.925 0 5.45-1.76 5.45-5.092v-7.943c-.015-3.33-1.532-5.092-5.45-5.092v.03zm32.457.457a57.835 57.835 0 00-7.821 4.3v19.056h-7.394V34.906h6.243l.488 3.27a33.064 33.064 0 017.76-3.88l.724 6.792zm28.035 13.515c0 6.548-2.911 10.42-9.756 10.42a40.76 40.76 0 01-7.882-.853v12.196l-7.394 1.029V34.906h5.877l.762 2.485a15.535 15.535 0 019.33-3.087c5.938 0 9.086 3.514 9.086 10.245l-.023 10.054zm-17.631 3.331c2.152.474 4.346.73 6.548.763 2.668 0 3.697-1.274 3.697-3.941V44.35c0-2.424-.907-3.758-3.636-3.758a10.46 10.46 0 00-6.609 2.668v14.673zM29.134 7L0 23.808v40.361l10.946 6.32V30.127l18.188-10.504V7z" fill="#000"/><path d="M40.758 7v32.144H29.133V27.147l-10.945 6.319V74.65l10.946 6.335V48.932h11.624v11.914l10.946-6.312V13.32L40.758 7z" fill="#000"/><path d="M40.758 81L69.89 64.192V23.831l-10.946-6.32v40.362L40.758 68.377V81z" fill="#000"/></svg></div></a><span class="footer_themeSwitcher__W26Rs hds-font-weight-regular"><label class="theme-switcher_label__bs8JE hds-typography-body-200" for="react-aria-167">Theme</label></span></span><ul class="footer_links__Ews9a"><li><a class="footer_linkAction__g2TXk g-focus-ring-from-box-shadow" href="/hashicorp-terraform/certifications"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular">Certifications</span></a></li><li><a class="footer_linkAction__g2TXk g-focus-ring-from-box-shadow" href="https://status.hashicorp.com"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular">System Status</span></a></li><li><button class="footer_linkAction__g2TXk g-focus-ring-from-box-shadow"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular">Cookie Manager</span></button></li><li><a class="footer_linkAction__g2TXk g-focus-ring-from-box-shadow" href="https://www.hashicorp.com/terms-of-service"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular">Terms of Use</span></a></li><li><a class="footer_linkAction__g2TXk g-focus-ring-from-box-shadow" href="https://www.hashicorp.com/security"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular">Security</span></a></li><li><a class="footer_linkAction__g2TXk g-focus-ring-from-box-shadow" href="https://www.hashicorp.com/privacy"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular">Privacy</span></a></li><li><a class="footer_linkAction__g2TXk g-focus-ring-from-box-shadow" href="https://www.hashicorp.com/trademark-policy"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular">Trademark Policy</span></a></li><li><a class="footer_linkAction__g2TXk g-focus-ring-from-box-shadow" href="https://www.hashicorp.com/trade-controls"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular">Trade Controls</span></a></li><li><a class="footer_linkAction__g2TXk g-focus-ring-from-box-shadow" aria-describedby="undefinedopens-in-new-tab-label-react-aria-175" target="_blank" href="https://forms.gle/fnHLuNahLEhjuKvE6"><span class="text_root__WdIWm hds-typography-body-200 hds-font-weight-regular">Give Feedback</span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-175">(opens in new tab)</span></li></ul></footer></div></div></div><div class="style_root__Fb7pu"></div><div style="position:fixed;z-index:99;top:16px;left:16px;right:16px;bottom:16px;pointer-events:none;inset:24px"></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"layoutProps":{"breadcrumbLinks":[{"title":"Developer","url":"/"},{"title":"Terraform","url":"/terraform"},{"title":"Configuration Language","url":"/terraform/language","isCurrentPage":false},{"title":"Terraform Settings","url":"/terraform/language/settings"},{"title":"Backends"},{"title":"s3"}],"sidebarNavDataLevels":[{"levelButtonProps":{"levelDownButtonText":"Terraform Home"},"menuItems":[{"leadingIconName":"home","title":"HashiCorp Developer","href":"/"},{"divider":true},{"heading":"Products"},{"leadingIconName":"hcp","title":"HashiCorp Cloud Platform","href":"/hcp"},{"leadingIconName":"terraform","title":"Terraform","href":"/terraform"},{"leadingIconName":"packer","title":"Packer","href":"/packer"},{"leadingIconName":"consul","title":"Consul","href":"/consul"},{"leadingIconName":"vault","title":"Vault","href":"/vault"},{"leadingIconName":"boundary","title":"Boundary","href":"/boundary"},{"leadingIconName":"nomad","title":"Nomad","href":"/nomad"},{"leadingIconName":"waypoint","title":"Waypoint","href":"/waypoint"},{"leadingIconName":"vagrant","title":"Vagrant","href":"/vagrant"}],"showFilterInput":false,"title":"Main Menu"},{"levelButtonProps":{"levelUpButtonText":"Main Menu","levelDownButtonText":"Previous"},"menuItems":[{"title":"Terraform","fullPath":"/terraform","theme":"terraform"},{"title":"Documentation","isOpen":true,"routes":[{"title":"About the Docs","fullPath":"/terraform/docs"},{"title":"Configuration Language","fullPath":"/terraform/language"},{"title":"Terraform CLI","fullPath":"/terraform/cli"},{"title":"Terraform Cloud","fullPath":"/terraform/cloud-docs"},{"title":"Terraform Enterprise","fullPath":"/terraform/enterprise"},{"title":"CDK for Terraform","fullPath":"/terraform/cdktf"},{"title":"Provider Use","fullPath":"/terraform/language/providers"},{"title":"Plugin Development","fullPath":"/terraform/plugin"},{"title":"Registry Publishing","fullPath":"/terraform/registry"},{"title":"Integration Program","fullPath":"/terraform/docs/partnerships"}]},{"title":"Tutorials","fullPath":"/terraform/tutorials"},{"title":"Install","fullPath":"/terraform/downloads"}],"showFilterInput":false,"title":"Terraform","visuallyHideTitle":true},{"backToLinkProps":{"text":"Terraform Home","href":"/terraform"},"levelButtonProps":{"levelUpButtonText":"Terraform Home"},"menuItems":[{"title":"Configuration Language","fullPath":"/terraform/language","theme":"terraform"},{"title":"Files and Directories","routes":[{"title":"Overview","path":"files","filePath":"../docs/language/files/index.mdx","fullPath":"/terraform/language/files","id":"sidebar-nav-item-3"},{"title":"Override Files","path":"files/override","filePath":"../docs/language/files/override.mdx","fullPath":"/terraform/language/files/override","id":"sidebar-nav-item-4"},{"title":"Dependency Lock File","path":"files/dependency-lock","filePath":"../docs/language/files/dependency-lock.mdx","fullPath":"/terraform/language/files/dependency-lock","id":"sidebar-nav-item-5"}],"id":"sidebar-nav-item-2"},{"title":"Syntax","routes":[{"title":"Overview","path":"syntax","filePath":"../docs/language/syntax/index.mdx","fullPath":"/terraform/language/syntax","id":"sidebar-nav-item-7"},{"title":"Configuration Syntax","path":"syntax/configuration","filePath":"../docs/language/syntax/configuration.mdx","fullPath":"/terraform/language/syntax/configuration","id":"sidebar-nav-item-8"},{"title":"JSON Configuration Syntax","path":"syntax/json","filePath":"../docs/language/syntax/json.mdx","fullPath":"/terraform/language/syntax/json","id":"sidebar-nav-item-9"},{"title":"Style Conventions","path":"syntax/style","filePath":"../docs/language/syntax/style.mdx","fullPath":"/terraform/language/syntax/style","id":"sidebar-nav-item-10"}],"id":"sidebar-nav-item-6"},{"title":"Resources","routes":[{"title":"Overview","path":"resources","filePath":"../docs/language/resources/index.mdx","fullPath":"/terraform/language/resources","id":"sidebar-nav-item-12"},{"title":"Resource Blocks","path":"resources/syntax","filePath":"../docs/language/resources/syntax.mdx","fullPath":"/terraform/language/resources/syntax","id":"sidebar-nav-item-13"},{"title":"Resource Behavior","path":"resources/behavior","filePath":"../docs/language/resources/behavior.mdx","fullPath":"/terraform/language/resources/behavior","id":"sidebar-nav-item-14"},{"title":"Meta-Arguments","routes":[{"title":"\u003ccode\u003edepends_on\u003c/code\u003e","href":null,"fullPath":"/terraform/language/meta-arguments/depends_on","id":"sidebar-nav-item-16","path":"/language/meta-arguments/depends_on"},{"title":"\u003ccode\u003ecount\u003c/code\u003e","href":null,"fullPath":"/terraform/language/meta-arguments/count","id":"sidebar-nav-item-17","path":"/language/meta-arguments/count"},{"title":"\u003ccode\u003efor_each\u003c/code\u003e","href":null,"fullPath":"/terraform/language/meta-arguments/for_each","id":"sidebar-nav-item-18","path":"/language/meta-arguments/for_each"},{"title":"\u003ccode\u003eprovider\u003c/code\u003e","href":null,"fullPath":"/terraform/language/meta-arguments/resource-provider","id":"sidebar-nav-item-19","path":"/language/meta-arguments/resource-provider"},{"title":"\u003ccode\u003elifecycle\u003c/code\u003e","href":null,"fullPath":"/terraform/language/meta-arguments/lifecycle","id":"sidebar-nav-item-20","path":"/language/meta-arguments/lifecycle"}],"id":"sidebar-nav-item-15"},{"title":"Provisioners","routes":[{"title":"Declaring Provisioners","path":"resources/provisioners/syntax","filePath":"../docs/language/resources/provisioners/syntax.mdx","fullPath":"/terraform/language/resources/provisioners/syntax","id":"sidebar-nav-item-22"},{"title":"Provisioner Connections","path":"resources/provisioners/connection","filePath":"../docs/language/resources/provisioners/connection.mdx","fullPath":"/terraform/language/resources/provisioners/connection","id":"sidebar-nav-item-23"},{"title":"Provisioners Without a Resource","path":"resources/provisioners/null_resource","filePath":"../docs/language/resources/provisioners/null_resource.mdx","fullPath":"/terraform/language/resources/provisioners/null_resource","id":"sidebar-nav-item-24"},{"title":"file","path":"resources/provisioners/file","filePath":"../docs/language/resources/provisioners/file.mdx","fullPath":"/terraform/language/resources/provisioners/file","id":"sidebar-nav-item-25"},{"title":"local-exec","path":"resources/provisioners/local-exec","filePath":"../docs/language/resources/provisioners/local-exec.mdx","fullPath":"/terraform/language/resources/provisioners/local-exec","id":"sidebar-nav-item-26"},{"title":"remote-exec","path":"resources/provisioners/remote-exec","filePath":"../docs/language/resources/provisioners/remote-exec.mdx","fullPath":"/terraform/language/resources/provisioners/remote-exec","id":"sidebar-nav-item-27"}],"id":"sidebar-nav-item-21"},{"title":"The \u003ccode\u003eterraform_data\u003c/code\u003e Resource Type","path":"resources/terraform-data","filePath":"../docs/language/resources/terraform-data.mdx","fullPath":"/terraform/language/resources/terraform-data","id":"sidebar-nav-item-28"}],"id":"sidebar-nav-item-11"},{"title":"Data Sources","path":"data-sources","filePath":"../docs/language/data-sources/index.mdx","fullPath":"/terraform/language/data-sources","id":"sidebar-nav-item-29"},{"title":"Providers","routes":[{"title":"Overview","path":"providers","filePath":"../docs/language/providers/index.mdx","fullPath":"/terraform/language/providers","id":"sidebar-nav-item-31"},{"title":"Provider Configuration","path":"providers/configuration","filePath":"../docs/language/providers/configuration.mdx","fullPath":"/terraform/language/providers/configuration","id":"sidebar-nav-item-32"},{"title":"Provider Requirements","path":"providers/requirements","filePath":"../docs/language/providers/requirements.mdx","fullPath":"/terraform/language/providers/requirements","id":"sidebar-nav-item-33"},{"title":"Dependency Lock File","href":null,"fullPath":"/terraform/language/files/dependency-lock","id":"sidebar-nav-item-34","path":"/language/files/dependency-lock"}],"id":"sidebar-nav-item-30"},{"title":"Variables and Outputs","routes":[{"title":"Overview","path":"values","filePath":"../docs/language/values/index.mdx","fullPath":"/terraform/language/values","id":"sidebar-nav-item-36"},{"title":"Input Variables","path":"values/variables","filePath":"../docs/language/values/variables.mdx","fullPath":"/terraform/language/values/variables","id":"sidebar-nav-item-37"},{"title":"Output Values","path":"values/outputs","filePath":"../docs/language/values/outputs.mdx","fullPath":"/terraform/language/values/outputs","id":"sidebar-nav-item-38"},{"title":"Local Values","path":"values/locals","filePath":"../docs/language/values/locals.mdx","fullPath":"/terraform/language/values/locals","id":"sidebar-nav-item-39"}],"id":"sidebar-nav-item-35"},{"title":"Modules","routes":[{"title":"Overview","path":"modules","filePath":"../docs/language/modules/index.mdx","fullPath":"/terraform/language/modules","id":"sidebar-nav-item-41"},{"title":"Module Blocks","path":"modules/syntax","filePath":"../docs/language/modules/syntax.mdx","fullPath":"/terraform/language/modules/syntax","id":"sidebar-nav-item-42"},{"title":"Module Sources","path":"modules/sources","filePath":"../docs/language/modules/sources.mdx","fullPath":"/terraform/language/modules/sources","id":"sidebar-nav-item-43"},{"title":"Meta-Arguments","routes":[{"title":"\u003ccode\u003eproviders\u003c/code\u003e","href":null,"fullPath":"/terraform/language/meta-arguments/module-providers","id":"sidebar-nav-item-45","path":"/language/meta-arguments/module-providers"},{"title":"\u003ccode\u003edepends_on\u003c/code\u003e","href":null,"fullPath":"/terraform/language/meta-arguments/depends_on","id":"sidebar-nav-item-46","path":"/language/meta-arguments/depends_on"},{"title":"\u003ccode\u003ecount\u003c/code\u003e","href":null,"fullPath":"/terraform/language/meta-arguments/count","id":"sidebar-nav-item-47","path":"/language/meta-arguments/count"},{"title":"\u003ccode\u003efor_each\u003c/code\u003e","href":null,"fullPath":"/terraform/language/meta-arguments/for_each","id":"sidebar-nav-item-48","path":"/language/meta-arguments/for_each"}],"id":"sidebar-nav-item-44"},{"title":"Module Development","routes":[{"title":"Overview","path":"modules/develop","filePath":"../docs/language/modules/develop/index.mdx","fullPath":"/terraform/language/modules/develop","id":"sidebar-nav-item-50"},{"title":"Standard Module Structure","path":"modules/develop/structure","filePath":"../docs/language/modules/develop/structure.mdx","fullPath":"/terraform/language/modules/develop/structure","id":"sidebar-nav-item-51"},{"title":"Providers Within Modules","path":"modules/develop/providers","filePath":"../docs/language/modules/develop/providers.mdx","fullPath":"/terraform/language/modules/develop/providers","id":"sidebar-nav-item-52"},{"title":"Best Practices: Module Composition","path":"modules/develop/composition","filePath":"../docs/language/modules/develop/composition.mdx","fullPath":"/terraform/language/modules/develop/composition","id":"sidebar-nav-item-53"},{"title":"Publishing Modules","path":"modules/develop/publish","filePath":"../docs/language/modules/develop/publish.mdx","fullPath":"/terraform/language/modules/develop/publish","id":"sidebar-nav-item-54"},{"title":"Refactoring Modules","path":"modules/develop/refactoring","filePath":"../docs/language/modules/develop/refactoring.mdx","fullPath":"/terraform/language/modules/develop/refactoring","id":"sidebar-nav-item-55"}],"id":"sidebar-nav-item-49"}],"id":"sidebar-nav-item-40"},{"title":"Expressions","routes":[{"title":"Overview","path":"expressions","filePath":"../docs/language/expressions/index.mdx","fullPath":"/terraform/language/expressions","id":"sidebar-nav-item-57"},{"title":"Types and Values","path":"expressions/types","filePath":"../docs/language/expressions/types.mdx","fullPath":"/terraform/language/expressions/types","id":"sidebar-nav-item-58"},{"title":"Strings and Templates","path":"expressions/strings","filePath":"../docs/language/expressions/strings.mdx","fullPath":"/terraform/language/expressions/strings","id":"sidebar-nav-item-59"},{"title":"References to Values","path":"expressions/references","filePath":"../docs/language/expressions/references.mdx","fullPath":"/terraform/language/expressions/references","id":"sidebar-nav-item-60"},{"title":"Operators","path":"expressions/operators","filePath":"../docs/language/expressions/operators.mdx","fullPath":"/terraform/language/expressions/operators","id":"sidebar-nav-item-61"},{"title":"Function Calls","path":"expressions/function-calls","filePath":"../docs/language/expressions/function-calls.mdx","fullPath":"/terraform/language/expressions/function-calls","id":"sidebar-nav-item-62"},{"title":"Conditional Expressions","path":"expressions/conditionals","filePath":"../docs/language/expressions/conditionals.mdx","fullPath":"/terraform/language/expressions/conditionals","id":"sidebar-nav-item-63"},{"title":"For Expressions","path":"expressions/for","filePath":"../docs/language/expressions/for.mdx","fullPath":"/terraform/language/expressions/for","id":"sidebar-nav-item-64"},{"title":"Splat Expressions","path":"expressions/splat","filePath":"../docs/language/expressions/splat.mdx","fullPath":"/terraform/language/expressions/splat","id":"sidebar-nav-item-65"},{"title":"Dynamic Blocks","path":"expressions/dynamic-blocks","filePath":"../docs/language/expressions/dynamic-blocks.mdx","fullPath":"/terraform/language/expressions/dynamic-blocks","id":"sidebar-nav-item-66"},{"title":"Custom Condition Checks","path":"expressions/custom-conditions","filePath":"../docs/language/expressions/custom-conditions.mdx","fullPath":"/terraform/language/expressions/custom-conditions","id":"sidebar-nav-item-67"},{"title":"Type Constraints","path":"expressions/type-constraints","filePath":"../docs/language/expressions/type-constraints.mdx","fullPath":"/terraform/language/expressions/type-constraints","id":"sidebar-nav-item-68"},{"title":"Version Constraints","path":"expressions/version-constraints","filePath":"../docs/language/expressions/version-constraints.mdx","fullPath":"/terraform/language/expressions/version-constraints","id":"sidebar-nav-item-69"}],"id":"sidebar-nav-item-56"},{"title":"Functions","routes":[{"title":"Overview","path":"functions","filePath":"../docs/language/functions/index.mdx","fullPath":"/terraform/language/functions","id":"sidebar-nav-item-71"},{"title":"Numeric Functions","routes":[{"title":"\u003ccode\u003eabs\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/abs","id":"sidebar-nav-item-73","path":"/language/functions/abs"},{"title":"\u003ccode\u003eceil\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/ceil","id":"sidebar-nav-item-74","path":"/language/functions/ceil"},{"title":"\u003ccode\u003efloor\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/floor","id":"sidebar-nav-item-75","path":"/language/functions/floor"},{"title":"\u003ccode\u003elog\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/log","id":"sidebar-nav-item-76","path":"/language/functions/log"},{"title":"\u003ccode\u003emax\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/max","id":"sidebar-nav-item-77","path":"/language/functions/max"},{"title":"\u003ccode\u003emin\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/min","id":"sidebar-nav-item-78","path":"/language/functions/min"},{"title":"\u003ccode\u003eparseint\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/parseint","id":"sidebar-nav-item-79","path":"/language/functions/parseint"},{"title":"\u003ccode\u003epow\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/pow","id":"sidebar-nav-item-80","path":"/language/functions/pow"},{"title":"\u003ccode\u003esignum\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/signum","id":"sidebar-nav-item-81","path":"/language/functions/signum"}],"id":"sidebar-nav-item-72"},{"title":"String Functions","routes":[{"title":"\u003ccode\u003echomp\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/chomp","id":"sidebar-nav-item-83","path":"/language/functions/chomp"},{"title":"\u003ccode\u003eendswith\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/endswith","id":"sidebar-nav-item-84","path":"/language/functions/endswith"},{"title":"\u003ccode\u003eformat\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/format","id":"sidebar-nav-item-85","path":"/language/functions/format"},{"title":"\u003ccode\u003eformatlist\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/formatlist","id":"sidebar-nav-item-86","path":"/language/functions/formatlist"},{"title":"\u003ccode\u003eindent\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/indent","id":"sidebar-nav-item-87","path":"/language/functions/indent"},{"title":"\u003ccode\u003ejoin\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/join","id":"sidebar-nav-item-88","path":"/language/functions/join"},{"title":"\u003ccode\u003elower\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/lower","id":"sidebar-nav-item-89","path":"/language/functions/lower"},{"title":"\u003ccode\u003eregex\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/regex","id":"sidebar-nav-item-90","path":"/language/functions/regex"},{"title":"\u003ccode\u003eregexall\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/regexall","id":"sidebar-nav-item-91","path":"/language/functions/regexall"},{"title":"\u003ccode\u003ereplace\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/replace","id":"sidebar-nav-item-92","path":"/language/functions/replace"},{"title":"\u003ccode\u003esplit\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/split","id":"sidebar-nav-item-93","path":"/language/functions/split"},{"title":"\u003ccode\u003estartswith\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/startswith","id":"sidebar-nav-item-94","path":"/language/functions/startswith"},{"title":"\u003ccode\u003estrcontains\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/strcontains","id":"sidebar-nav-item-95","path":"/language/functions/strcontains"},{"title":"\u003ccode\u003estrrev\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/strrev","id":"sidebar-nav-item-96","path":"/language/functions/strrev"},{"title":"\u003ccode\u003esubstr\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/substr","id":"sidebar-nav-item-97","path":"/language/functions/substr"},{"title":"\u003ccode\u003etitle\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/title","id":"sidebar-nav-item-98","path":"/language/functions/title"},{"title":"\u003ccode\u003etrim\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/trim","id":"sidebar-nav-item-99","path":"/language/functions/trim"},{"title":"\u003ccode\u003etrimprefix\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/trimprefix","id":"sidebar-nav-item-100","path":"/language/functions/trimprefix"},{"title":"\u003ccode\u003etrimsuffix\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/trimsuffix","id":"sidebar-nav-item-101","path":"/language/functions/trimsuffix"},{"title":"\u003ccode\u003etrimspace\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/trimspace","id":"sidebar-nav-item-102","path":"/language/functions/trimspace"},{"title":"\u003ccode\u003eupper\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/upper","id":"sidebar-nav-item-103","path":"/language/functions/upper"}],"id":"sidebar-nav-item-82"},{"title":"Collection Functions","routes":[{"title":"\u003ccode\u003ealltrue\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/alltrue","id":"sidebar-nav-item-105","path":"/language/functions/alltrue"},{"title":"\u003ccode\u003eanytrue\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/anytrue","id":"sidebar-nav-item-106","path":"/language/functions/anytrue"},{"title":"\u003ccode\u003echunklist\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/chunklist","id":"sidebar-nav-item-107","path":"/language/functions/chunklist"},{"title":"\u003ccode\u003ecoalesce\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/coalesce","id":"sidebar-nav-item-108","path":"/language/functions/coalesce"},{"title":"\u003ccode\u003ecoalescelist\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/coalescelist","id":"sidebar-nav-item-109","path":"/language/functions/coalescelist"},{"title":"\u003ccode\u003ecompact\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/compact","id":"sidebar-nav-item-110","path":"/language/functions/compact"},{"title":"\u003ccode\u003econcat\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/concat","id":"sidebar-nav-item-111","path":"/language/functions/concat"},{"title":"\u003ccode\u003econtains\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/contains","id":"sidebar-nav-item-112","path":"/language/functions/contains"},{"title":"\u003ccode\u003edistinct\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/distinct","id":"sidebar-nav-item-113","path":"/language/functions/distinct"},{"title":"\u003ccode\u003eelement\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/element","id":"sidebar-nav-item-114","path":"/language/functions/element"},{"title":"\u003ccode\u003eflatten\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/flatten","id":"sidebar-nav-item-115","path":"/language/functions/flatten"},{"title":"\u003ccode\u003eindex\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/index_function","id":"sidebar-nav-item-116","path":"/language/functions/index_function"},{"title":"\u003ccode\u003ekeys\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/keys","id":"sidebar-nav-item-117","path":"/language/functions/keys"},{"title":"\u003ccode\u003elength\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/length","id":"sidebar-nav-item-118","path":"/language/functions/length"},{"title":"\u003ccode\u003elist\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/list","id":"sidebar-nav-item-119","path":"/language/functions/list"},{"title":"\u003ccode\u003elookup\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/lookup","id":"sidebar-nav-item-120","path":"/language/functions/lookup"},{"title":"\u003ccode\u003emap\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/map","id":"sidebar-nav-item-121","path":"/language/functions/map"},{"title":"\u003ccode\u003ematchkeys\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/matchkeys","id":"sidebar-nav-item-122","path":"/language/functions/matchkeys"},{"title":"\u003ccode\u003emerge\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/merge","id":"sidebar-nav-item-123","path":"/language/functions/merge"},{"title":"\u003ccode\u003eone\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/one","id":"sidebar-nav-item-124","path":"/language/functions/one"},{"title":"\u003ccode\u003erange\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/range","id":"sidebar-nav-item-125","path":"/language/functions/range"},{"title":"\u003ccode\u003ereverse\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/reverse","id":"sidebar-nav-item-126","path":"/language/functions/reverse"},{"title":"\u003ccode\u003esetintersection\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/setintersection","id":"sidebar-nav-item-127","path":"/language/functions/setintersection"},{"title":"\u003ccode\u003esetproduct\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/setproduct","id":"sidebar-nav-item-128","path":"/language/functions/setproduct"},{"title":"\u003ccode\u003esetsubtract\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/setsubtract","id":"sidebar-nav-item-129","path":"/language/functions/setsubtract"},{"title":"\u003ccode\u003esetunion\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/setunion","id":"sidebar-nav-item-130","path":"/language/functions/setunion"},{"title":"\u003ccode\u003eslice\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/slice","id":"sidebar-nav-item-131","path":"/language/functions/slice"},{"title":"\u003ccode\u003esort\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/sort","id":"sidebar-nav-item-132","path":"/language/functions/sort"},{"title":"\u003ccode\u003esum\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/sum","id":"sidebar-nav-item-133","path":"/language/functions/sum"},{"title":"\u003ccode\u003etranspose\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/transpose","id":"sidebar-nav-item-134","path":"/language/functions/transpose"},{"title":"\u003ccode\u003evalues\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/values","id":"sidebar-nav-item-135","path":"/language/functions/values"},{"title":"\u003ccode\u003ezipmap\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/zipmap","id":"sidebar-nav-item-136","path":"/language/functions/zipmap"}],"id":"sidebar-nav-item-104"},{"title":"Encoding Functions","routes":[{"title":"\u003ccode\u003ebase64decode\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/base64decode","id":"sidebar-nav-item-138","path":"/language/functions/base64decode"},{"title":"\u003ccode\u003ebase64encode\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/base64encode","id":"sidebar-nav-item-139","path":"/language/functions/base64encode"},{"title":"\u003ccode\u003ebase64gzip\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/base64gzip","id":"sidebar-nav-item-140","path":"/language/functions/base64gzip"},{"title":"\u003ccode\u003ecsvdecode\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/csvdecode","id":"sidebar-nav-item-141","path":"/language/functions/csvdecode"},{"title":"\u003ccode\u003ejsondecode\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/jsondecode","id":"sidebar-nav-item-142","path":"/language/functions/jsondecode"},{"title":"\u003ccode\u003ejsonencode\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/jsonencode","id":"sidebar-nav-item-143","path":"/language/functions/jsonencode"},{"title":"\u003ccode\u003etextdecodebase64\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/textdecodebase64","id":"sidebar-nav-item-144","path":"/language/functions/textdecodebase64"},{"title":"\u003ccode\u003etextencodebase64\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/textencodebase64","id":"sidebar-nav-item-145","path":"/language/functions/textencodebase64"},{"title":"\u003ccode\u003eurlencode\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/urlencode","id":"sidebar-nav-item-146","path":"/language/functions/urlencode"},{"title":"\u003ccode\u003eyamldecode\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/yamldecode","id":"sidebar-nav-item-147","path":"/language/functions/yamldecode"},{"title":"\u003ccode\u003eyamlencode\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/yamlencode","id":"sidebar-nav-item-148","path":"/language/functions/yamlencode"}],"id":"sidebar-nav-item-137"},{"title":"Filesystem Functions","routes":[{"title":"\u003ccode\u003eabspath\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/abspath","id":"sidebar-nav-item-150","path":"/language/functions/abspath"},{"title":"\u003ccode\u003edirname\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/dirname","id":"sidebar-nav-item-151","path":"/language/functions/dirname"},{"title":"\u003ccode\u003epathexpand\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/pathexpand","id":"sidebar-nav-item-152","path":"/language/functions/pathexpand"},{"title":"\u003ccode\u003ebasename\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/basename","id":"sidebar-nav-item-153","path":"/language/functions/basename"},{"title":"\u003ccode\u003efile\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/file","id":"sidebar-nav-item-154","path":"/language/functions/file"},{"title":"\u003ccode\u003efileexists\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/fileexists","id":"sidebar-nav-item-155","path":"/language/functions/fileexists"},{"title":"\u003ccode\u003efileset\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/fileset","id":"sidebar-nav-item-156","path":"/language/functions/fileset"},{"title":"\u003ccode\u003efilebase64\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/filebase64","id":"sidebar-nav-item-157","path":"/language/functions/filebase64"},{"title":"\u003ccode\u003etemplatefile\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/templatefile","id":"sidebar-nav-item-158","path":"/language/functions/templatefile"}],"id":"sidebar-nav-item-149"},{"title":"Date and Time Functions","routes":[{"title":"\u003ccode\u003eformatdate\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/formatdate","id":"sidebar-nav-item-160","path":"/language/functions/formatdate"},{"title":"\u003ccode\u003eplantimestamp\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/plantimestamp","id":"sidebar-nav-item-161","path":"/language/functions/plantimestamp"},{"title":"\u003ccode\u003etimeadd\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/timeadd","id":"sidebar-nav-item-162","path":"/language/functions/timeadd"},{"title":"\u003ccode\u003etimecmp\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/timecmp","id":"sidebar-nav-item-163","path":"/language/functions/timecmp"},{"title":"\u003ccode\u003etimestamp\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/timestamp","id":"sidebar-nav-item-164","path":"/language/functions/timestamp"}],"id":"sidebar-nav-item-159"},{"title":"Hash and Crypto Functions","routes":[{"title":"\u003ccode\u003ebase64sha256\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/base64sha256","id":"sidebar-nav-item-166","path":"/language/functions/base64sha256"},{"title":"\u003ccode\u003ebase64sha512\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/base64sha512","id":"sidebar-nav-item-167","path":"/language/functions/base64sha512"},{"title":"\u003ccode\u003ebcrypt\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/bcrypt","id":"sidebar-nav-item-168","path":"/language/functions/bcrypt"},{"title":"\u003ccode\u003efilebase64sha256\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/filebase64sha256","id":"sidebar-nav-item-169","path":"/language/functions/filebase64sha256"},{"title":"\u003ccode\u003efilebase64sha512\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/filebase64sha512","id":"sidebar-nav-item-170","path":"/language/functions/filebase64sha512"},{"title":"\u003ccode\u003efilemd5\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/filemd5","id":"sidebar-nav-item-171","path":"/language/functions/filemd5"},{"title":"\u003ccode\u003efilesha1\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/filesha1","id":"sidebar-nav-item-172","path":"/language/functions/filesha1"},{"title":"\u003ccode\u003efilesha256\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/filesha256","id":"sidebar-nav-item-173","path":"/language/functions/filesha256"},{"title":"\u003ccode\u003efilesha512\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/filesha512","id":"sidebar-nav-item-174","path":"/language/functions/filesha512"},{"title":"\u003ccode\u003emd5\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/md5","id":"sidebar-nav-item-175","path":"/language/functions/md5"},{"title":"\u003ccode\u003ersadecrypt\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/rsadecrypt","id":"sidebar-nav-item-176","path":"/language/functions/rsadecrypt"},{"title":"\u003ccode\u003esha1\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/sha1","id":"sidebar-nav-item-177","path":"/language/functions/sha1"},{"title":"\u003ccode\u003esha256\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/sha256","id":"sidebar-nav-item-178","path":"/language/functions/sha256"},{"title":"\u003ccode\u003esha512\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/sha512","id":"sidebar-nav-item-179","path":"/language/functions/sha512"},{"title":"\u003ccode\u003euuid\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/uuid","id":"sidebar-nav-item-180","path":"/language/functions/uuid"},{"title":"\u003ccode\u003euuidv5\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/uuidv5","id":"sidebar-nav-item-181","path":"/language/functions/uuidv5"}],"id":"sidebar-nav-item-165"},{"title":"IP Network Functions","routes":[{"title":"\u003ccode\u003ecidrhost\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/cidrhost","id":"sidebar-nav-item-183","path":"/language/functions/cidrhost"},{"title":"\u003ccode\u003ecidrnetmask\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/cidrnetmask","id":"sidebar-nav-item-184","path":"/language/functions/cidrnetmask"},{"title":"\u003ccode\u003ecidrsubnet\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/cidrsubnet","id":"sidebar-nav-item-185","path":"/language/functions/cidrsubnet"},{"title":"\u003ccode\u003ecidrsubnets\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/cidrsubnets","id":"sidebar-nav-item-186","path":"/language/functions/cidrsubnets"}],"id":"sidebar-nav-item-182"},{"title":"Type Conversion Functions","routes":[{"title":"\u003ccode\u003ecan\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/can","id":"sidebar-nav-item-188","path":"/language/functions/can"},{"title":"\u003ccode\u003enonsensitive\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/nonsensitive","id":"sidebar-nav-item-189","path":"/language/functions/nonsensitive"},{"title":"\u003ccode\u003esensitive\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/sensitive","id":"sidebar-nav-item-190","path":"/language/functions/sensitive"},{"title":"\u003ccode\u003etobool\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/tobool","id":"sidebar-nav-item-191","path":"/language/functions/tobool"},{"title":"\u003ccode\u003etolist\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/tolist","id":"sidebar-nav-item-192","path":"/language/functions/tolist"},{"title":"\u003ccode\u003etomap\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/tomap","id":"sidebar-nav-item-193","path":"/language/functions/tomap"},{"title":"\u003ccode\u003etonumber\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/tonumber","id":"sidebar-nav-item-194","path":"/language/functions/tonumber"},{"title":"\u003ccode\u003etoset\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/toset","id":"sidebar-nav-item-195","path":"/language/functions/toset"},{"title":"\u003ccode\u003etostring\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/tostring","id":"sidebar-nav-item-196","path":"/language/functions/tostring"},{"title":"\u003ccode\u003etry\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/try","id":"sidebar-nav-item-197","path":"/language/functions/try"},{"title":"\u003ccode\u003etype\u003c/code\u003e","href":null,"fullPath":"/terraform/language/functions/type","id":"sidebar-nav-item-198","path":"/language/functions/type"}],"id":"sidebar-nav-item-187"}],"id":"sidebar-nav-item-70"},{"title":"Terraform Settings","routes":[{"title":"Overview","path":"settings","filePath":"../docs/language/settings/index.mdx","fullPath":"/terraform/language/settings","id":"sidebar-nav-item-200"},{"title":"Terraform Cloud","path":"settings/terraform-cloud","filePath":"../docs/language/settings/terraform-cloud.mdx","fullPath":"/terraform/language/settings/terraform-cloud","id":"sidebar-nav-item-201"},{"title":"Backends","routes":[{"title":"Backend Configuration","path":"settings/backends/configuration","filePath":"../docs/language/settings/backends/configuration.mdx","fullPath":"/terraform/language/settings/backends/configuration","id":"sidebar-nav-item-203"},{"title":"Available Backends","routes":[{"title":"local","href":null,"fullPath":"/terraform/language/settings/backends/local","id":"sidebar-nav-item-205","path":"/language/settings/backends/local"},{"title":"remote","href":null,"fullPath":"/terraform/language/settings/backends/remote","id":"sidebar-nav-item-206","path":"/language/settings/backends/remote"},{"title":"azurerm","href":null,"fullPath":"/terraform/language/settings/backends/azurerm","id":"sidebar-nav-item-207","path":"/language/settings/backends/azurerm"},{"title":"consul","href":null,"fullPath":"/terraform/language/settings/backends/consul","id":"sidebar-nav-item-208","path":"/language/settings/backends/consul"},{"title":"cos","href":null,"fullPath":"/terraform/language/settings/backends/cos","id":"sidebar-nav-item-209","path":"/language/settings/backends/cos"},{"title":"gcs","href":null,"fullPath":"/terraform/language/settings/backends/gcs","id":"sidebar-nav-item-210","path":"/language/settings/backends/gcs"},{"title":"http","href":null,"fullPath":"/terraform/language/settings/backends/http","id":"sidebar-nav-item-211","path":"/language/settings/backends/http"},{"title":"Kubernetes","href":null,"fullPath":"/terraform/language/settings/backends/kubernetes","id":"sidebar-nav-item-212","path":"/language/settings/backends/kubernetes"},{"title":"oss","href":null,"fullPath":"/terraform/language/settings/backends/oss","id":"sidebar-nav-item-213","path":"/language/settings/backends/oss"},{"title":"pg","href":null,"fullPath":"/terraform/language/settings/backends/pg","id":"sidebar-nav-item-214","path":"/language/settings/backends/pg"},{"title":"s3","href":null,"fullPath":"/terraform/language/settings/backends/s3","id":"sidebar-nav-item-215","path":"/language/settings/backends/s3"}],"id":"sidebar-nav-item-204"}],"id":"sidebar-nav-item-202"}],"id":"sidebar-nav-item-199"},{"title":"State","routes":[{"title":"Overview","path":"state","filePath":"../docs/language/state/index.mdx","fullPath":"/terraform/language/state","id":"sidebar-nav-item-217"},{"title":"Purpose","path":"state/purpose","filePath":"../docs/language/state/purpose.mdx","fullPath":"/terraform/language/state/purpose","id":"sidebar-nav-item-218"},{"title":"The \u003ccode\u003eterraform_remote_state\u003c/code\u003e Data Source","path":"state/remote-state-data","filePath":"../docs/language/state/remote-state-data.mdx","fullPath":"/terraform/language/state/remote-state-data","id":"sidebar-nav-item-219"},{"title":"Backends: State Storage and Locking","path":"state/backends","filePath":"../docs/language/state/backends.mdx","fullPath":"/terraform/language/state/backends","id":"sidebar-nav-item-220"},{"title":"Import Existing Resources","path":"state/import","filePath":"../docs/language/state/import.mdx","fullPath":"/terraform/language/state/import","id":"sidebar-nav-item-221"},{"title":"Locking","path":"state/locking","filePath":"../docs/language/state/locking.mdx","fullPath":"/terraform/language/state/locking","id":"sidebar-nav-item-222"},{"title":"Workspaces","path":"state/workspaces","filePath":"../docs/language/state/workspaces.mdx","fullPath":"/terraform/language/state/workspaces","id":"sidebar-nav-item-223"},{"title":"Remote State","path":"state/remote","filePath":"../docs/language/state/remote.mdx","fullPath":"/terraform/language/state/remote","id":"sidebar-nav-item-224"},{"title":"Sensitive Data","path":"state/sensitive-data","filePath":"../docs/language/state/sensitive-data.mdx","fullPath":"/terraform/language/state/sensitive-data","id":"sidebar-nav-item-225"}],"id":"sidebar-nav-item-216"},{"title":"Upgrading to Terraform v1.4","path":"upgrade-guides","filePath":"../docs/language/upgrade-guides/index.mdx","fullPath":"/terraform/language/upgrade-guides","id":"sidebar-nav-item-226"},{"title":"v1.x Compatibility Promises","path":"v1-compatibility-promises","filePath":"../docs/language/v1-compatibility-promises.mdx","fullPath":"/terraform/language/v1-compatibility-promises","id":"sidebar-nav-item-227"},{"divider":true,"id":"sidebar-nav-item-228"},{"title":"Terraform Internals","href":null,"fullPath":"/terraform/internals","id":"sidebar-nav-item-229","path":"/internals"}],"title":"Configuration Language","visuallyHideTitle":true}],"mainWidth":"narrow","githubFileUrl":"https://github.com/hashicorp/terraform/blob/main/website/../docs/language/settings/backends/s3.mdx"},"metadata":{"title":"Backend Type: s3","description":"Terraform can store state remotely in S3 and lock that state with DynamoDB.","layout":null},"outlineItems":[{"title":"S3","url":"#s3","dataHeapTrack":"toc-list-item-index-0"},{"title":"Example Configuration","url":"#example-configuration","dataHeapTrack":"toc-list-item-index-1"},{"title":"Data Source Configuration","url":"#data-source-configuration","dataHeapTrack":"toc-list-item-index-2"},{"title":"Configuration","url":"#configuration","dataHeapTrack":"toc-list-item-index-3"},{"title":"Multi-account AWS Architecture","url":"#multi-account-aws-architecture","dataHeapTrack":"toc-list-item-index-4"}],"pageHeading":{"id":"s3","title":"S3"},"mdxSource":{"compiledSource":"var c=Object.defineProperty,d=Object.defineProperties;var u=Object.getOwnPropertyDescriptors;var i=Object.getOwnPropertySymbols;var o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;var p=(a,n,t)=\u003en in a?c(a,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[n]=t,e=(a,n)=\u003e{for(var t in n||(n={}))o.call(n,t)\u0026\u0026p(a,t,n[t]);if(i)for(var t of i(n))r.call(n,t)\u0026\u0026p(a,t,n[t]);return a},l=(a,n)=\u003ed(a,u(n));var m=(a,n)=\u003e{var t={};for(var s in a)o.call(a,s)\u0026\u0026n.indexOf(s)\u003c0\u0026\u0026(t[s]=a[s]);if(a!=null\u0026\u0026i)for(var s of i(a))n.indexOf(s)\u003c0\u0026\u0026r.call(a,s)\u0026\u0026(t[s]=a[s]);return t};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(t){var s=t,{components:a}=s,n=m(s,[\"components\"]);return mdx(MDXLayout,l(e(e({},layoutProps),n),{components:a,mdxType:\"MDXLayout\"}),mdx(\"p\",null,`Stores the state as a given key in a given bucket on\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"https://aws.amazon.com/s3/\"}),\"Amazon S3\"),`.\nThis backend also supports state locking and consistency checking via\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"https://aws.amazon.com/dynamodb/\"}),\"Dynamo DB\"),`, which can be enabled by setting\nthe `,mdx(\"inlineCode\",{parentName:\"p\"},\"dynamodb_table\"),` field to an existing DynamoDB table name.\nA single DynamoDB table can be used to lock multiple remote state files. Terraform generates key names that include the values of the `,mdx(\"inlineCode\",{parentName:\"p\"},\"bucket\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"key\"),\" variables.\"),mdx(\"div\",e({},{className:\"alert alert-warning g-type-body\"}),mdx(\"p\",{parentName:\"div\"},\"\",mdx(\"strong\",{parentName:\"p\"},\"Warning!\"),` It is highly recommended that you enable\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/manage-versioning-examples.html\"}),\"Bucket Versioning\"),`\non the S3 bucket to allow for state recovery in the case of accidental deletions and human error.`)),mdx(\"h2\",e({},{id:\"example-configuration\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#example-configuration\",\"aria-label\":\"example configuration permalink\"}),\"\\xBB\"),\"Example Configuration\"),mdx(\"pre\",e({},{className:\"language-hcl\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"terraform\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"backend\",mdx(\"span\",e({parentName:\"span\"},{className:\"token type variable\"}),' \"s3\" ')),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"bucket\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"mybucket\"'),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"key\"),\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"path/to/my/key\"'),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"region\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"us-east-1\"'),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",null,\"This assumes we have a bucket created called \",mdx(\"inlineCode\",{parentName:\"p\"},\"mybucket\"),`. The\nTerraform state is written to the key `,mdx(\"inlineCode\",{parentName:\"p\"},\"path/to/my/key\"),\".\"),mdx(\"p\",null,`Note that for the access credentials we recommend using a\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"/terraform/language/settings/backends/configuration#partial-configuration\"}),\"partial configuration\"),\".\"),mdx(\"h3\",e({},{id:\"s3-bucket-permissions\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#s3-bucket-permissions\",\"aria-label\":\"s3 bucket permissions permalink\"}),\"\\xBB\"),\"S3 Bucket Permissions\"),mdx(\"p\",null,`Terraform will need the following AWS IAM permissions on\nthe target backend bucket:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"s3-listbucket\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#s3-listbucket\",\"aria-label\":\"s3 listbucket permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"s3:ListBucket\")),\" on \",mdx(\"inlineCode\",{parentName:\"li\"},\"arn:aws:s3:::mybucket\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"s3-getobject\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#s3-getobject\",\"aria-label\":\"s3 getobject permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"s3:GetObject\")),\" on \",mdx(\"inlineCode\",{parentName:\"li\"},\"arn:aws:s3:::mybucket/path/to/my/key\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"s3-putobject\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#s3-putobject\",\"aria-label\":\"s3 putobject permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"s3:PutObject\")),\" on \",mdx(\"inlineCode\",{parentName:\"li\"},\"arn:aws:s3:::mybucket/path/to/my/key\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"s3-deleteobject\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#s3-deleteobject\",\"aria-label\":\"s3 deleteobject permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"s3:DeleteObject\")),\" on \",mdx(\"inlineCode\",{parentName:\"li\"},\"arn:aws:s3:::mybucket/path/to/my/key\"))),mdx(\"p\",null,\"This is seen in the following AWS IAM Statement:\"),mdx(\"pre\",e({},{className:\"language-json\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-json\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Version\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"2012-10-17\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Statement\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Effect\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"Allow\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Action\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"s3:ListBucket\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Resource\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"arn:aws:s3:::mybucket\"'),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Effect\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"Allow\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Action\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"s3:GetObject\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"s3:PutObject\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"s3:DeleteObject\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Resource\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"arn:aws:s3:::mybucket/path/to/my/key\"'),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"div\",e({},{className:\"alert alert-info g-type-body\"}),mdx(\"p\",{parentName:\"div\"},\"\",mdx(\"strong\",{parentName:\"p\"},\"Note:\"),` AWS can control access to S3 buckets with either IAM policies\nattached to users/groups/roles (like the example above) or resource policies\nattached to bucket objects (which look similar but also require a `,mdx(\"inlineCode\",{parentName:\"p\"},\"Principal\"),` to\nindicate which entity has those permissions). For more details, see Amazon's\ndocumentation about\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/s3-access-control.html\"}),\"S3 access control\"),\".\")),mdx(\"h3\",e({},{id:\"dynamodb-table-permissions\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#dynamodb-table-permissions\",\"aria-label\":\"dynamodb table permissions permalink\"}),\"\\xBB\"),\"DynamoDB Table Permissions\"),mdx(\"p\",null,`If you are using state locking, Terraform will need the following AWS IAM\npermissions on the DynamoDB table (`,mdx(\"inlineCode\",{parentName:\"p\"},\"arn:aws:dynamodb:::table/mytable\"),\"):\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"dynamodb-describetable\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#dynamodb-describetable\",\"aria-label\":\"dynamodb describetable permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"dynamodb:DescribeTable\"))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"dynamodb-getitem\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#dynamodb-getitem\",\"aria-label\":\"dynamodb getitem permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"dynamodb:GetItem\"))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"dynamodb-putitem\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#dynamodb-putitem\",\"aria-label\":\"dynamodb putitem permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"dynamodb:PutItem\"))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"dynamodb-deleteitem\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#dynamodb-deleteitem\",\"aria-label\":\"dynamodb deleteitem permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"dynamodb:DeleteItem\")))),mdx(\"p\",null,\"This is seen in the following AWS IAM Statement:\"),mdx(\"pre\",e({},{className:\"language-json\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-json\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Version\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"2012-10-17\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Statement\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Effect\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"Allow\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Action\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"dynamodb:DescribeTable\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"dynamodb:GetItem\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"dynamodb:PutItem\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"dynamodb:DeleteItem\"'),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Resource\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"arn:aws:dynamodb:*:*:table/mytable\"'),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"h2\",e({},{id:\"data-source-configuration\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#data-source-configuration\",\"aria-label\":\"data source configuration permalink\"}),\"\\xBB\"),\"Data Source Configuration\"),mdx(\"p\",null,`To make use of the S3 remote state in another configuration, use the\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"/terraform/language/state/remote-state-data\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"terraform_remote_state\"),` data\nsource`),\".\"),mdx(\"pre\",e({},{className:\"language-hcl\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"data \",mdx(\"span\",e({parentName:\"span\"},{className:\"token type variable\"}),'\"terraform_remote_state\"')),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"network\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"backend\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"s3\"'),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"config\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"bucket\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"terraform-state-prod\"'),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"key\"),\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"network/terraform.tfstate\"'),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"region\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"us-east-1\"'),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",null,\"The \",mdx(\"inlineCode\",{parentName:\"p\"},\"terraform_remote_state\"),` data source will return all of the root module\noutputs defined in the referenced remote state (but not any outputs from\nnested modules unless they are explicitly output again in the root). An\nexample output might look like:`),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),\"data.terraform_remote_state.network:\",`\n`,\"  id = 2016-10-29 01:57:59.780010914 +0000 UTC\",`\n`,\"  addresses.# = 2\",`\n`,\"  addresses.0 = 52.207.220.222\",`\n`,\"  addresses.1 = 54.196.78.166\",`\n`,\"  backend = s3\",`\n`,\"  config.% = 3\",`\n`,\"  config.bucket = terraform-state-prod\",`\n`,\"  config.key = network/terraform.tfstate\",`\n`,\"  config.region = us-east-1\",`\n`,\"  elb_address = web-elb-790251200.us-east-1.elb.amazonaws.com\",`\n`,\"  public_subnet_id = subnet-1e05dd33\",`\n`)),mdx(\"h2\",e({},{id:\"configuration\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#configuration\",\"aria-label\":\"configuration permalink\"}),\"\\xBB\"),\"Configuration\"),mdx(\"p\",null,\"This backend requires the configuration of the AWS Region and S3 state storage. Other configuration, such as enabling DynamoDB state locking, is optional.\"),mdx(\"h3\",e({},{id:\"credentials-and-shared-configuration\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#credentials-and-shared-configuration\",\"aria-label\":\"credentials and shared configuration permalink\"}),\"\\xBB\"),\"Credentials and Shared Configuration\"),mdx(\"div\",e({},{className:\"alert alert-danger g-type-body\"}),mdx(\"p\",{parentName:\"div\"},\"\",mdx(\"strong\",{parentName:\"p\"},\"Warning:\"),\"  We recommend using environment variables to supply credentials and other sensitive data. If you use \",mdx(\"inlineCode\",{parentName:\"p\"},\"-backend-config\"),\" or hardcode these values directly in your configuration, Terraform will include these values in both the \",mdx(\"inlineCode\",{parentName:\"p\"},\".terraform\"),\" subdirectory and in plan files. Refer to \",mdx(\"a\",e({parentName:\"p\"},{href:\"/terraform/language/settings/backends/configuration#credentials-and-sensitive-data\"}),\"Credentials and Sensitive Data\"),\" for details.\")),mdx(\"p\",null,\"The following configuration is required:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"region\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#region\",\"aria-label\":\"region permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"region\")),\" - (Required) AWS Region of the S3 Bucket and DynamoDB Table (if used). This can also be sourced from the \",mdx(\"inlineCode\",{parentName:\"li\"},\"AWS_DEFAULT_REGION\"),\" and \",mdx(\"inlineCode\",{parentName:\"li\"},\"AWS_REGION\"),\" environment variables.\")),mdx(\"p\",null,\"The following configuration is optional:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"access_key\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#access_key\",\"aria-label\":\"access_key permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"access_key\")),\" - (Optional) AWS access key. If configured, must also configure \",mdx(\"inlineCode\",{parentName:\"li\"},\"secret_key\"),\". This can also be sourced from the \",mdx(\"inlineCode\",{parentName:\"li\"},\"AWS_ACCESS_KEY_ID\"),\" environment variable, AWS shared credentials file (e.g. \",mdx(\"inlineCode\",{parentName:\"li\"},\"~/.aws/credentials\"),\"), or AWS shared configuration file (e.g. \",mdx(\"inlineCode\",{parentName:\"li\"},\"~/.aws/config\"),\").\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"secret_key\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#secret_key\",\"aria-label\":\"secret_key permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"secret_key\")),\" - (Optional) AWS access key. If configured, must also configure \",mdx(\"inlineCode\",{parentName:\"li\"},\"access_key\"),\". This can also be sourced from the \",mdx(\"inlineCode\",{parentName:\"li\"},\"AWS_SECRET_ACCESS_KEY\"),\" environment variable, AWS shared credentials file (e.g. \",mdx(\"inlineCode\",{parentName:\"li\"},\"~/.aws/credentials\"),\"), or AWS shared configuration file (e.g. \",mdx(\"inlineCode\",{parentName:\"li\"},\"~/.aws/config\"),\").\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"iam_endpoint\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#iam_endpoint\",\"aria-label\":\"iam_endpoint permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"iam_endpoint\")),\" - (Optional) Custom endpoint for the AWS Identity and Access Management (IAM) API. This can also be sourced from the \",mdx(\"inlineCode\",{parentName:\"li\"},\"AWS_IAM_ENDPOINT\"),\" environment variable.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"max_retries\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#max_retries\",\"aria-label\":\"max_retries permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"max_retries\")),\" - (Optional) The maximum number of times an AWS API request is retried on retryable failure. Defaults to 5.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"profile\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#profile\",\"aria-label\":\"profile permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"profile\")),\" - (Optional) Name of AWS profile in AWS shared credentials file (e.g. \",mdx(\"inlineCode\",{parentName:\"li\"},\"~/.aws/credentials\"),\") or AWS shared configuration file (e.g. \",mdx(\"inlineCode\",{parentName:\"li\"},\"~/.aws/config\"),\") to use for credentials and/or configuration. This can also be sourced from the \",mdx(\"inlineCode\",{parentName:\"li\"},\"AWS_PROFILE\"),\" environment variable.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"shared_credentials_file\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#shared_credentials_file\",\"aria-label\":\"shared_credentials_file permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"shared_credentials_file\")),\"  - (Optional) Path to the AWS shared credentials file. Defaults to \",mdx(\"inlineCode\",{parentName:\"li\"},\"~/.aws/credentials\"),\".\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"skip_credentials_validation\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#skip_credentials_validation\",\"aria-label\":\"skip_credentials_validation permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"skip_credentials_validation\")),\" - (Optional) Skip credentials validation via the STS API.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"skip_region_validation\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#skip_region_validation\",\"aria-label\":\"skip_region_validation permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"skip_region_validation\")),\" - (Optional) Skip validation of provided region name.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"skip_metadata_api_check\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#skip_metadata_api_check\",\"aria-label\":\"skip_metadata_api_check permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"skip_metadata_api_check\")),\" - (Optional) Skip usage of EC2 Metadata API.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"sts_endpoint\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#sts_endpoint\",\"aria-label\":\"sts_endpoint permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"sts_endpoint\")),\" - (Optional) Custom endpoint for the AWS Security Token Service (STS) API. This can also be sourced from the \",mdx(\"inlineCode\",{parentName:\"li\"},\"AWS_STS_ENDPOINT\"),\" environment variable.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"token\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#token\",\"aria-label\":\"token permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"token\")),\" - (Optional) Multi-Factor Authentication (MFA) token. This can also be sourced from the \",mdx(\"inlineCode\",{parentName:\"li\"},\"AWS_SESSION_TOKEN\"),\" environment variable.\")),mdx(\"h4\",e({},{id:\"assume-role-configuration\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#assume-role-configuration\",\"aria-label\":\"assume role configuration permalink\"}),\"\\xBB\"),\"Assume Role Configuration\"),mdx(\"p\",null,\"The following configuration is optional:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"assume_role_duration_seconds\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#assume_role_duration_seconds\",\"aria-label\":\"assume_role_duration_seconds permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"assume_role_duration_seconds\")),\" - (Optional) Number of seconds to restrict the assume role session duration.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"assume_role_policy\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#assume_role_policy\",\"aria-label\":\"assume_role_policy permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"assume_role_policy\")),\" - (Optional) IAM Policy JSON describing further restricting permissions for the IAM Role being assumed.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"assume_role_policy_arns\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#assume_role_policy_arns\",\"aria-label\":\"assume_role_policy_arns permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"assume_role_policy_arns\")),\" - (Optional) Set of Amazon Resource Names (ARNs) of IAM Policies describing further restricting permissions for the IAM Role being assumed.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"assume_role_tags\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#assume_role_tags\",\"aria-label\":\"assume_role_tags permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"assume_role_tags\")),\" - (Optional) Map of assume role session tags.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"assume_role_transitive_tag_keys\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#assume_role_transitive_tag_keys\",\"aria-label\":\"assume_role_transitive_tag_keys permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"assume_role_transitive_tag_keys\")),\" - (Optional) Set of assume role session tag keys to pass to any subsequent sessions.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"external_id\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#external_id\",\"aria-label\":\"external_id permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"external_id\")),\" - (Optional) External identifier to use when assuming the role.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"role_arn\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#role_arn\",\"aria-label\":\"role_arn permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"role_arn\")),\" - (Optional) Amazon Resource Name (ARN) of the IAM Role to assume.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"session_name\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#session_name\",\"aria-label\":\"session_name permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"session_name\")),\" - (Optional) Session name to use when assuming the role.\")),mdx(\"h3\",e({},{id:\"s3-state-storage\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#s3-state-storage\",\"aria-label\":\"s3 state storage permalink\"}),\"\\xBB\"),\"S3 State Storage\"),mdx(\"p\",null,\"The following configuration is required:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"bucket\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#bucket\",\"aria-label\":\"bucket permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"bucket\")),\" - (Required) Name of the S3 Bucket.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"key\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#key\",\"aria-label\":\"key permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"key\")),\" - (Required) Path to the state file inside the S3 Bucket. When using a non-default \",mdx(\"a\",e({parentName:\"li\"},{href:\"/terraform/language/state/workspaces\"}),\"workspace\"),\", the state path will be \",mdx(\"inlineCode\",{parentName:\"li\"},\"/workspace_key_prefix/workspace_name/key\"),\" (see also the \",mdx(\"inlineCode\",{parentName:\"li\"},\"workspace_key_prefix\"),\" configuration).\")),mdx(\"p\",null,\"The following configuration is optional:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"acl\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#acl\",\"aria-label\":\"acl permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"acl\")),\" - (Optional) \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/acl-overview.html#canned-acl\"}),\"Canned ACL\"),\" to be applied to the state file.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"encrypt\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#encrypt\",\"aria-label\":\"encrypt permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"encrypt\")),\" - (Optional) Enable \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/UsingServerSideEncryption.html\"}),\"server side encryption\"),\" of the state file.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"endpoint\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#endpoint\",\"aria-label\":\"endpoint permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"endpoint\")),\" - (Optional) Custom endpoint for the AWS S3 API. This can also be sourced from the \",mdx(\"inlineCode\",{parentName:\"li\"},\"AWS_S3_ENDPOINT\"),\" environment variable.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"force_path_style\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#force_path_style\",\"aria-label\":\"force_path_style permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"force_path_style\")),\" - (Optional) Enable path-style S3 URLs (\",mdx(\"inlineCode\",{parentName:\"li\"},\"https://\u003cHOST\u003e/\u003cBUCKET\u003e\"),\" instead of \",mdx(\"inlineCode\",{parentName:\"li\"},\"https://\u003cBUCKET\u003e.\u003cHOST\u003e\"),\").\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"kms_key_id\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#kms_key_id\",\"aria-label\":\"kms_key_id permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"kms_key_id\")),\" - (Optional) Amazon Resource Name (ARN) of a Key Management Service (KMS) Key to use for encrypting the state. Note that if this value is specified, Terraform will need \",mdx(\"inlineCode\",{parentName:\"li\"},\"kms:Encrypt\"),\", \",mdx(\"inlineCode\",{parentName:\"li\"},\"kms:Decrypt\"),\" and \",mdx(\"inlineCode\",{parentName:\"li\"},\"kms:GenerateDataKey\"),\" permissions on this KMS key.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"sse_customer_key\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#sse_customer_key\",\"aria-label\":\"sse_customer_key permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"sse_customer_key\")),\" - (Optional) The key to use for encrypting state with \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/ServerSideEncryptionCustomerKeys.html\"}),\"Server-Side Encryption with Customer-Provided Keys (SSE-C)\"),\". This is the base64-encoded value of the key, which must decode to 256 bits. This can also be sourced from the \",mdx(\"inlineCode\",{parentName:\"li\"},\"AWS_SSE_CUSTOMER_KEY\"),\" environment variable, which is recommended due to the sensitivity of the value. Setting it inside a terraform file will cause it to be persisted to disk in \",mdx(\"inlineCode\",{parentName:\"li\"},\"terraform.tfstate\"),\".\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"workspace_key_prefix\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#workspace_key_prefix\",\"aria-label\":\"workspace_key_prefix permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"workspace_key_prefix\")),\" - (Optional) Prefix applied to the state path inside the bucket. This is only relevant when using a non-default workspace. Defaults to \",mdx(\"inlineCode\",{parentName:\"li\"},\"env:\"),\".\")),mdx(\"h3\",e({},{id:\"dynamodb-state-locking\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#dynamodb-state-locking\",\"aria-label\":\"dynamodb state locking permalink\"}),\"\\xBB\"),\"DynamoDB State Locking\"),mdx(\"p\",null,\"The following configuration is optional:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"dynamodb_endpoint\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#dynamodb_endpoint\",\"aria-label\":\"dynamodb_endpoint permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"dynamodb_endpoint\")),\" - (Optional) Custom endpoint for the AWS DynamoDB API. This can also be sourced from the \",mdx(\"inlineCode\",{parentName:\"li\"},\"AWS_DYNAMODB_ENDPOINT\"),\" environment variable.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"dynamodb_table\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#dynamodb_table\",\"aria-label\":\"dynamodb_table permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"dynamodb_table\")),\" - (Optional) Name of DynamoDB Table to use for state locking and consistency. The table must have a partition key named \",mdx(\"inlineCode\",{parentName:\"li\"},\"LockID\"),\" with type of \",mdx(\"inlineCode\",{parentName:\"li\"},\"String\"),\". If not configured, state locking will be disabled.\")),mdx(\"h2\",e({},{id:\"multi-account-aws-architecture\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#multi-account-aws-architecture\",\"aria-label\":\"multi account aws architecture permalink\"}),\"\\xBB\"),\"Multi-account AWS Architecture\"),mdx(\"p\",null,`A common architectural pattern is for an organization to use a number of\nseparate AWS accounts to isolate different teams and environments. For example,\na \"staging\" system will often be deployed into a separate AWS account than\nits corresponding \"production\" system, to minimize the risk of the staging\nenvironment affecting production infrastructure, whether via rate limiting,\nmisconfigured access controls, or other unintended interactions.`),mdx(\"p\",null,`The S3 backend can be used in a number of different ways that make different\ntradeoffs between convenience, security, and isolation in such an organization.\nThis section describes one such approach that aims to find a good compromise\nbetween these tradeoffs, allowing use of\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"/terraform/language/state/workspaces\"}),\"Terraform's workspaces feature\"),` to switch\nconveniently between multiple isolated deployments of the same configuration.`),mdx(\"p\",null,`Use this section as a starting-point for your approach, but note that\nyou will probably need to make adjustments for the unique standards and\nregulations that apply to your organization. You will also need to make some\nadjustments to this approach to account for `,mdx(\"em\",{parentName:\"p\"},\"existing\"),` practices within your\norganization, if for example other tools have previously been used to manage\ninfrastructure.`),mdx(\"p\",null,`Terraform is an administrative tool that manages your infrastructure, and so\nideally the infrastructure that is used by Terraform should exist outside of\nthe infrastructure that Terraform manages. This can be achieved by creating a\nseparate `,mdx(\"em\",{parentName:\"p\"},\"administrative\"),` AWS account which contains the user accounts used by\nhuman operators and any infrastructure and tools used to manage the other\naccounts. Isolating shared administrative tools from your main environments\nhas a number of advantages, such as avoiding accidentally damaging the\nadministrative infrastructure while changing the target infrastructure, and\nreducing the risk that an attacker might abuse production infrastructure to\ngain access to the (usually more privileged) administrative infrastructure.`),mdx(\"h3\",e({},{id:\"administrative-account-setup\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#administrative-account-setup\",\"aria-label\":\"administrative account setup permalink\"}),\"\\xBB\"),\"Administrative Account Setup\"),mdx(\"p\",null,\"Your administrative AWS account will contain at least the following items:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"One or more \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_users.html\"}),\"IAM user\"),`\nfor system administrators that will log in to maintain infrastructure in\nthe other accounts.`),mdx(\"li\",{parentName:\"ul\"},\"Optionally, one or more \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_groups.html\"}),\"IAM groups\"),`\nto differentiate between different groups of users that have different\nlevels of access to the other AWS accounts.`),mdx(\"li\",{parentName:\"ul\"},\"An \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/UsingBucket.html\"}),\"S3 bucket\"),`\nthat will contain the Terraform state files for each workspace.`),mdx(\"li\",{parentName:\"ul\"},\"A \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/HowItWorks.CoreComponents.html#HowItWorks.CoreComponents.TablesItemsAttributes\"}),\"DynamoDB table\"),`\nthat will be used for locking to prevent concurrent operations on a single\nworkspace.`)),mdx(\"p\",null,`Provide the S3 bucket name and DynamoDB table name to Terraform within the\nS3 backend configuration using the `,mdx(\"inlineCode\",{parentName:\"p\"},\"bucket\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"dynamodb_table\"),` arguments\nrespectively, and configure a suitable `,mdx(\"inlineCode\",{parentName:\"p\"},\"workspace_key_prefix\"),` to contain\nthe states of the various workspaces that will subsequently be created for\nthis configuration.`),mdx(\"h3\",e({},{id:\"environment-account-setup\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#environment-account-setup\",\"aria-label\":\"environment account setup permalink\"}),\"\\xBB\"),\"Environment Account Setup\"),mdx(\"p\",null,`For the sake of this section, the term \"environment account\" refers to one\nof the accounts whose contents are managed by Terraform, separate from the\nadministrative account described above.`),mdx(\"p\",null,`Your environment accounts will eventually contain your own product-specific\ninfrastructure. Along with this it must contain one or more\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html\"}),\"IAM roles\"),`\nthat grant sufficient access for Terraform to perform the desired management\ntasks.`),mdx(\"h3\",e({},{id:\"delegating-access\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#delegating-access\",\"aria-label\":\"delegating access permalink\"}),\"\\xBB\"),\"Delegating Access\"),mdx(\"p\",null,`Each Administrator will run Terraform using credentials for their IAM user\nin the administrative account.\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"https://docs.aws.amazon.com/IAM/latest/UserGuide/tutorial_cross-account-with-roles.html\"}),\"IAM Role Delegation\"),`\nis used to grant these users access to the roles created in each environment\naccount.`),mdx(\"p\",null,`Full details on role delegation are covered in the AWS documentation linked\nabove. The most important details are:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Each role's \",mdx(\"em\",{parentName:\"li\"},\"Assume Role Policy\"),` must grant access to the administrative AWS\naccount, which creates a trust relationship with the administrative AWS\naccount so that its users may assume the role.`),mdx(\"li\",{parentName:\"ul\"},`The users or groups within the administrative account must also have a\npolicy that creates the converse relationship, allowing these users or groups\nto assume that role.`)),mdx(\"p\",null,`Since the purpose of the administrative account is only to host tools for\nmanaging other accounts, it is useful to give the administrative accounts\nrestricted access only to the specific operations needed to assume the\nenvironment account role and access the Terraform state. By blocking all\nother access, you remove the risk that user error will lead to staging or\nproduction resources being created in the administrative account by mistake.`),mdx(\"p\",null,`When configuring Terraform, use either environment variables or the standard\ncredentials file `,mdx(\"inlineCode\",{parentName:\"p\"},\"~/.aws/credentials\"),` to provide the administrator user's\nIAM credentials within the administrative account to both the S3 backend `,mdx(\"em\",{parentName:\"p\"},\"and\"),`\nto Terraform's AWS provider.`),mdx(\"p\",null,\"Use conditional configuration to pass a different \",mdx(\"inlineCode\",{parentName:\"p\"},\"assume_role\"),` value to\nthe AWS provider depending on the selected workspace. For example:`),mdx(\"pre\",e({},{className:\"language-hcl\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"variable\",mdx(\"span\",e({parentName:\"span\"},{className:\"token type variable\"}),' \"workspace_iam_roles\" ')),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"default\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"staging\"),\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"arn:aws:iam::STAGING-ACCOUNT-ID:role/Terraform\"'),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"production\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"arn:aws:iam::PRODUCTION-ACCOUNT-ID:role/Terraform\"'),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"provider\",mdx(\"span\",e({parentName:\"span\"},{className:\"token type variable\"}),' \"aws\" ')),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# No credentials explicitly set here because they come from either the\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# environment or the global credentials file.\"),`\n`,`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"assume_role\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"role_arn\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"',mdx(\"span\",e({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token keyword\"}),\"var\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token type variable\"}),\"workspace_iam_roles\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token keyword\"}),\"terraform\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token type variable\"}),\"workspace\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'\"'),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",null,`If workspace IAM roles are centrally managed and shared across many separate\nTerraform configurations, the role ARNs could also be obtained via a data\nsource such as `,mdx(\"a\",e({parentName:\"p\"},{href:\"/terraform/language/state/remote-state-data\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"terraform_remote_state\")),`\nto avoid repeating these values.`),mdx(\"h3\",e({},{id:\"creating-and-selecting-workspaces\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#creating-and-selecting-workspaces\",\"aria-label\":\"creating and selecting workspaces permalink\"}),\"\\xBB\"),\"Creating and Selecting Workspaces\"),mdx(\"p\",null,`With the necessary objects created and the backend configured, run\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"terraform init\"),` to initialize the backend and establish an initial workspace\ncalled \"default\". This workspace will not be used, but is created automatically\nby Terraform as a convenience for users who are not using the workspaces\nfeature.`),mdx(\"p\",null,\"Create a workspace corresponding to each key given in the \",mdx(\"inlineCode\",{parentName:\"p\"},\"workspace_iam_roles\"),`\nvariable value above:`),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),\"$ terraform workspace new staging\",`\n`,'Created and switched to workspace \"staging\"!',`\n`,`\n`,\"...\",`\n`,`\n`,\"$ terraform workspace new production\",`\n`,'Created and switched to workspace \"production\"!',`\n`,`\n`,\"...\",`\n`)),mdx(\"p\",null,\"Due to the \",mdx(\"inlineCode\",{parentName:\"p\"},\"assume_role\"),` setting in the AWS provider configuration, any\nmanagement operations for AWS resources will be performed via the configured\nrole in the appropriate environment AWS account. The backend operations, such\nas reading and writing the state from S3, will be performed directly as the\nadministrator's own user within the administrative account.`),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),\"$ terraform workspace select staging\",`\n`,\"$ terraform apply\",`\n`,\"...\",`\n`)),mdx(\"h3\",e({},{id:\"running-terraform-in-amazon-ec2\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#running-terraform-in-amazon-ec2\",\"aria-label\":\"running terraform in amazon ec2 permalink\"}),\"\\xBB\"),\"Running Terraform in Amazon EC2\"),mdx(\"p\",null,`Teams that make extensive use of Terraform for infrastructure management\noften `,mdx(\"a\",e({parentName:\"p\"},{href:\"/terraform/tutorials/automation/automate-terraform?utm_source=WEBSITE\u0026utm_medium=WEB_IO\u0026utm_offer=ARTICLE_PAGE\u0026utm_content=DOCS\"}),\"run Terraform in automation\"),`\nto ensure a consistent operating environment and to limit access to the\nvarious secrets and other sensitive information that Terraform configurations\ntend to require.`),mdx(\"p\",null,`When running Terraform in an automation tool running on an Amazon EC2 instance,\nconsider running this instance in the administrative account and using an\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_switch-role-ec2_instance-profiles.html\"}),\"instance profile\"),`\nin place of the various administrator IAM users suggested above. An IAM\ninstance profile can also be granted cross-account delegation access via\nan IAM policy, giving this instance the access it needs to run Terraform.`),mdx(\"p\",null,`To isolate access to different environment accounts, use a separate EC2\ninstance for each target account so that its access can be limited only to\nthe single account.`),mdx(\"p\",null,`Similar approaches can be taken with equivalent features in other AWS compute\nservices, such as ECS.`),mdx(\"h3\",e({},{id:\"protecting-access-to-workspace-state\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#protecting-access-to-workspace-state\",\"aria-label\":\"protecting access to workspace state permalink\"}),\"\\xBB\"),\"Protecting Access to Workspace State\"),mdx(\"p\",null,`In a simple implementation of the pattern described in the prior sections,\nall users have access to read and write states for all workspaces. In many\ncases it is desirable to apply more precise access constraints to the\nTerraform state objects in S3, so that for example only trusted administrators\nare allowed to modify the production state, or to control `,mdx(\"em\",{parentName:\"p\"},\"reading\"),` of a state\nthat contains sensitive information.`),mdx(\"p\",null,`Amazon S3 supports fine-grained access control on a per-object-path basis\nusing IAM policy. A full description of S3's access control mechanism is\nbeyond the scope of this guide, but an example IAM policy granting access\nto only a single state object within an S3 bucket is shown below:`),mdx(\"pre\",e({},{className:\"language-json\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-json\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Version\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"2012-10-17\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Statement\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Effect\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"Allow\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Action\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"s3:ListBucket\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Resource\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"arn:aws:s3:::myorg-terraform-states\"'),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Effect\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"Allow\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Action\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"s3:GetObject\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"s3:PutObject\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Resource\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"arn:aws:s3:::myorg-terraform-states/myapp/production/tfstate\"'),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",null,`It is also possible to apply fine-grained access control to the DynamoDB\ntable used for locking. When Terraform puts the state lock in place during `,mdx(\"inlineCode\",{parentName:\"p\"},\"terraform plan\"),\", it stores the full state file as a document and sets the s3 object key as the partition key for the document. After the state lock is released, Terraform places a digest of the updated state file in DynamoDB. The key is similar to the one for the original state file, but is suffixed with \",mdx(\"inlineCode\",{parentName:\"p\"},\"-md5\"),\".\"),mdx(\"p\",null,\"The example below shows a simple IAM policy that allows the backend operations role to perform these operations:\"),mdx(\"pre\",e({},{className:\"language-json\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-json\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Version\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"2012-10-17\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Statement\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Effect\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"Allow\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Action\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"          \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"dynamodb:DeleteItem\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"          \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"dynamodb:GetItem\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"          \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"dynamodb:PutItem\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"          \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"dynamodb:Query\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"          \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"dynamodb:UpdateItem\"'),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Resource\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"arn:aws:dynamodb:*:*:table/myorg-state-lock-table\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Condition\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"          \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"ForAllValues:StringEquals\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"            \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"dynamodb:LeadingKeys\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"              \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"myorg-terraform-states/myapp/production/tfstate\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"// during a state lock the full state file is stored with this key\"),`\n`,\"              \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"myorg-terraform-states/myapp/production/tfstate-md5\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"// after the lock is released a hash of the statefile's contents are stored with this key\"),`\n`,\"            \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"          \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",null,\"Refer to the \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/specifying-conditions.html\"}),\"AWS documentation on DynamoDB fine-grained locking\"),\" for more details.\"),mdx(\"h3\",e({},{id:\"configuring-custom-user-agent-information\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#configuring-custom-user-agent-information\",\"aria-label\":\"configuring custom user agent information permalink\"}),\"\\xBB\"),\"Configuring Custom User-Agent Information\"),mdx(\"p\",null,\"Note this feature is optional and only available in Terraform v0.13.1+.\"),mdx(\"p\",null,\"By default, the underlying AWS client used by the Terraform AWS Provider creates requests with User-Agent headers including information about Terraform and AWS Go SDK versions. To provide additional information in the User-Agent headers, the \",mdx(\"inlineCode\",{parentName:\"p\"},\"TF_APPEND_USER_AGENT\"),\" environment variable can be set and its value will be directly added to HTTP requests. e.g.\"),mdx(\"pre\",e({},{className:\"language-sh\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-sh\"}),'$ export TF_APPEND_USER_AGENT=\"JenkinsAgent/i-12345678 BuildID/1234 (Optional Extra Information)\"',`\n`)))}MDXContent.isMDXComponent=!0;\n","scope":{"version":"latest"}},"product":{"slug":"terraform","name":"Terraform","algoliaConfig":{"indexName":"product_TERRAFORM"},"basePaths":["cdktf","cli","cloud-docs","cloud-docs/agents","docs","enterprise","internals","intro","language","plugin","plugin/framework","plugin/log","plugin/mux","plugin/sdkv2","plugin/testing","registry","downloads"],"docsNavItems":["docs","language","cli","cloud-docs","enterprise","cdktf",{"icon":"provider","label":"Provider Use","fullPath":"/terraform/language/providers"},"plugin","registry",{"icon":"handshake","label":"Integration Program","fullPath":"/terraform/docs/partnerships"}],"rootDocsPaths":[{"iconName":"code","name":"CDK for Terraform","path":"cdktf","productSlugForLoader":"terraform-cdk"},{"iconName":"terminal-screen","name":"Terraform CLI","path":"cli"},{"iconName":"cloud","name":"Terraform Cloud","path":"cloud-docs","productSlugForLoader":"terraform-docs-common"},{"iconName":"cloud","name":"Cloud Docs Agents","navDataPrefix":"cloud-docs-agents","path":"cloud-docs/agents","productSlugForLoader":"terraform-docs-agents"},{"iconName":"docs","name":"About the Docs","path":"docs","productSlugForLoader":"terraform-docs-common"},{"iconName":"org","name":"Terraform Enterprise","path":"enterprise","productSlugForLoader":"ptfe-releases"},{"iconName":"docs","name":"Internals","path":"internals"},{"iconName":"docs","name":"Intro","path":"intro"},{"iconName":"file-source","name":"Configuration Language","path":"language"},{"iconName":"wrench","name":"Plugin Development","path":"plugin","productSlugForLoader":"terraform-docs-common"},{"iconName":"plug","name":"Framework","navDataPrefix":"plugin-framework","path":"plugin/framework","productSlugForLoader":"terraform-plugin-framework"},{"iconName":"plug","name":"Logging","navDataPrefix":"plugin-log","path":"plugin/log","productSlugForLoader":"terraform-plugin-log"},{"iconName":"plug","name":"Combining and Translating","navDataPrefix":"plugin-mux","path":"plugin/mux","productSlugForLoader":"terraform-plugin-mux"},{"iconName":"plug","name":"SDKv2","path":"plugin/sdkv2","productSlugForLoader":"terraform-plugin-sdk","navDataPrefix":"plugin-sdkv2"},{"iconName":"plug","name":"Testing","path":"plugin/testing","productSlugForLoader":"terraform-plugin-testing","navDataPrefix":"plugin-testing"},{"iconName":"plus-circle","name":"Registry Publishing","path":"registry","productSlugForLoader":"terraform-docs-common"}],"currentRootDocsPath":{"iconName":"file-source","name":"Configuration Language","path":"language"}},"projectName":null,"versions":null},"layoutProps":null,"__N_SSG":true},"page":"/terraform/language/[[...page]]","query":{"page":["settings","backends","s3"]},"buildId":"vnIg_8PIbgh6eod_QgOFp","assetPrefix":"/hashicorp-terraform","isFallback":false,"gsp":true,"appGip":true,"scriptLoader":[]}</script><script nomodule="">window.MSInputMethodContext && document.documentMode && document.write('<script src="/ie-warning.js"><\x2fscript>');</script></body></html>