{"pageProps":{"layoutProps":{"breadcrumbLinks":[{"title":"Developer","url":"/"},{"title":"Terraform","url":"/terraform"},{"title":"Internals","url":"/terraform/internals","isCurrentPage":false},{"title":"Provider Network Mirror Protocol","url":"/terraform/internals/provider-network-mirror-protocol","isCurrentPage":true}],"sidebarNavDataLevels":[{"levelButtonProps":{"levelDownButtonText":"Terraform Home"},"menuItems":[{"leadingIconName":"home","title":"HashiCorp Developer","href":"/"},{"leadingIconName":"guide","title":"Tutorials","href":"/tutorials"},{"divider":true},{"heading":"Products"},{"leadingIconName":"hcp","title":"HashiCorp Cloud Platform","href":"/hcp"},{"leadingIconName":"terraform","title":"Terraform","href":"/terraform"},{"leadingIconName":"packer","title":"Packer","href":"/packer"},{"leadingIconName":"consul","title":"Consul","href":"/consul"},{"leadingIconName":"vault","title":"Vault","href":"/vault"},{"leadingIconName":"boundary","title":"Boundary","href":"/boundary"},{"leadingIconName":"nomad","title":"Nomad","href":"/nomad"},{"leadingIconName":"waypoint","title":"Waypoint","href":"/waypoint"},{"leadingIconName":"vagrant","title":"Vagrant","href":"/vagrant"}],"showFilterInput":false,"title":"Main Menu"},{"levelButtonProps":{"levelUpButtonText":"Main Menu","levelDownButtonText":"Previous"},"menuItems":[{"title":"Terraform","fullPath":"/terraform","theme":"terraform"},{"title":"Install","fullPath":"/terraform/install"},{"title":"Intro to Terraform","fullPath":"/terraform/intro"},{"title":"Tutorials","fullPath":"/terraform/tutorials"},{"title":"Documentation","isOpen":true,"routes":[{"title":"Documentation","fullPath":"/terraform/docs"},{"title":"Configuration Language","fullPath":"/terraform/language"},{"title":"Terraform CLI","fullPath":"/terraform/cli"},{"title":"HCP Terraform","fullPath":"/terraform/cloud-docs"},{"title":"Terraform Enterprise","fullPath":"/terraform/enterprise"},{"title":"CDK for Terraform","fullPath":"/terraform/cdktf"},{"title":"Provider Use","fullPath":"/terraform/language/providers"},{"title":"Plugin Development","fullPath":"/terraform/plugin"},{"title":"Registry Publishing","fullPath":"/terraform/registry"},{"title":"Integration Program","fullPath":"/terraform/docs/partnerships"}]}],"showFilterInput":false,"title":"Terraform","visuallyHideTitle":true},{"backToLinkProps":{"text":"Terraform Home","href":"/terraform"},"levelButtonProps":{"levelUpButtonText":"Terraform Home"},"menuItems":[{"title":"Internals","fullPath":"/terraform/internals","theme":"terraform"},{"title":"Credentials Helpers","path":"credentials-helpers","filePath":"../docs/internals/credentials-helpers.mdx","fullPath":"/terraform/internals/credentials-helpers","id":"sidebar-nav-item-2"},{"title":"Debugging Terraform","path":"debugging","filePath":"../docs/internals/debugging.mdx","fullPath":"/terraform/internals/debugging","id":"sidebar-nav-item-3"},{"title":"Module Registry Protocol","path":"module-registry-protocol","filePath":"../docs/internals/module-registry-protocol.mdx","fullPath":"/terraform/internals/module-registry-protocol","id":"sidebar-nav-item-4"},{"title":"Provider Network Mirror Protocol","path":"provider-network-mirror-protocol","filePath":"../docs/internals/provider-network-mirror-protocol.mdx","fullPath":"/terraform/internals/provider-network-mirror-protocol","id":"sidebar-nav-item-5"},{"title":"Provider Registry Protocol","path":"provider-registry-protocol","filePath":"../docs/internals/provider-registry-protocol.mdx","fullPath":"/terraform/internals/provider-registry-protocol","id":"sidebar-nav-item-6"},{"title":"Dependency Graph","path":"graph","filePath":"../docs/internals/graph.mdx","fullPath":"/terraform/internals/graph","id":"sidebar-nav-item-7"},{"title":"Login Protocol","path":"login-protocol","filePath":"../docs/internals/login-protocol.mdx","fullPath":"/terraform/internals/login-protocol","id":"sidebar-nav-item-8"},{"title":"JSON Output Format","path":"json-format","filePath":"../docs/internals/json-format.mdx","fullPath":"/terraform/internals/json-format","id":"sidebar-nav-item-9"},{"title":"Remote Service Discovery","path":"remote-service-discovery","filePath":"../docs/internals/remote-service-discovery.mdx","fullPath":"/terraform/internals/remote-service-discovery","id":"sidebar-nav-item-10"},{"title":"Provider Metadata","path":"provider-meta","filePath":"../docs/internals/provider-meta.mdx","fullPath":"/terraform/internals/provider-meta","id":"sidebar-nav-item-11"},{"title":"Functions Metadata","path":"functions-meta","filePath":"../docs/internals/functions-meta.mdx","fullPath":"/terraform/internals/functions-meta","id":"sidebar-nav-item-12"},{"title":"Machine Readable UI","path":"machine-readable-ui","filePath":"../docs/internals/machine-readable-ui.mdx","fullPath":"/terraform/internals/machine-readable-ui","id":"sidebar-nav-item-13"},{"divider":true,"id":"sidebar-nav-item-14"},{"title":"Terraform CLI","href":null,"fullPath":"/terraform/cli","id":"sidebar-nav-item-15","path":"/cli"},{"divider":true,"id":"sidebar-nav-item-16"},{"title":"Configuration Language","href":null,"fullPath":"/terraform/language","id":"sidebar-nav-item-17","path":"/language"}],"title":"Internals","visuallyHideTitle":true}],"mainWidth":"narrow","githubFileUrl":"https://github.com/hashicorp/terraform/blob/main/website/../docs/internals/provider-network-mirror-protocol.mdx"},"metadata":{"title":"Provider network mirror protocol reference","description":"The provider network mirror protocol lets you provide an alternate installation source for your providers. Learn about the provider network mirror protocol.","layout":null},"outlineItems":[{"title":"Provider Network Mirror Protocol Reference","url":"#provider-network-mirror-protocol-reference"},{"title":"Introduction","url":"#introduction"},{"title":"Provider Addresses","url":"#provider-addresses"},{"title":"Protocol Base URL","url":"#protocol-base-url"},{"title":"List Available Versions","url":"#list-available-versions"},{"title":"List Available Installation Packages","url":"#list-available-installation-packages"},{"title":"Provider Mirror as a Static Website","url":"#provider-mirror-as-a-static-website"}],"pageHeading":{"id":"provider-network-mirror-protocol-reference","title":"Provider Network Mirror Protocol Reference"},"mdxSource":{"compiledSource":"const layoutProps={};const MDXLayout=\"wrapper\";function MDXContent({components,...props}){return mdx(MDXLayout,{...layoutProps,...props,components:components,mdxType:\"MDXLayout\"},mdx(\"p\",null,`⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️`),mdx(\"blockquote\",null,mdx(\"p\",{parentName:\"blockquote\"},`[!IMPORTANT]`,mdx(\"br\",{parentName:\"p\"}),`\n`,mdx(\"strong\",{parentName:\"p\"},`Documentation Update:`),` Product documentation previously located in `,mdx(\"inlineCode\",{parentName:\"p\"},`/website`),` has moved to the `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://github.com/hashicorp/web-unified-docs\"},mdx(\"inlineCode\",{parentName:\"a\"},`hashicorp/web-unified-docs`)),` repository, where all product documentation is now centralized. Please make contributions directly to `,mdx(\"inlineCode\",{parentName:\"p\"},`web-unified-docs`),`, since changes to `,mdx(\"inlineCode\",{parentName:\"p\"},`/website`),` in this repository will not appear on developer.hashicorp.com.\n⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️`)),mdx(\"p\",null,`This topic provides reference information about the provider network mirror protocol. You can implement an alternative installation source for Terraform providers and make the source available over the provider network mirror protocol, regardless of their origin registries.`),mdx(\"div\",{\"className\":\"alert alert-info g-type-body\"},mdx(\"p\",{parentName:\"div\"},`Provider network mirrors are supported only in Terraform CLI v0.13.2 and later. Prior versions do not support this protocol.`)),mdx(\"h2\",{\"id\":\"introduction\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#introduction\",\"aria-label\":\"introduction permalink\"},`\\xbb`),`Introduction`),mdx(\"p\",null,`Terraform uses network mirrors only if you activate them explicitly in\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/terraform/cli/config/config-file#provider-installation\"},`the CLI configuration's `,mdx(\"inlineCode\",{parentName:\"a\"},`provider_installation`),` block`),`.\nWhen enabled, a network mirror can serve providers belonging to any registry\nhostname, which can allow an organization to serve all of the Terraform\nproviders they intend to use from an internal server, rather than from each\nprovider's origin registry.`),mdx(\"p\",null,`This is `,mdx(\"em\",{parentName:\"p\"},`not`),` the protocol that should be implemented by a host intending to\nserve as an origin registry for Terraform Providers. To provide an origin\nregistry (whose hostname would then be included in the source addresses of the\nproviders it hosts), implement\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/terraform/internals/provider-registry-protocol\"},`the provider registry protocol`),`\ninstead.`),mdx(\"h2\",{\"id\":\"provider-addresses\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#provider-addresses\",\"aria-label\":\"provider addresses permalink\"},`\\xbb`),`Provider Addresses`),mdx(\"p\",null,`Each Terraform provider has an associated address which uniquely identifies it\nwithin Terraform. A provider address has the syntax `,mdx(\"inlineCode\",{parentName:\"p\"},`hostname/namespace/type`),`,\nwhich is described in more detail in\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/terraform/language/providers/requirements\"},`the Provider Requirements documentation`),`.`),mdx(\"p\",null,`By default, the `,mdx(\"inlineCode\",{parentName:\"p\"},`hostname`),` portion of a provider address serves both as part\nof its unique identifier `,mdx(\"em\",{parentName:\"p\"},`and`),` as the location of the registry to retrieve it\nfrom. However, when you configure Terraform to install providers from a network\nmirror, the `,mdx(\"inlineCode\",{parentName:\"p\"},`hostname`),` serves `,mdx(\"em\",{parentName:\"p\"},`only`),` as an identifier and no longer as\nan installation source. A provider mirror can therefore serve providers\nbelonging to a variety of different provider registry hostnames, including\nproviders from the public Terraform Registry at `,mdx(\"inlineCode\",{parentName:\"p\"},`registry.terraform.io`),`, from a\nsingle server.`),mdx(\"p\",null,`In the relative URL patterns later in this document, the placeholder `,mdx(\"inlineCode\",{parentName:\"p\"},`:hostname`),`\nrefers to the hostname from the address of the provider being requested, not\nthe hostname where the provider network mirror is deployed.`),mdx(\"h2\",{\"id\":\"protocol-base-url\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#protocol-base-url\",\"aria-label\":\"protocol base url permalink\"},`\\xbb`),`Protocol Base URL`),mdx(\"p\",null,`Most Terraform-native services use\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/terraform/internals/remote-service-discovery\"},`the remote service discovery protocol`),` so\nthat the physical location of the endpoints can potentially be separated from\nthe hostname used in identifiers. The Provider Network Mirror protocol does\n`,mdx(\"em\",{parentName:\"p\"},`not`),` use the service discovery indirection, because a network mirror location\nis only a physical location and is never used as part of the identifier of a\ndependency in a Terraform configuration.`),mdx(\"p\",null,`Instead, the provider installation section of the CLI configuration accepts\na base URL directly. The given URL must use the scheme `,mdx(\"inlineCode\",{parentName:\"p\"},`https:`),`, and should\nend with a trailing slash so that the relative URLs of the individual operation\nendpoints will be resolved beneath it.`),mdx(\"pre\",{\"style\":{\"backgroundColor\":\"var(--hds-code-block-color-surface-primary)\",\"color\":\"var(--hds-code-block-color-token)\"},\"tabindex\":\"0\",\"language\":\"hcl\",\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`provider_installation`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`  network_mirror`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    url `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"https://terraform.example.com/providers/\"`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  }`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`)),mdx(\"p\",null,`Terraform uses the base URL only as a stem to resolve the operation endpoint\nURLs against, and so it will never access the base URL directly. You can\ntherefore, if desired, publish human-readable usage documentation for your\nnetwork mirror at that URL.`),mdx(\"p\",null,`The following sections describe the various operations that a provider\nnetwork mirror server must implement to be compatible with Terraform CLI's\nprovider installer. The indicated URLs are all relative to the given base URL,\nas described above.`),mdx(\"p\",null,`The URLs are shown with the convention that a path portion with a colon `,mdx(\"inlineCode\",{parentName:\"p\"},`:`),`\nprefix is a placeholder for a dynamically-selected value, while all other\npath portions are literal. For example, in `,mdx(\"inlineCode\",{parentName:\"p\"},`:hostname/:namespace/:type/index.json`),`,\nthe first three path portions are placeholders while the third is literally\nthe string \"index.json\".`),mdx(\"p\",null,`The example requests in the following sections will assume the example mirror\nbase URL from the above CLI configuration example.`),mdx(\"h3\",{\"id\":\"authentication\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#authentication\",\"aria-label\":\"authentication permalink\"},`\\xbb`),`Authentication`),mdx(\"p\",null,`If the CLI configuration includes\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/terraform/cli/config/config-file#credentials\"},`credentials`),` for the hostname\ngiven in the network mirror base URL, Terraform will include those credentials\nin its requests for operations described below.`),mdx(\"p\",null,`If the given URL uses a non-standard port number (other than 443) then the\ncredentials must be associated with a hostname that includes the port number,\nsuch as `,mdx(\"inlineCode\",{parentName:\"p\"},`terraform.example.com:8443`),`.`),mdx(\"p\",null,`Terraform does `,mdx(\"em\",{parentName:\"p\"},`not`),` send credentials when retrieving the archives whose\nURLs are given in the \"List Available Installation Packages\" response below.\nIf a particular mirror considers the distribution packages themselves to be\nsensitive then it must use cryptographically-secure, user-specific, and\ntime-limited URLs in the metadata response. Strategies for doing so are out\nof scope of this protocol documentation.`),mdx(\"h2\",{\"id\":\"list-available-versions\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#list-available-versions\",\"aria-label\":\"list available versions permalink\"},`\\xbb`),`List Available Versions`),mdx(\"p\",null,`This operation determines which versions are currently available for a\nparticular provider.`),mdx(\"table\",null,mdx(\"thead\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"thead\"},mdx(\"th\",{parentName:\"tr\",\"align\":null},`Method`),mdx(\"th\",{parentName:\"tr\",\"align\":null},`Path`),mdx(\"th\",{parentName:\"tr\",\"align\":null},`Produces`))),mdx(\"tbody\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"inlineCode\",{parentName:\"td\"},`GET`)),mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"inlineCode\",{parentName:\"td\"},`:hostname/:namespace/:type/index.json`)),mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"inlineCode\",{parentName:\"td\"},`application/json`))))),mdx(\"h3\",{\"id\":\"parameters\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#parameters\",\"aria-label\":\"parameters permalink\"},`\\xbb`),`Parameters`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"hostname\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#hostname\",\"aria-label\":\"hostname permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`hostname`)),` (required): the hostname portion of the address of the requested\nprovider.`),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"namespace\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#namespace\",\"aria-label\":\"namespace permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`namespace`)),` (required): the namespace portion of the address of the requested\nprovider.`),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"type\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#type\",\"aria-label\":\"type permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`type`)),` (required): the type portion of the address of the requested provider.`)),mdx(\"h3\",{\"id\":\"sample-request\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#sample-request\",\"aria-label\":\"sample request permalink\"},`\\xbb`),`Sample Request`),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},`curl 'https://terraform.example.com/providers/registry.terraform.io/hashicorp/random/index.json'\n`)),mdx(\"h3\",{\"id\":\"sample-response\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#sample-response\",\"aria-label\":\"sample response permalink\"},`\\xbb`),`Sample Response`),mdx(\"pre\",{\"style\":{\"backgroundColor\":\"var(--hds-code-block-color-surface-primary)\",\"color\":\"var(--hds-code-block-color-token)\"},\"tabindex\":\"0\",\"language\":\"json\",\"className\":\"language-json\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-json\"},mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`{`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`  \"versions\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`    \"2.0.0\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {}`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`    \"2.0.1\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {}`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  }`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`)),mdx(\"h3\",{\"id\":\"response-properties\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#response-properties\",\"aria-label\":\"response properties permalink\"},`\\xbb`),`Response Properties`),mdx(\"p\",null,`A successful result is a JSON object containing a single property `,mdx(\"inlineCode\",{parentName:\"p\"},`versions`),`,\nwhich must be a JSON object.`),mdx(\"p\",null,`Each of the property names of the `,mdx(\"inlineCode\",{parentName:\"p\"},`versions`),` object represents an available\nversion number. The property values must be objects, but no properties are defined for those objects. We recommend leaving those objects empty for forward compatibility.`),mdx(\"p\",null,`Return `,mdx(\"inlineCode\",{parentName:\"p\"},`404 Not Found`),` to signal that the mirror does not have a provider\nwith the given address.`),mdx(\"h2\",{\"id\":\"list-available-installation-packages\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#list-available-installation-packages\",\"aria-label\":\"list available installation packages permalink\"},`\\xbb`),`List Available Installation Packages`),mdx(\"p\",null,`This operation returns download URLs and associated metadata for the\ndistribution packages for a particular version of a provider.`),mdx(\"p\",null,`Each distribution package is associated with a particular operating system\nand architecture. A network mirror may host only a subset of the available\npackages for a provider version, if the users of the mirror are known to all\nuse only a subset of the target platforms that Terraform supports.`),mdx(\"p\",null,`Terraform CLI uses this operation after it has selected the newest available\nversion matching the configured version constraints, in order to find a zip\narchive containing the plugin itself.`),mdx(\"table\",null,mdx(\"thead\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"thead\"},mdx(\"th\",{parentName:\"tr\",\"align\":null},`Method`),mdx(\"th\",{parentName:\"tr\",\"align\":null},`Path`),mdx(\"th\",{parentName:\"tr\",\"align\":null},`Produces`))),mdx(\"tbody\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"inlineCode\",{parentName:\"td\"},`GET`)),mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"inlineCode\",{parentName:\"td\"},`:hostname/:namespace/:type/:version.json`)),mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"inlineCode\",{parentName:\"td\"},`application/json`))))),mdx(\"h3\",{\"id\":\"parameters-1\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#parameters-1\",\"aria-label\":\"parameters permalink\"},`\\xbb`),`Parameters`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"hostname-1\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#hostname-1\",\"aria-label\":\"hostname permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`hostname`)),` (required): the hostname portion of the address of the requested\nprovider.`),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"namespace-1\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#namespace-1\",\"aria-label\":\"namespace permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`namespace`)),` (required): the namespace portion of the address of the requested\nprovider.`),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"type-1\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#type-1\",\"aria-label\":\"type permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`type`)),` (required): the type portion of the address of the requested provider.`),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"version\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#version\",\"aria-label\":\"version permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`version`)),` (required): the version selected to download. This will exactly\nmatch one of the version strings returned from a previous call to\n`,mdx(\"a\",{parentName:\"li\",\"href\":\"#list-available-versions\"},`List Available Versions`),`.`)),mdx(\"h3\",{\"id\":\"sample-request-1\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#sample-request-1\",\"aria-label\":\"sample request permalink\"},`\\xbb`),`Sample Request`),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},`curl 'https://terraform.example.com/providers/registry.terraform.io/hashicorp/random/2.0.0.json'\n`)),mdx(\"h3\",{\"id\":\"sample-response-1\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#sample-response-1\",\"aria-label\":\"sample response permalink\"},`\\xbb`),`Sample Response`),mdx(\"pre\",{\"style\":{\"backgroundColor\":\"var(--hds-code-block-color-surface-primary)\",\"color\":\"var(--hds-code-block-color-token)\"},\"tabindex\":\"0\",\"language\":\"json\",\"className\":\"language-json\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-json\"},mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`{`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`  \"archives\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`    \"darwin_amd64\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`      \"url\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"terraform-provider-random_2.0.0_darwin_amd64.zip\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`      \"hashes\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` [`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`        \"h1:4A07+ZFc2wgJwo8YNlQpr1rVlgUDlxXHhPJciaPY5gs=\"`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`      ]`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    }`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`    \"linux_amd64\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`      \"url\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"terraform-provider-random_2.0.0_linux_amd64.zip\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`      \"hashes\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` [`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`        \"h1:lCJCxf/LIowc2IGS9TPjWDyXY4nOmdGdfcwwDQCOURQ=\"`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`      ]`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    }`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  }`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`)),mdx(\"h3\",{\"id\":\"response-properties-1\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#response-properties-1\",\"aria-label\":\"response properties permalink\"},`\\xbb`),`Response Properties`),mdx(\"p\",null,`A successful result is a JSON object with a property called `,mdx(\"inlineCode\",{parentName:\"p\"},`archives`),`, which\nmust be a JSON object.`),mdx(\"p\",null,`Each of the property names of the `,mdx(\"inlineCode\",{parentName:\"p\"},`archives`),` object is a target platform\nidentifier, which consists of an operating system and architecture concatenated\nwith an underscore (`,mdx(\"inlineCode\",{parentName:\"p\"},`_`),`).`),mdx(\"p\",null,`Each property value in the `,mdx(\"inlineCode\",{parentName:\"p\"},`archives`),` object is itself a nested object with\nthe following properties:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"url\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#url\",\"aria-label\":\"url permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`url`)),` (required): a string specifying the URL from which Terraform should\ndownload the `,mdx(\"inlineCode\",{parentName:\"p\"},`.zip`),` archive containing the requested provider plugin version.`),mdx(\"p\",{parentName:\"li\"},`Terraform resolves the URL relative to the URL from which the current\nJSON document was returned, so the examples above containing only a\nfilename would cause Terraform to construct a URL like:`),mdx(\"pre\",{parentName:\"li\"},mdx(\"code\",{parentName:\"pre\"},`https://terraform.example.com/providers/registry.terraform.io/hashicorp/random/terraform-provider-random_2.0.0_darwin_amd64.zip\n`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"hashes\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#hashes\",\"aria-label\":\"hashes permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`hashes`)),` (optional): a JSON array of strings containing one or more hash\nvalues for the indicated archive. These hashes use Terraform's provider\npackage hashing algorithm. At present, the easiest way to populate these\nis to construct a mirror's JSON indices using the `,mdx(\"inlineCode\",{parentName:\"p\"},`terraform providers mirror`),`\ncommand, as described in a later section, which will include the calculated\nhashes of each provider.`),mdx(\"p\",{parentName:\"li\"},`If the response includes at least one hash, Terraform will select the hash\nwhose algorithm it considers to be strongest and verify that the downloaded\npackage matches that hash. If the response does not include a `,mdx(\"inlineCode\",{parentName:\"p\"},`hashes`),`\nproperty then Terraform will install the indicated archive with no\nverification.`))),mdx(\"p\",null,`Terraform CLI will only attempt to download versions that it has previously\nseen in response to `,mdx(\"a\",{parentName:\"p\",\"href\":\"#list-available-versions\"},`List Available Versions`),`.`),mdx(\"h2\",{\"id\":\"provider-mirror-as-a-static-website\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#provider-mirror-as-a-static-website\",\"aria-label\":\"provider mirror as a static website permalink\"},`\\xbb`),`Provider Mirror as a Static Website`),mdx(\"p\",null,`The provider mirror protocol is designed so that it can potentially be implemented\nby placing files on typical static website hosting services. When using this\nstrategy, implement the JSON index responses described above as `,mdx(\"inlineCode\",{parentName:\"p\"},`.json`),` files\nin the appropriate nested subdirectories, and ensure that your system is\nconfigured to serve `,mdx(\"inlineCode\",{parentName:\"p\"},`.json`),` files with the `,mdx(\"inlineCode\",{parentName:\"p\"},`application/json`),` media type.`),mdx(\"p\",null,`As a convenience, Terraform CLI includes\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/terraform/cli/commands/providers/mirror\"},`the `,mdx(\"inlineCode\",{parentName:\"a\"},`terraform providers mirror`),` subcommand`),`,\nwhich will analyze the current configuration for the providers it requires,\ndownload the packages for those providers from their origin registries, and\nplace them into a local directory suitable for use as a mirror.`),mdx(\"p\",null,`The `,mdx(\"inlineCode\",{parentName:\"p\"},`terraform providers mirror`),` subcommand also generates `,mdx(\"inlineCode\",{parentName:\"p\"},`index.json`),` and\nversion-specific `,mdx(\"inlineCode\",{parentName:\"p\"},`.json`),` files that can, when placed in a static website hosting\nsystem, produce responses compatible with the provider mirror protocol.`),mdx(\"p\",null,`If you wish to create a mirror with providers for a number of different\nTerraform configurations, run `,mdx(\"inlineCode\",{parentName:\"p\"},`terraform providers mirror`),` in each configuration\nin turn while providing the same output directory each time. Terraform will\nthen merge together all of the requirements into a single set of JSON indices.`))};MDXContent.isMDXComponent=true;","scope":{"product":"terraform","version":"latest"}},"product":{"slug":"terraform","name":"Terraform","algoliaConfig":{"indexName":"product_TERRAFORM"},"alertBannerActive":true,"alertBanner":{"tag":"New","url":"https://www.hashicorp.com/blog/introducing-the-infrastructure-cloud","text":"Terraform Cloud is now HCP Terraform","linkText":"Read more →","expirationDate":"2024-04-29T00:00:00-08:00"},"basePaths":["cdktf","cli","cloud-docs","cloud-docs/agents","docs","enterprise","internals","intro","language","plugin","plugin/framework","plugin/log","plugin/mux","plugin/sdkv2","plugin/testing","registry","downloads"],"docsNavItems":["docs","intro","language","cli","cloud-docs","enterprise","cdktf",{"icon":"provider","label":"Provider Use","fullPath":"/terraform/language/providers"},"plugin","registry",{"icon":"handshake","label":"Integration Program","fullPath":"/terraform/docs/partnerships"}],"rootDocsPaths":[{"iconName":"code","name":"CDK for Terraform","path":"cdktf","productSlugForLoader":"terraform-cdk"},{"iconName":"terminal-screen","name":"Terraform CLI","path":"cli"},{"iconName":"cloud","name":"HCP Terraform","path":"cloud-docs","productSlugForLoader":"terraform-docs-common"},{"iconName":"cloud","name":"HCP Terraform Agents","navDataPrefix":"cloud-docs-agents","path":"cloud-docs/agents","productSlugForLoader":"terraform-docs-agents"},{"iconName":"docs","name":"Documentation","path":"docs","productSlugForLoader":"terraform-docs-common"},{"iconName":"org","name":"Terraform Enterprise","path":"enterprise","productSlugForLoader":"terraform-enterprise"},{"iconName":"docs","name":"Internals","path":"internals"},{"iconName":"docs","name":"Intro to Terraform","path":"intro"},{"iconName":"file-source","name":"Configuration Language","path":"language"},{"iconName":"wrench","name":"Plugin Development","path":"plugin","productSlugForLoader":"terraform-docs-common"},{"iconName":"plug","name":"Framework","navDataPrefix":"plugin-framework","path":"plugin/framework","productSlugForLoader":"terraform-plugin-framework"},{"iconName":"plug","name":"Logging","navDataPrefix":"plugin-log","path":"plugin/log","productSlugForLoader":"terraform-plugin-log"},{"iconName":"plug","name":"Combining and Translating","navDataPrefix":"plugin-mux","path":"plugin/mux","productSlugForLoader":"terraform-plugin-mux"},{"iconName":"plug","name":"SDKv2","path":"plugin/sdkv2","productSlugForLoader":"terraform-plugin-sdk","navDataPrefix":"plugin-sdkv2"},{"iconName":"plug","name":"Testing","path":"plugin/testing","productSlugForLoader":"terraform-plugin-testing","navDataPrefix":"plugin-testing"},{"iconName":"plus-circle","name":"Registry Publishing","path":"registry","productSlugForLoader":"terraform-docs-common"}],"currentRootDocsPath":{"iconName":"docs","name":"Internals","path":"internals"}},"projectName":null,"versions":null},"__N_SSG":true}