{"pageProps":{"layoutProps":{"breadcrumbLinks":[{"title":"Developer","url":"/"},{"title":"Terraform","url":"/terraform"},{"title":"Configuration Language","url":"/terraform/language","isCurrentPage":false},{"title":"Expressions","url":"/terraform/language/expressions"},{"title":"Custom Conditions","url":"/terraform/language/expressions/custom-conditions","isCurrentPage":true}],"sidebarNavDataLevels":[{"levelButtonProps":{"levelDownButtonText":"Terraform Home"},"menuItems":[{"leadingIconName":"home","title":"HashiCorp Developer","href":"/"},{"leadingIconName":"guide","title":"Tutorials","href":"/tutorials"},{"divider":true},{"heading":"Products"},{"leadingIconName":"hcp","title":"HashiCorp Cloud Platform","href":"/hcp"},{"leadingIconName":"terraform","title":"Terraform","href":"/terraform"},{"leadingIconName":"packer","title":"Packer","href":"/packer"},{"leadingIconName":"consul","title":"Consul","href":"/consul"},{"leadingIconName":"vault","title":"Vault","href":"/vault"},{"leadingIconName":"boundary","title":"Boundary","href":"/boundary"},{"leadingIconName":"nomad","title":"Nomad","href":"/nomad"},{"leadingIconName":"waypoint","title":"Waypoint","href":"/waypoint"},{"leadingIconName":"vagrant","title":"Vagrant","href":"/vagrant"}],"showFilterInput":false,"title":"Main Menu"},{"levelButtonProps":{"levelUpButtonText":"Main Menu","levelDownButtonText":"Previous"},"menuItems":[{"title":"Terraform","fullPath":"/terraform","theme":"terraform"},{"title":"Install","fullPath":"/terraform/install"},{"title":"Tutorials","fullPath":"/terraform/tutorials"},{"title":"Documentation","isOpen":true,"routes":[{"title":"About the Docs","fullPath":"/terraform/docs"},{"title":"Configuration Language","fullPath":"/terraform/language"},{"title":"Terraform CLI","fullPath":"/terraform/cli"},{"title":"Terraform Cloud","fullPath":"/terraform/cloud-docs"},{"title":"Terraform Enterprise","fullPath":"/terraform/enterprise"},{"title":"CDK for Terraform","fullPath":"/terraform/cdktf"},{"title":"Provider Use","fullPath":"/terraform/language/providers"},{"title":"Plugin Development","fullPath":"/terraform/plugin"},{"title":"Registry Publishing","fullPath":"/terraform/registry"},{"title":"Integration Program","fullPath":"/terraform/docs/partnerships"}]}],"showFilterInput":false,"title":"Terraform","visuallyHideTitle":true},{"backToLinkProps":{"text":"Terraform Home","href":"/terraform"},"levelButtonProps":{"levelUpButtonText":"Terraform Home"},"menuItems":[{"title":"Configuration Language","fullPath":"/terraform/language","theme":"terraform"},{"title":"Style Guide","path":"style","filePath":"../docs/language/style.mdx","fullPath":"/terraform/language/style","id":"sidebar-nav-item-2"},{"title":"Files and Directories","routes":[{"title":"Overview","path":"files","filePath":"../docs/language/files/index.mdx","fullPath":"/terraform/language/files","id":"sidebar-nav-item-4"},{"title":"Override Files","path":"files/override","filePath":"../docs/language/files/override.mdx","fullPath":"/terraform/language/files/override","id":"sidebar-nav-item-5"},{"title":"Dependency Lock File","path":"files/dependency-lock","filePath":"../docs/language/files/dependency-lock.mdx","fullPath":"/terraform/language/files/dependency-lock","id":"sidebar-nav-item-6"},{"title":"Test Files","path":"files/tests","filePath":"../docs/language/files/tests.mdx","fullPath":"/terraform/language/files/tests","id":"sidebar-nav-item-7"}],"id":"sidebar-nav-item-3"},{"title":"Syntax","routes":[{"title":"Overview","path":"syntax","filePath":"../docs/language/syntax/index.mdx","fullPath":"/terraform/language/syntax","id":"sidebar-nav-item-9"},{"title":"Configuration Syntax","path":"syntax/configuration","filePath":"../docs/language/syntax/configuration.mdx","fullPath":"/terraform/language/syntax/configuration","id":"sidebar-nav-item-10"},{"title":"JSON Configuration Syntax","path":"syntax/json","filePath":"../docs/language/syntax/json.mdx","fullPath":"/terraform/language/syntax/json","id":"sidebar-nav-item-11"}],"id":"sidebar-nav-item-8"},{"title":"Resources","routes":[{"title":"Overview","path":"resources","filePath":"../docs/language/resources/index.mdx","fullPath":"/terraform/language/resources","id":"sidebar-nav-item-13"},{"title":"Resource Blocks","path":"resources/syntax","filePath":"../docs/language/resources/syntax.mdx","fullPath":"/terraform/language/resources/syntax","id":"sidebar-nav-item-14"},{"title":"Resource Behavior","path":"resources/behavior","filePath":"../docs/language/resources/behavior.mdx","fullPath":"/terraform/language/resources/behavior","id":"sidebar-nav-item-15"},{"title":"Meta-Arguments","routes":[{"title":"<code>depends_on</code>","href":null,"fullPath":"/terraform/language/meta-arguments/depends_on","id":"sidebar-nav-item-17","path":"/language/meta-arguments/depends_on"},{"title":"<code>count</code>","href":null,"fullPath":"/terraform/language/meta-arguments/count","id":"sidebar-nav-item-18","path":"/language/meta-arguments/count"},{"title":"<code>for_each</code>","href":null,"fullPath":"/terraform/language/meta-arguments/for_each","id":"sidebar-nav-item-19","path":"/language/meta-arguments/for_each"},{"title":"<code>provider</code>","href":null,"fullPath":"/terraform/language/meta-arguments/resource-provider","id":"sidebar-nav-item-20","path":"/language/meta-arguments/resource-provider"},{"title":"<code>lifecycle</code>","href":null,"fullPath":"/terraform/language/meta-arguments/lifecycle","id":"sidebar-nav-item-21","path":"/language/meta-arguments/lifecycle"}],"id":"sidebar-nav-item-16"},{"title":"Provisioners","routes":[{"title":"Declaring Provisioners","path":"resources/provisioners/syntax","filePath":"../docs/language/resources/provisioners/syntax.mdx","fullPath":"/terraform/language/resources/provisioners/syntax","id":"sidebar-nav-item-23"},{"title":"Provisioner Connections","path":"resources/provisioners/connection","filePath":"../docs/language/resources/provisioners/connection.mdx","fullPath":"/terraform/language/resources/provisioners/connection","id":"sidebar-nav-item-24"},{"title":"Provisioners Without a Resource","path":"resources/provisioners/null_resource","filePath":"../docs/language/resources/provisioners/null_resource.mdx","fullPath":"/terraform/language/resources/provisioners/null_resource","id":"sidebar-nav-item-25"},{"title":"file","path":"resources/provisioners/file","filePath":"../docs/language/resources/provisioners/file.mdx","fullPath":"/terraform/language/resources/provisioners/file","id":"sidebar-nav-item-26"},{"title":"local-exec","path":"resources/provisioners/local-exec","filePath":"../docs/language/resources/provisioners/local-exec.mdx","fullPath":"/terraform/language/resources/provisioners/local-exec","id":"sidebar-nav-item-27"},{"title":"remote-exec","path":"resources/provisioners/remote-exec","filePath":"../docs/language/resources/provisioners/remote-exec.mdx","fullPath":"/terraform/language/resources/provisioners/remote-exec","id":"sidebar-nav-item-28"}],"id":"sidebar-nav-item-22"},{"title":"The <code>terraform_data</code> Resource Type","path":"resources/terraform-data","filePath":"../docs/language/resources/terraform-data.mdx","fullPath":"/terraform/language/resources/terraform-data","id":"sidebar-nav-item-29"}],"id":"sidebar-nav-item-12"},{"title":"Data Sources","path":"data-sources","filePath":"../docs/language/data-sources/index.mdx","fullPath":"/terraform/language/data-sources","id":"sidebar-nav-item-30"},{"title":"Providers","routes":[{"title":"Overview","path":"providers","filePath":"../docs/language/providers/index.mdx","fullPath":"/terraform/language/providers","id":"sidebar-nav-item-32"},{"title":"Provider Configuration","path":"providers/configuration","filePath":"../docs/language/providers/configuration.mdx","fullPath":"/terraform/language/providers/configuration","id":"sidebar-nav-item-33"},{"title":"Provider Requirements","path":"providers/requirements","filePath":"../docs/language/providers/requirements.mdx","fullPath":"/terraform/language/providers/requirements","id":"sidebar-nav-item-34"},{"title":"Dependency Lock File","href":null,"fullPath":"/terraform/language/files/dependency-lock","id":"sidebar-nav-item-35","path":"/language/files/dependency-lock"}],"id":"sidebar-nav-item-31"},{"title":"Variables and Outputs","routes":[{"title":"Overview","path":"values","filePath":"../docs/language/values/index.mdx","fullPath":"/terraform/language/values","id":"sidebar-nav-item-37"},{"title":"Input Variables","path":"values/variables","filePath":"../docs/language/values/variables.mdx","fullPath":"/terraform/language/values/variables","id":"sidebar-nav-item-38"},{"title":"Output Values","path":"values/outputs","filePath":"../docs/language/values/outputs.mdx","fullPath":"/terraform/language/values/outputs","id":"sidebar-nav-item-39"},{"title":"Local Values","path":"values/locals","filePath":"../docs/language/values/locals.mdx","fullPath":"/terraform/language/values/locals","id":"sidebar-nav-item-40"}],"id":"sidebar-nav-item-36"},{"title":"Modules","routes":[{"title":"Overview","path":"modules","filePath":"../docs/language/modules/index.mdx","fullPath":"/terraform/language/modules","id":"sidebar-nav-item-42"},{"title":"Module Blocks","path":"modules/syntax","filePath":"../docs/language/modules/syntax.mdx","fullPath":"/terraform/language/modules/syntax","id":"sidebar-nav-item-43"},{"title":"Module Sources","path":"modules/sources","filePath":"../docs/language/modules/sources.mdx","fullPath":"/terraform/language/modules/sources","id":"sidebar-nav-item-44"},{"title":"Meta-Arguments","routes":[{"title":"<code>providers</code>","href":null,"fullPath":"/terraform/language/meta-arguments/module-providers","id":"sidebar-nav-item-46","path":"/language/meta-arguments/module-providers"},{"title":"<code>depends_on</code>","href":null,"fullPath":"/terraform/language/meta-arguments/depends_on","id":"sidebar-nav-item-47","path":"/language/meta-arguments/depends_on"},{"title":"<code>count</code>","href":null,"fullPath":"/terraform/language/meta-arguments/count","id":"sidebar-nav-item-48","path":"/language/meta-arguments/count"},{"title":"<code>for_each</code>","href":null,"fullPath":"/terraform/language/meta-arguments/for_each","id":"sidebar-nav-item-49","path":"/language/meta-arguments/for_each"}],"id":"sidebar-nav-item-45"},{"title":"Module Development","routes":[{"title":"Overview","path":"modules/develop","filePath":"../docs/language/modules/develop/index.mdx","fullPath":"/terraform/language/modules/develop","id":"sidebar-nav-item-51"},{"title":"Standard Module Structure","path":"modules/develop/structure","filePath":"../docs/language/modules/develop/structure.mdx","fullPath":"/terraform/language/modules/develop/structure","id":"sidebar-nav-item-52"},{"title":"Providers Within Modules","path":"modules/develop/providers","filePath":"../docs/language/modules/develop/providers.mdx","fullPath":"/terraform/language/modules/develop/providers","id":"sidebar-nav-item-53"},{"title":"Best Practices: Module Composition","path":"modules/develop/composition","filePath":"../docs/language/modules/develop/composition.mdx","fullPath":"/terraform/language/modules/develop/composition","id":"sidebar-nav-item-54"},{"title":"Publishing Modules","path":"modules/develop/publish","filePath":"../docs/language/modules/develop/publish.mdx","fullPath":"/terraform/language/modules/develop/publish","id":"sidebar-nav-item-55"},{"title":"Refactoring Modules","path":"modules/develop/refactoring","filePath":"../docs/language/modules/develop/refactoring.mdx","fullPath":"/terraform/language/modules/develop/refactoring","id":"sidebar-nav-item-56"}],"id":"sidebar-nav-item-50"}],"id":"sidebar-nav-item-41"},{"title":"Checks","path":"checks","filePath":"../docs/language/checks/index.mdx","fullPath":"/terraform/language/checks","id":"sidebar-nav-item-57"},{"title":"Import","routes":[{"title":"Overview","path":"import","filePath":"../docs/language/import/index.mdx","fullPath":"/terraform/language/import","id":"sidebar-nav-item-59"},{"title":"Generating Configuration","path":"import/generating-configuration","filePath":"../docs/language/import/generating-configuration.mdx","fullPath":"/terraform/language/import/generating-configuration","id":"sidebar-nav-item-60"}],"id":"sidebar-nav-item-58"},{"title":"Expressions","routes":[{"title":"Overview","path":"expressions","filePath":"../docs/language/expressions/index.mdx","fullPath":"/terraform/language/expressions","id":"sidebar-nav-item-62"},{"title":"Types and Values","path":"expressions/types","filePath":"../docs/language/expressions/types.mdx","fullPath":"/terraform/language/expressions/types","id":"sidebar-nav-item-63"},{"title":"Strings and Templates","path":"expressions/strings","filePath":"../docs/language/expressions/strings.mdx","fullPath":"/terraform/language/expressions/strings","id":"sidebar-nav-item-64"},{"title":"References to Values","path":"expressions/references","filePath":"../docs/language/expressions/references.mdx","fullPath":"/terraform/language/expressions/references","id":"sidebar-nav-item-65"},{"title":"Operators","path":"expressions/operators","filePath":"../docs/language/expressions/operators.mdx","fullPath":"/terraform/language/expressions/operators","id":"sidebar-nav-item-66"},{"title":"Function Calls","path":"expressions/function-calls","filePath":"../docs/language/expressions/function-calls.mdx","fullPath":"/terraform/language/expressions/function-calls","id":"sidebar-nav-item-67"},{"title":"Conditional Expressions","path":"expressions/conditionals","filePath":"../docs/language/expressions/conditionals.mdx","fullPath":"/terraform/language/expressions/conditionals","id":"sidebar-nav-item-68"},{"title":"For Expressions","path":"expressions/for","filePath":"../docs/language/expressions/for.mdx","fullPath":"/terraform/language/expressions/for","id":"sidebar-nav-item-69"},{"title":"Splat Expressions","path":"expressions/splat","filePath":"../docs/language/expressions/splat.mdx","fullPath":"/terraform/language/expressions/splat","id":"sidebar-nav-item-70"},{"title":"Dynamic Blocks","path":"expressions/dynamic-blocks","filePath":"../docs/language/expressions/dynamic-blocks.mdx","fullPath":"/terraform/language/expressions/dynamic-blocks","id":"sidebar-nav-item-71"},{"title":"Custom Conditions","path":"expressions/custom-conditions","filePath":"../docs/language/expressions/custom-conditions.mdx","fullPath":"/terraform/language/expressions/custom-conditions","id":"sidebar-nav-item-72"},{"title":"Type Constraints","path":"expressions/type-constraints","filePath":"../docs/language/expressions/type-constraints.mdx","fullPath":"/terraform/language/expressions/type-constraints","id":"sidebar-nav-item-73"},{"title":"Version Constraints","path":"expressions/version-constraints","filePath":"../docs/language/expressions/version-constraints.mdx","fullPath":"/terraform/language/expressions/version-constraints","id":"sidebar-nav-item-74"}],"id":"sidebar-nav-item-61"},{"title":"Functions","routes":[{"title":"Overview","path":"functions","filePath":"../docs/language/functions/index.mdx","fullPath":"/terraform/language/functions","id":"sidebar-nav-item-76"},{"title":"Numeric Functions","routes":[{"title":"<code>abs</code>","href":null,"fullPath":"/terraform/language/functions/abs","id":"sidebar-nav-item-78","path":"/language/functions/abs"},{"title":"<code>ceil</code>","href":null,"fullPath":"/terraform/language/functions/ceil","id":"sidebar-nav-item-79","path":"/language/functions/ceil"},{"title":"<code>floor</code>","href":null,"fullPath":"/terraform/language/functions/floor","id":"sidebar-nav-item-80","path":"/language/functions/floor"},{"title":"<code>log</code>","href":null,"fullPath":"/terraform/language/functions/log","id":"sidebar-nav-item-81","path":"/language/functions/log"},{"title":"<code>max</code>","href":null,"fullPath":"/terraform/language/functions/max","id":"sidebar-nav-item-82","path":"/language/functions/max"},{"title":"<code>min</code>","href":null,"fullPath":"/terraform/language/functions/min","id":"sidebar-nav-item-83","path":"/language/functions/min"},{"title":"<code>parseint</code>","href":null,"fullPath":"/terraform/language/functions/parseint","id":"sidebar-nav-item-84","path":"/language/functions/parseint"},{"title":"<code>pow</code>","href":null,"fullPath":"/terraform/language/functions/pow","id":"sidebar-nav-item-85","path":"/language/functions/pow"},{"title":"<code>signum</code>","href":null,"fullPath":"/terraform/language/functions/signum","id":"sidebar-nav-item-86","path":"/language/functions/signum"}],"id":"sidebar-nav-item-77"},{"title":"String Functions","routes":[{"title":"<code>chomp</code>","href":null,"fullPath":"/terraform/language/functions/chomp","id":"sidebar-nav-item-88","path":"/language/functions/chomp"},{"title":"<code>endswith</code>","href":null,"fullPath":"/terraform/language/functions/endswith","id":"sidebar-nav-item-89","path":"/language/functions/endswith"},{"title":"<code>format</code>","href":null,"fullPath":"/terraform/language/functions/format","id":"sidebar-nav-item-90","path":"/language/functions/format"},{"title":"<code>formatlist</code>","href":null,"fullPath":"/terraform/language/functions/formatlist","id":"sidebar-nav-item-91","path":"/language/functions/formatlist"},{"title":"<code>indent</code>","href":null,"fullPath":"/terraform/language/functions/indent","id":"sidebar-nav-item-92","path":"/language/functions/indent"},{"title":"<code>join</code>","href":null,"fullPath":"/terraform/language/functions/join","id":"sidebar-nav-item-93","path":"/language/functions/join"},{"title":"<code>lower</code>","href":null,"fullPath":"/terraform/language/functions/lower","id":"sidebar-nav-item-94","path":"/language/functions/lower"},{"title":"<code>regex</code>","href":null,"fullPath":"/terraform/language/functions/regex","id":"sidebar-nav-item-95","path":"/language/functions/regex"},{"title":"<code>regexall</code>","href":null,"fullPath":"/terraform/language/functions/regexall","id":"sidebar-nav-item-96","path":"/language/functions/regexall"},{"title":"<code>replace</code>","href":null,"fullPath":"/terraform/language/functions/replace","id":"sidebar-nav-item-97","path":"/language/functions/replace"},{"title":"<code>split</code>","href":null,"fullPath":"/terraform/language/functions/split","id":"sidebar-nav-item-98","path":"/language/functions/split"},{"title":"<code>startswith</code>","href":null,"fullPath":"/terraform/language/functions/startswith","id":"sidebar-nav-item-99","path":"/language/functions/startswith"},{"title":"<code>strcontains</code>","href":null,"fullPath":"/terraform/language/functions/strcontains","id":"sidebar-nav-item-100","path":"/language/functions/strcontains"},{"title":"<code>strrev</code>","href":null,"fullPath":"/terraform/language/functions/strrev","id":"sidebar-nav-item-101","path":"/language/functions/strrev"},{"title":"<code>substr</code>","href":null,"fullPath":"/terraform/language/functions/substr","id":"sidebar-nav-item-102","path":"/language/functions/substr"},{"title":"<code>title</code>","href":null,"fullPath":"/terraform/language/functions/title","id":"sidebar-nav-item-103","path":"/language/functions/title"},{"title":"<code>trim</code>","href":null,"fullPath":"/terraform/language/functions/trim","id":"sidebar-nav-item-104","path":"/language/functions/trim"},{"title":"<code>trimprefix</code>","href":null,"fullPath":"/terraform/language/functions/trimprefix","id":"sidebar-nav-item-105","path":"/language/functions/trimprefix"},{"title":"<code>trimsuffix</code>","href":null,"fullPath":"/terraform/language/functions/trimsuffix","id":"sidebar-nav-item-106","path":"/language/functions/trimsuffix"},{"title":"<code>trimspace</code>","href":null,"fullPath":"/terraform/language/functions/trimspace","id":"sidebar-nav-item-107","path":"/language/functions/trimspace"},{"title":"<code>upper</code>","href":null,"fullPath":"/terraform/language/functions/upper","id":"sidebar-nav-item-108","path":"/language/functions/upper"}],"id":"sidebar-nav-item-87"},{"title":"Collection Functions","routes":[{"title":"<code>alltrue</code>","href":null,"fullPath":"/terraform/language/functions/alltrue","id":"sidebar-nav-item-110","path":"/language/functions/alltrue"},{"title":"<code>anytrue</code>","href":null,"fullPath":"/terraform/language/functions/anytrue","id":"sidebar-nav-item-111","path":"/language/functions/anytrue"},{"title":"<code>chunklist</code>","href":null,"fullPath":"/terraform/language/functions/chunklist","id":"sidebar-nav-item-112","path":"/language/functions/chunklist"},{"title":"<code>coalesce</code>","href":null,"fullPath":"/terraform/language/functions/coalesce","id":"sidebar-nav-item-113","path":"/language/functions/coalesce"},{"title":"<code>coalescelist</code>","href":null,"fullPath":"/terraform/language/functions/coalescelist","id":"sidebar-nav-item-114","path":"/language/functions/coalescelist"},{"title":"<code>compact</code>","href":null,"fullPath":"/terraform/language/functions/compact","id":"sidebar-nav-item-115","path":"/language/functions/compact"},{"title":"<code>concat</code>","href":null,"fullPath":"/terraform/language/functions/concat","id":"sidebar-nav-item-116","path":"/language/functions/concat"},{"title":"<code>contains</code>","href":null,"fullPath":"/terraform/language/functions/contains","id":"sidebar-nav-item-117","path":"/language/functions/contains"},{"title":"<code>distinct</code>","href":null,"fullPath":"/terraform/language/functions/distinct","id":"sidebar-nav-item-118","path":"/language/functions/distinct"},{"title":"<code>element</code>","href":null,"fullPath":"/terraform/language/functions/element","id":"sidebar-nav-item-119","path":"/language/functions/element"},{"title":"<code>flatten</code>","href":null,"fullPath":"/terraform/language/functions/flatten","id":"sidebar-nav-item-120","path":"/language/functions/flatten"},{"title":"<code>index</code>","href":null,"fullPath":"/terraform/language/functions/index_function","id":"sidebar-nav-item-121","path":"/language/functions/index_function"},{"title":"<code>keys</code>","href":null,"fullPath":"/terraform/language/functions/keys","id":"sidebar-nav-item-122","path":"/language/functions/keys"},{"title":"<code>length</code>","href":null,"fullPath":"/terraform/language/functions/length","id":"sidebar-nav-item-123","path":"/language/functions/length"},{"title":"<code>list</code>","href":null,"fullPath":"/terraform/language/functions/list","id":"sidebar-nav-item-124","path":"/language/functions/list"},{"title":"<code>lookup</code>","href":null,"fullPath":"/terraform/language/functions/lookup","id":"sidebar-nav-item-125","path":"/language/functions/lookup"},{"title":"<code>map</code>","href":null,"fullPath":"/terraform/language/functions/map","id":"sidebar-nav-item-126","path":"/language/functions/map"},{"title":"<code>matchkeys</code>","href":null,"fullPath":"/terraform/language/functions/matchkeys","id":"sidebar-nav-item-127","path":"/language/functions/matchkeys"},{"title":"<code>merge</code>","href":null,"fullPath":"/terraform/language/functions/merge","id":"sidebar-nav-item-128","path":"/language/functions/merge"},{"title":"<code>one</code>","href":null,"fullPath":"/terraform/language/functions/one","id":"sidebar-nav-item-129","path":"/language/functions/one"},{"title":"<code>range</code>","href":null,"fullPath":"/terraform/language/functions/range","id":"sidebar-nav-item-130","path":"/language/functions/range"},{"title":"<code>reverse</code>","href":null,"fullPath":"/terraform/language/functions/reverse","id":"sidebar-nav-item-131","path":"/language/functions/reverse"},{"title":"<code>setintersection</code>","href":null,"fullPath":"/terraform/language/functions/setintersection","id":"sidebar-nav-item-132","path":"/language/functions/setintersection"},{"title":"<code>setproduct</code>","href":null,"fullPath":"/terraform/language/functions/setproduct","id":"sidebar-nav-item-133","path":"/language/functions/setproduct"},{"title":"<code>setsubtract</code>","href":null,"fullPath":"/terraform/language/functions/setsubtract","id":"sidebar-nav-item-134","path":"/language/functions/setsubtract"},{"title":"<code>setunion</code>","href":null,"fullPath":"/terraform/language/functions/setunion","id":"sidebar-nav-item-135","path":"/language/functions/setunion"},{"title":"<code>slice</code>","href":null,"fullPath":"/terraform/language/functions/slice","id":"sidebar-nav-item-136","path":"/language/functions/slice"},{"title":"<code>sort</code>","href":null,"fullPath":"/terraform/language/functions/sort","id":"sidebar-nav-item-137","path":"/language/functions/sort"},{"title":"<code>sum</code>","href":null,"fullPath":"/terraform/language/functions/sum","id":"sidebar-nav-item-138","path":"/language/functions/sum"},{"title":"<code>transpose</code>","href":null,"fullPath":"/terraform/language/functions/transpose","id":"sidebar-nav-item-139","path":"/language/functions/transpose"},{"title":"<code>values</code>","href":null,"fullPath":"/terraform/language/functions/values","id":"sidebar-nav-item-140","path":"/language/functions/values"},{"title":"<code>zipmap</code>","href":null,"fullPath":"/terraform/language/functions/zipmap","id":"sidebar-nav-item-141","path":"/language/functions/zipmap"}],"id":"sidebar-nav-item-109"},{"title":"Encoding Functions","routes":[{"title":"<code>base64decode</code>","href":null,"fullPath":"/terraform/language/functions/base64decode","id":"sidebar-nav-item-143","path":"/language/functions/base64decode"},{"title":"<code>base64encode</code>","href":null,"fullPath":"/terraform/language/functions/base64encode","id":"sidebar-nav-item-144","path":"/language/functions/base64encode"},{"title":"<code>base64gzip</code>","href":null,"fullPath":"/terraform/language/functions/base64gzip","id":"sidebar-nav-item-145","path":"/language/functions/base64gzip"},{"title":"<code>csvdecode</code>","href":null,"fullPath":"/terraform/language/functions/csvdecode","id":"sidebar-nav-item-146","path":"/language/functions/csvdecode"},{"title":"<code>jsondecode</code>","href":null,"fullPath":"/terraform/language/functions/jsondecode","id":"sidebar-nav-item-147","path":"/language/functions/jsondecode"},{"title":"<code>jsonencode</code>","href":null,"fullPath":"/terraform/language/functions/jsonencode","id":"sidebar-nav-item-148","path":"/language/functions/jsonencode"},{"title":"<code>textdecodebase64</code>","href":null,"fullPath":"/terraform/language/functions/textdecodebase64","id":"sidebar-nav-item-149","path":"/language/functions/textdecodebase64"},{"title":"<code>textencodebase64</code>","href":null,"fullPath":"/terraform/language/functions/textencodebase64","id":"sidebar-nav-item-150","path":"/language/functions/textencodebase64"},{"title":"<code>urlencode</code>","href":null,"fullPath":"/terraform/language/functions/urlencode","id":"sidebar-nav-item-151","path":"/language/functions/urlencode"},{"title":"<code>yamldecode</code>","href":null,"fullPath":"/terraform/language/functions/yamldecode","id":"sidebar-nav-item-152","path":"/language/functions/yamldecode"},{"title":"<code>yamlencode</code>","href":null,"fullPath":"/terraform/language/functions/yamlencode","id":"sidebar-nav-item-153","path":"/language/functions/yamlencode"}],"id":"sidebar-nav-item-142"},{"title":"Filesystem Functions","routes":[{"title":"<code>abspath</code>","href":null,"fullPath":"/terraform/language/functions/abspath","id":"sidebar-nav-item-155","path":"/language/functions/abspath"},{"title":"<code>dirname</code>","href":null,"fullPath":"/terraform/language/functions/dirname","id":"sidebar-nav-item-156","path":"/language/functions/dirname"},{"title":"<code>pathexpand</code>","href":null,"fullPath":"/terraform/language/functions/pathexpand","id":"sidebar-nav-item-157","path":"/language/functions/pathexpand"},{"title":"<code>basename</code>","href":null,"fullPath":"/terraform/language/functions/basename","id":"sidebar-nav-item-158","path":"/language/functions/basename"},{"title":"<code>file</code>","href":null,"fullPath":"/terraform/language/functions/file","id":"sidebar-nav-item-159","path":"/language/functions/file"},{"title":"<code>fileexists</code>","href":null,"fullPath":"/terraform/language/functions/fileexists","id":"sidebar-nav-item-160","path":"/language/functions/fileexists"},{"title":"<code>fileset</code>","href":null,"fullPath":"/terraform/language/functions/fileset","id":"sidebar-nav-item-161","path":"/language/functions/fileset"},{"title":"<code>filebase64</code>","href":null,"fullPath":"/terraform/language/functions/filebase64","id":"sidebar-nav-item-162","path":"/language/functions/filebase64"},{"title":"<code>templatefile</code>","href":null,"fullPath":"/terraform/language/functions/templatefile","id":"sidebar-nav-item-163","path":"/language/functions/templatefile"}],"id":"sidebar-nav-item-154"},{"title":"Date and Time Functions","routes":[{"title":"<code>formatdate</code>","href":null,"fullPath":"/terraform/language/functions/formatdate","id":"sidebar-nav-item-165","path":"/language/functions/formatdate"},{"title":"<code>plantimestamp</code>","href":null,"fullPath":"/terraform/language/functions/plantimestamp","id":"sidebar-nav-item-166","path":"/language/functions/plantimestamp"},{"title":"<code>timeadd</code>","href":null,"fullPath":"/terraform/language/functions/timeadd","id":"sidebar-nav-item-167","path":"/language/functions/timeadd"},{"title":"<code>timecmp</code>","href":null,"fullPath":"/terraform/language/functions/timecmp","id":"sidebar-nav-item-168","path":"/language/functions/timecmp"},{"title":"<code>timestamp</code>","href":null,"fullPath":"/terraform/language/functions/timestamp","id":"sidebar-nav-item-169","path":"/language/functions/timestamp"}],"id":"sidebar-nav-item-164"},{"title":"Hash and Crypto Functions","routes":[{"title":"<code>base64sha256</code>","href":null,"fullPath":"/terraform/language/functions/base64sha256","id":"sidebar-nav-item-171","path":"/language/functions/base64sha256"},{"title":"<code>base64sha512</code>","href":null,"fullPath":"/terraform/language/functions/base64sha512","id":"sidebar-nav-item-172","path":"/language/functions/base64sha512"},{"title":"<code>bcrypt</code>","href":null,"fullPath":"/terraform/language/functions/bcrypt","id":"sidebar-nav-item-173","path":"/language/functions/bcrypt"},{"title":"<code>filebase64sha256</code>","href":null,"fullPath":"/terraform/language/functions/filebase64sha256","id":"sidebar-nav-item-174","path":"/language/functions/filebase64sha256"},{"title":"<code>filebase64sha512</code>","href":null,"fullPath":"/terraform/language/functions/filebase64sha512","id":"sidebar-nav-item-175","path":"/language/functions/filebase64sha512"},{"title":"<code>filemd5</code>","href":null,"fullPath":"/terraform/language/functions/filemd5","id":"sidebar-nav-item-176","path":"/language/functions/filemd5"},{"title":"<code>filesha1</code>","href":null,"fullPath":"/terraform/language/functions/filesha1","id":"sidebar-nav-item-177","path":"/language/functions/filesha1"},{"title":"<code>filesha256</code>","href":null,"fullPath":"/terraform/language/functions/filesha256","id":"sidebar-nav-item-178","path":"/language/functions/filesha256"},{"title":"<code>filesha512</code>","href":null,"fullPath":"/terraform/language/functions/filesha512","id":"sidebar-nav-item-179","path":"/language/functions/filesha512"},{"title":"<code>md5</code>","href":null,"fullPath":"/terraform/language/functions/md5","id":"sidebar-nav-item-180","path":"/language/functions/md5"},{"title":"<code>rsadecrypt</code>","href":null,"fullPath":"/terraform/language/functions/rsadecrypt","id":"sidebar-nav-item-181","path":"/language/functions/rsadecrypt"},{"title":"<code>sha1</code>","href":null,"fullPath":"/terraform/language/functions/sha1","id":"sidebar-nav-item-182","path":"/language/functions/sha1"},{"title":"<code>sha256</code>","href":null,"fullPath":"/terraform/language/functions/sha256","id":"sidebar-nav-item-183","path":"/language/functions/sha256"},{"title":"<code>sha512</code>","href":null,"fullPath":"/terraform/language/functions/sha512","id":"sidebar-nav-item-184","path":"/language/functions/sha512"},{"title":"<code>uuid</code>","href":null,"fullPath":"/terraform/language/functions/uuid","id":"sidebar-nav-item-185","path":"/language/functions/uuid"},{"title":"<code>uuidv5</code>","href":null,"fullPath":"/terraform/language/functions/uuidv5","id":"sidebar-nav-item-186","path":"/language/functions/uuidv5"}],"id":"sidebar-nav-item-170"},{"title":"IP Network Functions","routes":[{"title":"<code>cidrhost</code>","href":null,"fullPath":"/terraform/language/functions/cidrhost","id":"sidebar-nav-item-188","path":"/language/functions/cidrhost"},{"title":"<code>cidrnetmask</code>","href":null,"fullPath":"/terraform/language/functions/cidrnetmask","id":"sidebar-nav-item-189","path":"/language/functions/cidrnetmask"},{"title":"<code>cidrsubnet</code>","href":null,"fullPath":"/terraform/language/functions/cidrsubnet","id":"sidebar-nav-item-190","path":"/language/functions/cidrsubnet"},{"title":"<code>cidrsubnets</code>","href":null,"fullPath":"/terraform/language/functions/cidrsubnets","id":"sidebar-nav-item-191","path":"/language/functions/cidrsubnets"}],"id":"sidebar-nav-item-187"},{"title":"Type Conversion Functions","routes":[{"title":"<code>can</code>","href":null,"fullPath":"/terraform/language/functions/can","id":"sidebar-nav-item-193","path":"/language/functions/can"},{"title":"<code>issensitive</code>","href":null,"fullPath":"/terraform/language/functions/issensitive","id":"sidebar-nav-item-194","path":"/language/functions/issensitive"},{"title":"<code>nonsensitive</code>","href":null,"fullPath":"/terraform/language/functions/nonsensitive","id":"sidebar-nav-item-195","path":"/language/functions/nonsensitive"},{"title":"<code>sensitive</code>","href":null,"fullPath":"/terraform/language/functions/sensitive","id":"sidebar-nav-item-196","path":"/language/functions/sensitive"},{"title":"<code>tobool</code>","href":null,"fullPath":"/terraform/language/functions/tobool","id":"sidebar-nav-item-197","path":"/language/functions/tobool"},{"title":"<code>tolist</code>","href":null,"fullPath":"/terraform/language/functions/tolist","id":"sidebar-nav-item-198","path":"/language/functions/tolist"},{"title":"<code>tomap</code>","href":null,"fullPath":"/terraform/language/functions/tomap","id":"sidebar-nav-item-199","path":"/language/functions/tomap"},{"title":"<code>tonumber</code>","href":null,"fullPath":"/terraform/language/functions/tonumber","id":"sidebar-nav-item-200","path":"/language/functions/tonumber"},{"title":"<code>toset</code>","href":null,"fullPath":"/terraform/language/functions/toset","id":"sidebar-nav-item-201","path":"/language/functions/toset"},{"title":"<code>tostring</code>","href":null,"fullPath":"/terraform/language/functions/tostring","id":"sidebar-nav-item-202","path":"/language/functions/tostring"},{"title":"<code>try</code>","href":null,"fullPath":"/terraform/language/functions/try","id":"sidebar-nav-item-203","path":"/language/functions/try"},{"title":"<code>type</code>","href":null,"fullPath":"/terraform/language/functions/type","id":"sidebar-nav-item-204","path":"/language/functions/type"}],"id":"sidebar-nav-item-192"},{"title":"Terraform-specific Functions","routes":[{"title":"<code>provider::terraform::encode_tfvars</code>","href":null,"fullPath":"/terraform/language/functions/terraform-encode_tfvars","id":"sidebar-nav-item-206","path":"/language/functions/terraform-encode_tfvars"},{"title":"<code>provider::terraform::decode_tfvars</code>","href":null,"fullPath":"/terraform/language/functions/terraform-decode_tfvars","id":"sidebar-nav-item-207","path":"/language/functions/terraform-decode_tfvars"},{"title":"<code>provider::terraform::encode_expr</code>","href":null,"fullPath":"/terraform/language/functions/terraform-encode_expr","id":"sidebar-nav-item-208","path":"/language/functions/terraform-encode_expr"}],"id":"sidebar-nav-item-205"}],"id":"sidebar-nav-item-75"},{"title":"Terraform Settings","routes":[{"title":"Overview","path":"settings","filePath":"../docs/language/settings/index.mdx","fullPath":"/terraform/language/settings","id":"sidebar-nav-item-210"},{"title":"Terraform Cloud","path":"settings/terraform-cloud","filePath":"../docs/language/settings/terraform-cloud.mdx","fullPath":"/terraform/language/settings/terraform-cloud","id":"sidebar-nav-item-211"},{"title":"Backends","routes":[{"title":"Backend Configuration","path":"settings/backends/configuration","filePath":"../docs/language/settings/backends/configuration.mdx","fullPath":"/terraform/language/settings/backends/configuration","id":"sidebar-nav-item-213"},{"title":"Available Backends","routes":[{"title":"local","href":null,"fullPath":"/terraform/language/settings/backends/local","id":"sidebar-nav-item-215","path":"/language/settings/backends/local"},{"title":"remote","href":null,"fullPath":"/terraform/language/settings/backends/remote","id":"sidebar-nav-item-216","path":"/language/settings/backends/remote"},{"title":"azurerm","href":null,"fullPath":"/terraform/language/settings/backends/azurerm","id":"sidebar-nav-item-217","path":"/language/settings/backends/azurerm"},{"title":"consul","href":null,"fullPath":"/terraform/language/settings/backends/consul","id":"sidebar-nav-item-218","path":"/language/settings/backends/consul"},{"title":"cos","href":null,"fullPath":"/terraform/language/settings/backends/cos","id":"sidebar-nav-item-219","path":"/language/settings/backends/cos"},{"title":"gcs","href":null,"fullPath":"/terraform/language/settings/backends/gcs","id":"sidebar-nav-item-220","path":"/language/settings/backends/gcs"},{"title":"http","href":null,"fullPath":"/terraform/language/settings/backends/http","id":"sidebar-nav-item-221","path":"/language/settings/backends/http"},{"title":"Kubernetes","href":null,"fullPath":"/terraform/language/settings/backends/kubernetes","id":"sidebar-nav-item-222","path":"/language/settings/backends/kubernetes"},{"title":"oss","href":null,"fullPath":"/terraform/language/settings/backends/oss","id":"sidebar-nav-item-223","path":"/language/settings/backends/oss"},{"title":"pg","href":null,"fullPath":"/terraform/language/settings/backends/pg","id":"sidebar-nav-item-224","path":"/language/settings/backends/pg"},{"title":"s3","href":null,"fullPath":"/terraform/language/settings/backends/s3","id":"sidebar-nav-item-225","path":"/language/settings/backends/s3"}],"id":"sidebar-nav-item-214"}],"id":"sidebar-nav-item-212"}],"id":"sidebar-nav-item-209"},{"title":"State","routes":[{"title":"Overview","path":"state","filePath":"../docs/language/state/index.mdx","fullPath":"/terraform/language/state","id":"sidebar-nav-item-227"},{"title":"Purpose","path":"state/purpose","filePath":"../docs/language/state/purpose.mdx","fullPath":"/terraform/language/state/purpose","id":"sidebar-nav-item-228"},{"title":"The <code>terraform_remote_state</code> Data Source","path":"state/remote-state-data","filePath":"../docs/language/state/remote-state-data.mdx","fullPath":"/terraform/language/state/remote-state-data","id":"sidebar-nav-item-229"},{"title":"Backends: State Storage and Locking","path":"state/backends","filePath":"../docs/language/state/backends.mdx","fullPath":"/terraform/language/state/backends","id":"sidebar-nav-item-230"},{"title":"Import Existing Resources","path":"state/import","filePath":"../docs/language/state/import.mdx","fullPath":"/terraform/language/state/import","id":"sidebar-nav-item-231"},{"title":"Locking","path":"state/locking","filePath":"../docs/language/state/locking.mdx","fullPath":"/terraform/language/state/locking","id":"sidebar-nav-item-232"},{"title":"Workspaces","path":"state/workspaces","filePath":"../docs/language/state/workspaces.mdx","fullPath":"/terraform/language/state/workspaces","id":"sidebar-nav-item-233"},{"title":"Remote State","path":"state/remote","filePath":"../docs/language/state/remote.mdx","fullPath":"/terraform/language/state/remote","id":"sidebar-nav-item-234"},{"title":"Sensitive Data","path":"state/sensitive-data","filePath":"../docs/language/state/sensitive-data.mdx","fullPath":"/terraform/language/state/sensitive-data","id":"sidebar-nav-item-235"}],"id":"sidebar-nav-item-226"},{"title":"Tests","routes":[{"title":"Overview","path":"tests","filePath":"../docs/language/tests/index.mdx","fullPath":"/terraform/language/tests","id":"sidebar-nav-item-237"},{"title":"Mocks","path":"tests/mocking","filePath":"../docs/language/tests/mocking.mdx","fullPath":"/terraform/language/tests/mocking","id":"sidebar-nav-item-238"}],"id":"sidebar-nav-item-236"},{"title":"Upgrading to Terraform v1.7","path":"upgrade-guides","filePath":"../docs/language/upgrade-guides/index.mdx","fullPath":"/terraform/language/upgrade-guides","id":"sidebar-nav-item-239"},{"title":"v1.x Compatibility Promises","path":"v1-compatibility-promises","filePath":"../docs/language/v1-compatibility-promises.mdx","fullPath":"/terraform/language/v1-compatibility-promises","id":"sidebar-nav-item-240"},{"divider":true,"id":"sidebar-nav-item-241"},{"title":"Terraform Internals","href":null,"fullPath":"/terraform/internals","id":"sidebar-nav-item-242","path":"/internals"}],"title":"Configuration Language","visuallyHideTitle":true}],"mainWidth":"narrow","githubFileUrl":"https://github.com/hashicorp/terraform/blob/main/website/../docs/language/expressions/custom-conditions.mdx"},"metadata":{"title":"Custom Conditions - Configuration Language","description":"Check custom requirements for variables, outputs, data sources, and resources and provide better error messages in context.","layout":null},"outlineItems":[{"title":"Custom Conditions","url":"#custom-conditions","dataHeapTrack":"toc-list-item-index-0"},{"title":"Selecting a Custom Condition for your use case","url":"#selecting-a-custom-condition-for-your-use-case","dataHeapTrack":"toc-list-item-index-1"},{"title":"Input Variable Validation","url":"#input-variable-validation","dataHeapTrack":"toc-list-item-index-2"},{"title":"Preconditions and Postconditions","url":"#preconditions-and-postconditions","dataHeapTrack":"toc-list-item-index-3"},{"title":"Checks with Assertions","url":"#checks-with-assertions","dataHeapTrack":"toc-list-item-index-4"},{"title":"Condition Expressions","url":"#condition-expressions","dataHeapTrack":"toc-list-item-index-5"},{"title":"Error Messages","url":"#error-messages","dataHeapTrack":"toc-list-item-index-6"},{"title":"Conditions Checked Only During Apply","url":"#conditions-checked-only-during-apply","dataHeapTrack":"toc-list-item-index-7"}],"pageHeading":{"id":"custom-conditions","title":"Custom Conditions"},"mdxSource":{"compiledSource":"const layoutProps={};const MDXLayout=\"wrapper\";function MDXContent({components,...props}){return mdx(MDXLayout,{...layoutProps,...props,components:components,mdxType:\"MDXLayout\"},mdx(\"p\",null,`You can create conditions that produce custom error messages for several types of objects in a configuration. For example, you can add a condition to an input variable that checks whether incoming image IDs are formatted properly. Custom conditions can capture assumptions, helping future maintainers understand the configuration design and intent. They also return useful information about errors earlier and in context, helping consumers more easily diagnose issues in their configurations.`),mdx(\"blockquote\",null,mdx(\"p\",{parentName:\"blockquote\"},mdx(\"strong\",{parentName:\"p\"},`Hands On:`),` Try the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/terraform/tutorials/configuration-language/checks\"},`Validate Infrastructure Using Checks`),` tutorial to learn how to use `,mdx(\"inlineCode\",{parentName:\"p\"},`check`),` blocks. Try the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/terraform/tutorials/configuration-language/custom-conditions\"},`Validate Modules with Custom Conditions`),` tutorial to learn how to use other custom conditions.`)),mdx(\"p\",null,`This page explains the following:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},`Creating checks with `,mdx(\"a\",{parentName:\"li\",\"href\":\"#checks-with-assertions\"},`assertions`),` to verify your infrastructure as a whole (Terraform v1.5.0 and later)`),mdx(\"li\",{parentName:\"ul\"},`Creating `,mdx(\"a\",{parentName:\"li\",\"href\":\"#input-variable-validation\"},`validation conditions`),` for input variables (Terraform v0.13.0 and later)`),mdx(\"li\",{parentName:\"ul\"},`Creating `,mdx(\"a\",{parentName:\"li\",\"href\":\"#preconditions-and-postconditions\"},`preconditions and postconditions`),` for resources, data sources, and outputs (Terraform v1.2.0 and later)`),mdx(\"li\",{parentName:\"ul\"},`Writing effective `,mdx(\"a\",{parentName:\"li\",\"href\":\"#condition-expressions\"},`condition expressions`),` and `,mdx(\"a\",{parentName:\"li\",\"href\":\"#error-messages\"},`error messages`)),mdx(\"li\",{parentName:\"ul\"},`When Terraform `,mdx(\"a\",{parentName:\"li\",\"href\":\"#conditions-checked-only-during-apply\"},`evaluates custom conditions`),` during the plan and apply cycle`)),mdx(\"h2\",{\"id\":\"selecting-a-custom-condition-for-your-use-case\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#selecting-a-custom-condition-for-your-use-case\",\"aria-label\":\"selecting a custom condition for your use case permalink\"},`\\xbb`),`Selecting a Custom Condition for your use case`),mdx(\"p\",null,`Terraform's different custom conditions are best suited to various situations. Use the following broad guidelines to select the best custom condition for your use case:`),mdx(\"ol\",null,mdx(\"li\",{parentName:\"ol\"},mdx(\"a\",{parentName:\"li\",\"href\":\"#checks-with-assertions\"},`Check blocks with assertions`),` validate your infrastructure as a whole. Additionally, check blocks do not prevent or block the overall execution of Terraform operations.`),mdx(\"li\",{parentName:\"ol\"},mdx(\"a\",{parentName:\"li\",\"href\":\"#input-variable-validation\"},`Validation conditions`),` or `,mdx(\"a\",{parentName:\"li\",\"href\":\"#preconditions-and-postconditions\"},`output postconditions`),` can ensure your configuration's inputs and outputs meet specific requirements.`),mdx(\"li\",{parentName:\"ol\"},`Resource `,mdx(\"a\",{parentName:\"li\",\"href\":\"#preconditions-and-postconditions\"},`preconditions and postconditions`),` can validate that Terraform produces your configuration with predictable results.`)),mdx(\"p\",null,`For more information on when to use certain custom conditions, see `,mdx(\"a\",{parentName:\"p\",\"href\":\"#choosing-between-preconditions-and-postconditions\"},`Choosing Between Preconditions and Postconditions`),` and `,mdx(\"a\",{parentName:\"p\",\"href\":\"/terraform/language/checks#choosing-checks-or-other-custom-conditions\"},`Choosing Checks or Other Custom Conditions`),`.`),mdx(\"h2\",{\"id\":\"input-variable-validation\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#input-variable-validation\",\"aria-label\":\"input variable validation permalink\"},`\\xbb`),`Input Variable Validation`),mdx(\"div\",{\"className\":\"alert alert-info g-type-body\"},mdx(\"p\",{parentName:\"div\"},``,mdx(\"strong\",{parentName:\"p\"},`Note:`),` Input variable validation is available in Terraform v0.13.0 and later.`)),mdx(\"p\",null,`Add one or more `,mdx(\"inlineCode\",{parentName:\"p\"},`validation`),` blocks within the `,mdx(\"inlineCode\",{parentName:\"p\"},`variable`),` block to specify custom conditions. Each validation requires a `,mdx(\"a\",{parentName:\"p\",\"href\":\"#condition-expressions\"},mdx(\"inlineCode\",{parentName:\"a\"},`condition`),` argument`),`, an expression that must use the value of the variable to return `,mdx(\"inlineCode\",{parentName:\"p\"},`true`),` if the value is valid, or `,mdx(\"inlineCode\",{parentName:\"p\"},`false`),` if it is invalid. The expression can refer only to the containing variable and must not produce errors.`),mdx(\"p\",null,`If the condition evaluates to `,mdx(\"inlineCode\",{parentName:\"p\"},`false`),`, Terraform produces an `,mdx(\"a\",{parentName:\"p\",\"href\":\"#error-messages\"},`error message`),` that includes the result of the `,mdx(\"inlineCode\",{parentName:\"p\"},`error_message`),` expression. If you declare multiple validations, Terraform returns error messages for all failed conditions.`),mdx(\"p\",null,`The following example checks whether the AMI ID has valid syntax.`),mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`variable`,mdx(\"span\",{parentName:\"span\",\"className\":\"token type variable\"},` \"image_id\" `)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`type`),`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` string`,`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`description`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"The id of the machine image (AMI) to use for the server.\"`),`\n`,`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`validation`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`condition`),`     `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` length(var.image_id) > `,mdx(\"span\",{parentName:\"code\",\"className\":\"token number\"},`4`),` && substr(var.image_id, `,mdx(\"span\",{parentName:\"code\",\"className\":\"token number\"},`0`),`, `,mdx(\"span\",{parentName:\"code\",\"className\":\"token number\"},`4`),`) `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"ami-\"`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`error_message`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"The image_id value must be a valid AMI id, starting with \\\\\"ami-\\\\\".\"`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`)),mdx(\"p\",null,`If the failure of an expression determines the validation decision, use the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/terraform/language/functions/can\"},mdx(\"inlineCode\",{parentName:\"a\"},`can`),` function`),` as demonstrated in the following example.`),mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`variable`,mdx(\"span\",{parentName:\"span\",\"className\":\"token type variable\"},` \"image_id\" `)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`type`),`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` string`,`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`description`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"The id of the machine image (AMI) to use for the server.\"`),`\n`,`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`validation`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# regex(...) fails if it cannot find a match`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`condition`),`     `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` can(regex(`,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"^ami-\"`),`, var.image_id))`,`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`error_message`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"The image_id value must be a valid AMI id, starting with \\\\\"ami-\\\\\".\"`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`)),mdx(\"h2\",{\"id\":\"preconditions-and-postconditions\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#preconditions-and-postconditions\",\"aria-label\":\"preconditions and postconditions permalink\"},`\\xbb`),`Preconditions and Postconditions`),mdx(\"div\",{\"className\":\"alert alert-info g-type-body\"},mdx(\"p\",{parentName:\"div\"},``,mdx(\"strong\",{parentName:\"p\"},`Note:`),` Preconditions and postconditions are available in Terraform v1.2.0 and later.`)),mdx(\"p\",null,`Use `,mdx(\"inlineCode\",{parentName:\"p\"},`precondition`),` and `,mdx(\"inlineCode\",{parentName:\"p\"},`postcondition`),` blocks to create custom rules for resources, data sources, and outputs.`),mdx(\"p\",null,`Terraform checks a precondition `,mdx(\"em\",{parentName:\"p\"},`before`),` evaluating the object it is associated with and checks a postcondition `,mdx(\"em\",{parentName:\"p\"},`after`),` evaluating the object. Terraform evaluates custom conditions as early as possible, but must defer conditions that depend on unknown values until the apply phase. Refer to `,mdx(\"a\",{parentName:\"p\",\"href\":\"#conditions-checked-only-during-apply\"},`Conditions Checked Only During Apply`),` for more details.`),mdx(\"h3\",{\"id\":\"usage\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#usage\",\"aria-label\":\"usage permalink\"},`\\xbb`),`Usage`),mdx(\"p\",null,`Each precondition and postcondition requires a `,mdx(\"a\",{parentName:\"p\",\"href\":\"#condition-expressions\"},mdx(\"inlineCode\",{parentName:\"a\"},`condition`),` argument`),`. This is an expression that must return `,mdx(\"inlineCode\",{parentName:\"p\"},`true`),` if the conditition is fufilled or `,mdx(\"inlineCode\",{parentName:\"p\"},`false`),` if it is invalid. The expression can refer to any other objects in the same module, as long as the references do not create cyclic dependencies. Resource postconditions can also use the `,mdx(\"a\",{parentName:\"p\",\"href\":\"#self-object\"},mdx(\"inlineCode\",{parentName:\"a\"},`self`),` object`),` to refer to attributes of each instance of the resource where they are configured.`),mdx(\"p\",null,`If the condition evaluates to `,mdx(\"inlineCode\",{parentName:\"p\"},`false`),`, Terraform will produce an `,mdx(\"a\",{parentName:\"p\",\"href\":\"#error-messages\"},`error message`),` that includes the result of the `,mdx(\"inlineCode\",{parentName:\"p\"},`error_message`),` expression. If you declare multiple preconditions or postconditions, Terraform returns error messages for all failed conditions.`),mdx(\"p\",null,`The following example uses a postcondition to detect if the caller accidentally provided an AMI intended for the wrong system component.`),mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`data `,mdx(\"span\",{parentName:\"span\",\"className\":\"token type variable\"},`\"aws_ami\"`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"example\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`id`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` var.aws_ami_id`,`\n`,`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`lifecycle`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# The AMI ID must refer to an existing AMI that has the tag \"nomad-server\".`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`postcondition`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`condition`),`     `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` self.tags`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"Component\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"nomad-server\"`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`error_message`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"tags[\\\\\"Component\\\\\"] must be \\\\\"nomad-server\\\\\".\"`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`)),mdx(\"h4\",{\"id\":\"resources-and-data-sources\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#resources-and-data-sources\",\"aria-label\":\"resources and data sources permalink\"},`\\xbb`),`Resources and Data Sources`),mdx(\"p\",null,`The `,mdx(\"inlineCode\",{parentName:\"p\"},`lifecycle`),` block inside a `,mdx(\"inlineCode\",{parentName:\"p\"},`resource`),` or `,mdx(\"inlineCode\",{parentName:\"p\"},`data`),` block can include both `,mdx(\"inlineCode\",{parentName:\"p\"},`precondition`),` and `,mdx(\"inlineCode\",{parentName:\"p\"},`postcondition`),` blocks.`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},`Terraform evaluates `,mdx(\"inlineCode\",{parentName:\"li\"},`precondition`),` blocks after evaluating existing `,mdx(\"inlineCode\",{parentName:\"li\"},`count`),` and `,mdx(\"inlineCode\",{parentName:\"li\"},`for_each`),` arguments. This lets Terraform evaluate the precondition separately for each instance and then make `,mdx(\"inlineCode\",{parentName:\"li\"},`each.key`),`, `,mdx(\"inlineCode\",{parentName:\"li\"},`count.index`),`, etc. available to those conditions. Terraform also evaluates preconditions before evaluating the resource's configuration arguments. Preconditions can take precedence over argument evaluation errors.`),mdx(\"li\",{parentName:\"ul\"},`Terraform evaluates `,mdx(\"inlineCode\",{parentName:\"li\"},`postcondition`),` blocks after planning and applying changes to a managed resource, or after reading from a data source. Postcondition failures prevent changes to other resources that depend on the failing resource.`)),mdx(\"p\",null,`In most cases, we do not recommend including both a `,mdx(\"inlineCode\",{parentName:\"p\"},`data`),` block and a `,mdx(\"inlineCode\",{parentName:\"p\"},`resource`),` block that both represent the same object in the same configuration. Doing so can prevent Terraform from understanding that the `,mdx(\"inlineCode\",{parentName:\"p\"},`data`),` block result can be affected by changes in the `,mdx(\"inlineCode\",{parentName:\"p\"},`resource`),` block. However, when you need to check a result of a `,mdx(\"inlineCode\",{parentName:\"p\"},`resource`),` block that the resource itself does not directly export, you can use a `,mdx(\"inlineCode\",{parentName:\"p\"},`data`),` block to check that object safely as long as you place the check as a direct `,mdx(\"inlineCode\",{parentName:\"p\"},`postcondition`),` of the `,mdx(\"inlineCode\",{parentName:\"p\"},`data`),` block. This tells Terraform that the `,mdx(\"inlineCode\",{parentName:\"p\"},`data`),` block is serving as a check of an object defined elsewhere, allowing Terraform to perform actions in the correct order.`),mdx(\"h4\",{\"id\":\"outputs\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#outputs\",\"aria-label\":\"outputs permalink\"},`\\xbb`),`Outputs`),mdx(\"p\",null,`An `,mdx(\"inlineCode\",{parentName:\"p\"},`output`),` block can include a `,mdx(\"inlineCode\",{parentName:\"p\"},`precondition`),`  block.`),mdx(\"p\",null,`Preconditions can serve a symmetrical purpose to input variable `,mdx(\"inlineCode\",{parentName:\"p\"},`validation`),` blocks. Whereas input variable validation checks assumptions the module makes about its inputs, preconditions check guarantees that the module makes about its outputs. You can use preconditions to prevent Terraform from saving an invalid new output value in the state. You can also use them to preserve a valid output value from the previous apply, if applicable.`),mdx(\"p\",null,`Terraform evaluates output value preconditions before evaluating the `,mdx(\"inlineCode\",{parentName:\"p\"},`value`),` expression to finalize the result. Preconditions can take precedence over potential errors in the `,mdx(\"inlineCode\",{parentName:\"p\"},`value`),` expression.`),mdx(\"h3\",{\"id\":\"examples\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#examples\",\"aria-label\":\"examples permalink\"},`\\xbb`),`Examples`),mdx(\"p\",null,`The following example shows use cases for preconditions and postconditions. The preconditions and postconditions declare the following assumptions and guarantees.`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\"},mdx(\"strong\",{parentName:\"p\"},`The AMI ID must refer to an AMI that contains an operating system for the\n`,mdx(\"inlineCode\",{parentName:\"strong\"},`x86_64`),` architecture.`),` The precondition would detect if the caller accidentally built an AMI for a different architecture, which may not be able to run the software this virtual machine is intended to host.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\"},mdx(\"strong\",{parentName:\"p\"},`The EC2 instance must be allocated a public DNS hostname.`),` In Amazon Web Services, EC2 instances are assigned public DNS hostnames only if they belong to a virtual network configured in a certain way. The postcondition would detect if the selected virtual network is not configured correctly, prompting the user to debug the network settings.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\"},mdx(\"strong\",{parentName:\"p\"},`The EC2 instance will have an encrypted root volume.`),` The postcondition ensures that the root volume is encrypted, even though the software running in this EC2 instance would probably still operate as expected on an unencrypted volume. This lets Terraform produce an error immediately, before any other components rely on the new EC2 instance.`))),mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`data `,mdx(\"span\",{parentName:\"span\",\"className\":\"token type variable\"},`\"aws_ami\"`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"example\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`owners`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"amazon\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`filter`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`name`),`   `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"image-id\"`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`values`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"ami-abc123\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`resource `,mdx(\"span\",{parentName:\"span\",\"className\":\"token type variable\"},`\"aws_instance\"`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"example\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`instance_type`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"t3.micro\"`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`ami`),`           `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` data.aws_ami.example.id`,`\n`,`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`lifecycle`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# The AMI ID must refer to an AMI that contains an operating system`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# for the \\`x86_64\\` architecture.`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`precondition`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`condition`),`     `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` data.aws_ami.example.architecture `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"x86_64\"`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`error_message`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"The selected AMI must be for the x86_64 architecture.\"`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# The EC2 instance must be allocated a public DNS hostname.`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`postcondition`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`condition`),`     `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` self.public_dns !`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"\"`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`error_message`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"EC2 instance must be in a VPC that has public DNS hostnames enabled.\"`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`data `,mdx(\"span\",{parentName:\"span\",\"className\":\"token type variable\"},`\"aws_ebs_volume\"`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"example\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# Use data resources that refer to other resources to`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# load extra data that isn't directly exported by a resource.`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`#`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# Read the details about the root storage volume for the EC2 instance`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# declared by aws_instance.example, using the exported ID.`),`\n`,`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`filter`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`name`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"volume-id\"`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`values`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`aws_instance.example.root_block_device`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),mdx(\"span\",{parentName:\"code\",\"className\":\"token number\"},`0`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`.volume_id`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# Whenever a data resource is verifying the result of a managed resource`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# declared in the same configuration, you MUST write the checks as`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# postconditions of the data resource. This ensures Terraform will wait`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# to read the data resource until after any changes to the managed resource`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# have completed.`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`lifecycle`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# The EC2 instance will have an encrypted root volume.`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`postcondition`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`condition`),`     `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` self.encrypted`,`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`error_message`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"The server's root volume is not encrypted.\"`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`output`,mdx(\"span\",{parentName:\"span\",\"className\":\"token type variable\"},` \"api_base_url\" `)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`value`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"https://`,mdx(\"span\",{parentName:\"span\",\"className\":\"token interpolation\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`$`),mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`{`),`aws_instance`,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`.`),`example`,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`.`),`private_dns`,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`}`)),`:8433/\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`)),mdx(\"h3\",{\"id\":\"choosing-between-preconditions-and-postconditions\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#choosing-between-preconditions-and-postconditions\",\"aria-label\":\"choosing between preconditions and postconditions permalink\"},`\\xbb`),`Choosing Between Preconditions and Postconditions`),mdx(\"p\",null,`You can often implement a validation check as either a postcondition of the resource producing the data or as a precondition of a resource or output value using the data. To decide which is most appropriate, consider whether the check is representing either an assumption or a guarantee.`),mdx(\"h4\",{\"id\":\"use-preconditions-for-assumptions\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#use-preconditions-for-assumptions\",\"aria-label\":\"use preconditions for assumptions permalink\"},`\\xbb`),`Use Preconditions for Assumptions`),mdx(\"p\",null,`An assumption is a condition that must be true in order for the configuration of a particular resource to be usable. For example, an `,mdx(\"inlineCode\",{parentName:\"p\"},`aws_instance`),` configuration can have the assumption that the given AMI will always be configured for the `,mdx(\"inlineCode\",{parentName:\"p\"},`x86_64`),` CPU architecture.`),mdx(\"p\",null,`We recommend using preconditions for assumptions, so that future maintainers can find them close to the other expressions that rely on that condition. This lets them understand more about what that resource is intended to allow.`),mdx(\"h4\",{\"id\":\"use-postconditions-for-guarantees\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#use-postconditions-for-guarantees\",\"aria-label\":\"use postconditions for guarantees permalink\"},`\\xbb`),`Use Postconditions for Guarantees`),mdx(\"p\",null,`A guarantee is a characteristic or behavior of an object that the rest of the configuration should be able to rely on. For example, an `,mdx(\"inlineCode\",{parentName:\"p\"},`aws_instance`),` configuration can have the guarantee that an EC2 instance will be running in a network that assigns it a private DNS record.`),mdx(\"p\",null,`We recommend using postconditions for guarantees, so that future maintainers can find them close to the resource configuration that is responsible for implementing those guarantees. This lets them more easily determine which behaviors they should preserve when changing the configuration.`),mdx(\"h4\",{\"id\":\"additional-decision-factors\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#additional-decision-factors\",\"aria-label\":\"additional decision factors permalink\"},`\\xbb`),`Additional Decision Factors`),mdx(\"p\",null,`You should also consider the following questions when creating preconditions and postconditions.`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},`Which resource or output value would be most helpful to report in the error message? Terraform will always report errors in the location where the condition was declared.`),mdx(\"li\",{parentName:\"ul\"},`Which approach is more convenient? If a particular resource has many dependencies that all make an assumption about that resource, it can be pragmatic to declare that once as a post-condition of the resource, rather than declaring it many times as preconditions on each of the dependencies.`),mdx(\"li\",{parentName:\"ul\"},`Is it helpful to declare the same or similar conditions as both preconditions and postconditions? This can be useful if the postcondition is in a different module than the precondition because it lets the modules verify one another as they evolve independently.`)),mdx(\"h2\",{\"id\":\"checks-with-assertions\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#checks-with-assertions\",\"aria-label\":\"checks with assertions permalink\"},`\\xbb`),`Checks with Assertions`),mdx(\"div\",{\"className\":\"alert alert-info g-type-body\"},mdx(\"p\",{parentName:\"div\"},``,mdx(\"strong\",{parentName:\"p\"},`Note:`),` Check blocks and their assertions are only available in Terraform v1.5.0 and later.`)),mdx(\"p\",null,mdx(\"a\",{parentName:\"p\",\"href\":\"/terraform/language/checks\"},`Check blocks`),` can validate your infrastructure outside the usual resource lifecycle. You can add custom conditions via `,mdx(\"inlineCode\",{parentName:\"p\"},`assert`),` blocks, which execute at the end of the plan and apply stages and produce warnings to notify you of problems within your infrastructure.`),mdx(\"p\",null,`You can add one or more `,mdx(\"inlineCode\",{parentName:\"p\"},`assert`),` blocks within a `,mdx(\"inlineCode\",{parentName:\"p\"},`check`),` block to verify custom conditions. Each assertion requires a `,mdx(\"a\",{parentName:\"p\",\"href\":\"#condition-expressions\"},mdx(\"inlineCode\",{parentName:\"a\"},`condition`),` argument`),`, a boolean expression that should return `,mdx(\"inlineCode\",{parentName:\"p\"},`true`),` if the intended assumption or guarantee is fulfilled or `,mdx(\"inlineCode\",{parentName:\"p\"},`false`),` if it does not. Your `,mdx(\"inlineCode\",{parentName:\"p\"},`condition`),` expression can refer to any resource, data source, or variable available to the surrounding `,mdx(\"inlineCode\",{parentName:\"p\"},`check`),` block.`),mdx(\"p\",null,`The following example uses a check block with an assertion to verify the Terraform website is healthy.`),mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},`check `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"health_check\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`data `,mdx(\"span\",{parentName:\"span\",\"className\":\"token type variable\"},`\"http\"`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"terraform_io\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`url`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"https://www.terraform.io\"`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`assert`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`condition`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` data.http.terraform_io.status_code `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token number\"},`200`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`error_message`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"`,mdx(\"span\",{parentName:\"span\",\"className\":\"token interpolation\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`$`),mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`{`),mdx(\"span\",{parentName:\"span\",\"className\":\"token keyword\"},`data`),mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`.`),mdx(\"span\",{parentName:\"span\",\"className\":\"token type variable\"},`http`),mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`.`),`terraform_io`,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`.`),`url`,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`}`)),` returned an unhealthy status code\"`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`)),mdx(\"p\",null,`If the condition evaluates to `,mdx(\"inlineCode\",{parentName:\"p\"},`false`),`, Terraform produces an `,mdx(\"a\",{parentName:\"p\",\"href\":\"#error-messages\"},`error message`),` that includes the result of the `,mdx(\"inlineCode\",{parentName:\"p\"},`error_message`),` expression. If you declare multiple assertions, Terraform returns error messages for all failed conditions.`),mdx(\"h3\",{\"id\":\"continuous-validation-in-terraform-cloud\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#continuous-validation-in-terraform-cloud\",\"aria-label\":\"continuous validation in terraform cloud permalink\"},`\\xbb`),`Continuous Validation in Terraform Cloud`),mdx(\"p\",null,`Terraform Cloud can automatically check whether the checks in a workspace’s configuration continue to pass after Terraform provisions the infrastructure. For example, you can write a `,mdx(\"inlineCode\",{parentName:\"p\"},`check`),` to continuously monitor the validity of an API gateway certificate. Continuous validation alerts you when the condition fails, so you can update the certificate and avoid errors the next time you want to update your infrastructure. Refer to `,mdx(\"a\",{parentName:\"p\",\"href\":\"/terraform/cloud-docs/workspaces/health#continuous-validation\"},`Continuous Validation`),` in the Terraform Cloud documentation for details.`),mdx(\"h2\",{\"id\":\"condition-expressions\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#condition-expressions\",\"aria-label\":\"condition expressions permalink\"},`\\xbb`),`Condition Expressions`),mdx(\"p\",null,`Check assertions, input variable validation, preconditions, and postconditions all require a `,mdx(\"inlineCode\",{parentName:\"p\"},`condition`),` argument. This is a boolean expression that should return `,mdx(\"inlineCode\",{parentName:\"p\"},`true`),` if the intended assumption or guarantee is fulfilled or `,mdx(\"inlineCode\",{parentName:\"p\"},`false`),` if it does not.`),mdx(\"p\",null,`You can use any of Terraform's built-in functions or language operators\nin a condition as long as the expression is valid and returns a boolean result. The following language features are particularly useful when writing condition expressions.`),mdx(\"h3\",{\"id\":\"logical-operators\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#logical-operators\",\"aria-label\":\"logical operators permalink\"},`\\xbb`),`Logical Operators`),mdx(\"p\",null,`Use the logical operators `,mdx(\"inlineCode\",{parentName:\"p\"},`&&`),` (AND), `,mdx(\"inlineCode\",{parentName:\"p\"},`||`),` (OR), and `,mdx(\"inlineCode\",{parentName:\"p\"},`!`),` (NOT) to combine multiple conditions together.`),mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`condition`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` var.name !`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"\"`),` && lower(var.name) `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` var.name`,`\n`)),mdx(\"p\",null,`You can also use arithmetic operators (e.g. `,mdx(\"inlineCode\",{parentName:\"p\"},`a + b`),`), equality operators (eg., `,mdx(\"inlineCode\",{parentName:\"p\"},`a == b`),`) and comparison operators (e.g., `,mdx(\"inlineCode\",{parentName:\"p\"},`a < b`),`). Refer to `,mdx(\"a\",{parentName:\"p\",\"href\":\"/terraform/language/expressions/operators\"},`Arithmetic and Logical Operators`),` for details.`),mdx(\"h3\",{\"id\":\"contains-function\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#contains-function\",\"aria-label\":\"contains function permalink\"},`\\xbb`),mdx(\"inlineCode\",{parentName:\"h3\"},`contains`),` Function`),mdx(\"p\",null,`Use the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/terraform/language/functions/contains\"},mdx(\"inlineCode\",{parentName:\"a\"},`contains`),` function`),` to test whether a given value is one of a set of predefined valid values.`),mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`condition`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` contains(`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"STAGE\"`),`, `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"PROD\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`, var.environment)`,`\n`)),mdx(\"h3\",{\"id\":\"length-function\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#length-function\",\"aria-label\":\"length function permalink\"},`\\xbb`),mdx(\"inlineCode\",{parentName:\"h3\"},`length`),` Function`),mdx(\"p\",null,`Use the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/terraform/language/functions/length\"},mdx(\"inlineCode\",{parentName:\"a\"},`length`),` function`),` to test a collection's length and require a non-empty list or map.`),mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`condition`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` length(var.items) !`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token number\"},`0`),`\n`)),mdx(\"p\",null,`This is a better approach than directly comparing with another collection using `,mdx(\"inlineCode\",{parentName:\"p\"},`==`),` or `,mdx(\"inlineCode\",{parentName:\"p\"},`!=`),`. This is because the comparison operators can only return `,mdx(\"inlineCode\",{parentName:\"p\"},`true`),` if both operands have exactly the same type, which is often ambiguous for empty collections.`),mdx(\"h3\",{\"id\":\"for-expressions\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#for-expressions\",\"aria-label\":\"for expressions permalink\"},`\\xbb`),mdx(\"inlineCode\",{parentName:\"h3\"},`for`),` Expressions`),mdx(\"p\",null,`Use `,mdx(\"a\",{parentName:\"p\",\"href\":\"/terraform/language/expressions/for\"},mdx(\"inlineCode\",{parentName:\"a\"},`for`),` expressions`),` in conjunction with the functions `,mdx(\"inlineCode\",{parentName:\"p\"},`alltrue`),` and `,mdx(\"inlineCode\",{parentName:\"p\"},`anytrue`),` to test whether a condition holds for all or for any elements of a collection.`),mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`condition`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` alltrue(`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`    for v in var.instances : contains(`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"t2.micro\"`),`, `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"m3.medium\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`, v.type)`,`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`)`,`\n`)),mdx(\"h3\",{\"id\":\"can-function\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#can-function\",\"aria-label\":\"can function permalink\"},`\\xbb`),mdx(\"inlineCode\",{parentName:\"h3\"},`can`),` Function`),mdx(\"p\",null,`Use the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/terraform/language/functions/can\"},mdx(\"inlineCode\",{parentName:\"a\"},`can`),` function`),` to concisely use the validity of an expression as a condition. It returns `,mdx(\"inlineCode\",{parentName:\"p\"},`true`),` if its given expression evaluates successfully and `,mdx(\"inlineCode\",{parentName:\"p\"},`false`),` if it returns any error, so you can use various other functions that typically return errors as a part of your condition expressions.`),mdx(\"p\",null,`For example, you can use `,mdx(\"inlineCode\",{parentName:\"p\"},`can`),` with `,mdx(\"inlineCode\",{parentName:\"p\"},`regex`),` to test if a string matches a particular pattern because `,mdx(\"inlineCode\",{parentName:\"p\"},`regex`),` returns an error when given a non-matching string.`),mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`condition`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` can(regex(`,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"^[a-z]+$\"`),`, var.name))`,`\n`)),mdx(\"p\",null,`You can also use `,mdx(\"inlineCode\",{parentName:\"p\"},`can`),` with the type conversion functions to test whether a value is convertible to a type or type constraint.`),mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# This remote output value must have a value that can`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# be used as a string, which includes strings themselves`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# but also allows numbers and boolean values.`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`condition`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` can(tostring(data.terraform_remote_state.example.outputs`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`))`,`\n`)),mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# This remote output value must be convertible to a list`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# type of with element type.`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`condition`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` can(tolist(data.terraform_remote_state.example.outputs`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"items\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`))`,`\n`)),mdx(\"p\",null,`You can also use `,mdx(\"inlineCode\",{parentName:\"p\"},`can`),` with attribute access or index operators to test whether a collection or structural value has a particular element or index.`),mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# var.example must have an attribute named \"foo\"`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`condition`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` can(var.example.foo)`,`\n`)),mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# var.example must be a sequence with at least one element`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`condition`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` can(var.example`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),mdx(\"span\",{parentName:\"code\",\"className\":\"token number\"},`0`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`)`,`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# (although it would typically be clearer to write this as a`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# test like length(var.example) > 0 to better represent the`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# intent of the condition.)`),`\n`)),mdx(\"h3\",{\"id\":\"self-object\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#self-object\",\"aria-label\":\"self object permalink\"},`\\xbb`),mdx(\"inlineCode\",{parentName:\"h3\"},`self`),` Object`),mdx(\"p\",null,`Use the `,mdx(\"inlineCode\",{parentName:\"p\"},`self`),` object in postcondition blocks to refer to attributes of the instance under evaluation.`),mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`resource `,mdx(\"span\",{parentName:\"span\",\"className\":\"token type variable\"},`\"aws_instance\"`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"example\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`instance_type`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"t2.micro\"`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`ami`),`           `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"ami-abc123\"`),`\n`,`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`lifecycle`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`postcondition`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`condition`),`     `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` self.instance_state `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"running\"`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`error_message`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"EC2 instance must be running.\"`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`)),mdx(\"h3\",{\"id\":\"each-and-count-objects\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#each-and-count-objects\",\"aria-label\":\"each and count objects permalink\"},`\\xbb`),mdx(\"inlineCode\",{parentName:\"h3\"},`each`),` and `,mdx(\"inlineCode\",{parentName:\"h3\"},`count`),` Objects`),mdx(\"p\",null,`In blocks where `,mdx(\"a\",{parentName:\"p\",\"href\":\"/terraform/language/meta-arguments/for_each\"},mdx(\"inlineCode\",{parentName:\"a\"},`for_each`)),` or `,mdx(\"a\",{parentName:\"p\",\"href\":\"/terraform/language/meta-arguments/count\"},mdx(\"inlineCode\",{parentName:\"a\"},`count`)),`  are set, use `,mdx(\"inlineCode\",{parentName:\"p\"},`each`),` and `,mdx(\"inlineCode\",{parentName:\"p\"},`count`),` objects to refer to other resources that are expanded in a chain.`),mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`variable`,mdx(\"span\",{parentName:\"span\",\"className\":\"token type variable\"},` \"vpc_cidrs\" `)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`type`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` set(string)`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`data `,mdx(\"span\",{parentName:\"span\",\"className\":\"token type variable\"},`\"aws_vpc\"`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"example\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`for_each`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` var.vpc_cidrs`,`\n`,`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`filter`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`name`),`   `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"cidr\"`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`values`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`each.key`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`resource `,mdx(\"span\",{parentName:\"span\",\"className\":\"token type variable\"},`\"aws_internet_gateway\"`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"example\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`for_each`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` data.aws_vpc.example`,`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`vpc_id`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` each.value.id`,`\n`,`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`lifecycle`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`precondition`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`condition`),`     `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` data.aws_vpc.example`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`each.key`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`.state `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"available\"`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`error_message`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"VPC `,mdx(\"span\",{parentName:\"span\",\"className\":\"token interpolation\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`$`),mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`{`),`each`,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`.`),`key`,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`}`)),` must be available.\"`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`)),mdx(\"h2\",{\"id\":\"error-messages\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#error-messages\",\"aria-label\":\"error messages permalink\"},`\\xbb`),`Error Messages`),mdx(\"p\",null,`Input variable validations, preconditions, and postconditions all must include the `,mdx(\"inlineCode\",{parentName:\"p\"},`error_message`),` argument. This contains the text that Terraform will include as part of error messages when it detects an unmet condition.`),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},`Error: Resource postcondition failed`,`\n`,`\n`,`  with data.aws_ami.example,`,`\n`,`  on ec2.tf line 19, in data \"aws_ami\" \"example\":`,`\n`,`  72:       condition     = self.tags[\"Component\"] == \"nomad-server\"`,`\n`,`    |----------------`,`\n`,`    | self.tags[\"Component\"] is \"consul-server\"`,`\n`,`\n`,`The selected AMI must be tagged with the Component value \"nomad-server\".`,`\n`)),mdx(\"p\",null,`The `,mdx(\"inlineCode\",{parentName:\"p\"},`error_message`),` argument can be any expression that evaluates to a string.\nThis includes literal strings, heredocs, and template expressions. You can use the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/terraform/language/functions/format\"},mdx(\"inlineCode\",{parentName:\"a\"},`format`),` function`),` to convert items of `,mdx(\"inlineCode\",{parentName:\"p\"},`null`),`, `,mdx(\"inlineCode\",{parentName:\"p\"},`list`),`, or `,mdx(\"inlineCode\",{parentName:\"p\"},`map`),` types into a formatted string. Multi-line\nerror messages are supported, and lines with leading whitespace will not be\nword wrapped.`),mdx(\"p\",null,`We recommend writing error messages as one or more full sentences in a\nstyle similar to Terraform's own error messages. Terraform will show the\nmessage alongside the name of the resource that detected the problem and any\nexternal values included in the condition expression.`),mdx(\"h2\",{\"id\":\"conditions-checked-only-during-apply\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#conditions-checked-only-during-apply\",\"aria-label\":\"conditions checked only during apply permalink\"},`\\xbb`),`Conditions Checked Only During Apply`),mdx(\"p\",null,`Terraform evaluates custom conditions as early as possible.`),mdx(\"p\",null,`Input variable validations can only refer to the variable value, so Terraform always evaluates them immediately. Check assertions, preconditions, and postconditions depend on Terraform evaluating whether the value(s) associated with the condition are known before or after applying the configuration.`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},`Known before apply:`),` Terraform checks the condition during the planning phase. For example, Terraform can know the value of an image ID during planning as long as it is not generated from another resource.`),mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},`Known after apply:`),` Terraform delays checking that condition until the apply phase. For example, AWS only assigns the root volume ID when it starts an EC2 instance, so Terraform cannot know this value until apply.`)),mdx(\"p\",null,`During the apply phase, a failed `,mdx(\"em\",{parentName:\"p\"},`precondition`),`\nwill prevent Terraform from implementing planned actions for the associated resource. However, a failed `,mdx(\"em\",{parentName:\"p\"},`postcondition`),` will halt processing after Terraform has already implemented these actions. The failed postcondition prevents any further downstream actions that rely on the resource, but does not undo the actions Terraform has already taken.`),mdx(\"p\",null,`Terraform typically has less information during the initial creation of a\nfull configuration than when applying subsequent changes. Therefore, Terraform may check conditions during apply for initial creation and then check them during planning for subsequent updates.`))};MDXContent.isMDXComponent=true;","scope":{"version":"latest"}},"product":{"slug":"terraform","name":"Terraform","algoliaConfig":{"indexName":"product_TERRAFORM"},"alertBannerActive":true,"alertBanner":{"tag":"HashiDays","url":"https://hashicorp.com/conferences/hashidays","text":"One conference. Three cities.","linkText":"Find a city near you","expirationDate":"2024-06-14T00:00:00-08:00"},"basePaths":["cdktf","cli","cloud-docs","cloud-docs/agents","docs","enterprise","internals","intro","language","plugin","plugin/framework","plugin/log","plugin/mux","plugin/sdkv2","plugin/testing","registry","downloads"],"docsNavItems":["docs","language","cli","cloud-docs","enterprise","cdktf",{"icon":"provider","label":"Provider Use","fullPath":"/terraform/language/providers"},"plugin","registry",{"icon":"handshake","label":"Integration Program","fullPath":"/terraform/docs/partnerships"}],"rootDocsPaths":[{"iconName":"code","name":"CDK for Terraform","path":"cdktf","productSlugForLoader":"terraform-cdk"},{"iconName":"terminal-screen","name":"Terraform CLI","path":"cli"},{"iconName":"cloud","name":"Terraform Cloud","path":"cloud-docs","productSlugForLoader":"terraform-docs-common"},{"iconName":"cloud","name":"Cloud Docs Agents","navDataPrefix":"cloud-docs-agents","path":"cloud-docs/agents","productSlugForLoader":"terraform-docs-agents"},{"iconName":"docs","name":"About the Docs","path":"docs","productSlugForLoader":"terraform-docs-common"},{"iconName":"org","name":"Terraform Enterprise","path":"enterprise","productSlugForLoader":"ptfe-releases"},{"iconName":"docs","name":"Internals","path":"internals"},{"iconName":"docs","name":"Intro","path":"intro"},{"iconName":"file-source","name":"Configuration Language","path":"language"},{"iconName":"wrench","name":"Plugin Development","path":"plugin","productSlugForLoader":"terraform-docs-common"},{"iconName":"plug","name":"Framework","navDataPrefix":"plugin-framework","path":"plugin/framework","productSlugForLoader":"terraform-plugin-framework"},{"iconName":"plug","name":"Logging","navDataPrefix":"plugin-log","path":"plugin/log","productSlugForLoader":"terraform-plugin-log"},{"iconName":"plug","name":"Combining and Translating","navDataPrefix":"plugin-mux","path":"plugin/mux","productSlugForLoader":"terraform-plugin-mux"},{"iconName":"plug","name":"SDKv2","path":"plugin/sdkv2","productSlugForLoader":"terraform-plugin-sdk","navDataPrefix":"plugin-sdkv2"},{"iconName":"plug","name":"Testing","path":"plugin/testing","productSlugForLoader":"terraform-plugin-testing","navDataPrefix":"plugin-testing"},{"iconName":"plus-circle","name":"Registry Publishing","path":"registry","productSlugForLoader":"terraform-docs-common"}],"currentRootDocsPath":{"iconName":"file-source","name":"Configuration Language","path":"language"}},"projectName":null,"versions":null},"__N_SSG":true}